var vy=Object.defineProperty;var Ey=(r,e,t)=>e in r?vy(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var jg=(r,e,t)=>Ey(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var Oc={exports:{}},go={},Fc={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function xy(){if(Bg)return Se;Bg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=_&&R[_]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function S(R,z,te){this.props=R,this.context=z,this.refs=w,this.updater=te||x}S.prototype.isReactComponent={},S.prototype.setState=function(R,z){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,z,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function I(){}I.prototype=S.prototype;function T(R,z,te){this.props=R,this.context=z,this.refs=w,this.updater=te||x}var D=T.prototype=new I;D.constructor=T,E(D,S.prototype),D.isPureReactComponent=!0;var M=Array.isArray,k=Object.prototype.hasOwnProperty,X={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function N(R,z,te){var G,ue={},he=null,me=null;if(z!=null)for(G in z.ref!==void 0&&(me=z.ref),z.key!==void 0&&(he=""+z.key),z)k.call(z,G)&&!V.hasOwnProperty(G)&&(ue[G]=z[G]);var Ee=arguments.length-2;if(Ee===1)ue.children=te;else if(1<Ee){for(var Ce=Array(Ee),ze=0;ze<Ee;ze++)Ce[ze]=arguments[ze+2];ue.children=Ce}if(R&&R.defaultProps)for(G in Ee=R.defaultProps,Ee)ue[G]===void 0&&(ue[G]=Ee[G]);return{$$typeof:r,type:R,key:he,ref:me,props:ue,_owner:X.current}}function j(R,z){return{$$typeof:r,type:R.type,key:z,ref:R.ref,props:R.props,_owner:R._owner}}function b(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function ne(R){var z={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(te){return z[te]})}var q=/\/+/g;function ee(R,z){return typeof R=="object"&&R!==null&&R.key!=null?ne(""+R.key):z.toString(36)}function oe(R,z,te,G,ue){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var me=!1;if(R===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(R.$$typeof){case r:case e:me=!0}}if(me)return me=R,ue=ue(me),R=G===""?"."+ee(me,0):G,M(ue)?(te="",R!=null&&(te=R.replace(q,"$&/")+"/"),oe(ue,z,te,"",function(ze){return ze})):ue!=null&&(b(ue)&&(ue=j(ue,te+(!ue.key||me&&me.key===ue.key?"":(""+ue.key).replace(q,"$&/")+"/")+R)),z.push(ue)),1;if(me=0,G=G===""?".":G+":",M(R))for(var Ee=0;Ee<R.length;Ee++){he=R[Ee];var Ce=G+ee(he,Ee);me+=oe(he,z,te,Ce,ue)}else if(Ce=y(R),typeof Ce=="function")for(R=Ce.call(R),Ee=0;!(he=R.next()).done;)he=he.value,Ce=G+ee(he,Ee++),me+=oe(he,z,te,Ce,ue);else if(he==="object")throw z=String(R),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return me}function H(R,z,te){if(R==null)return R;var G=[],ue=0;return oe(R,G,"","",function(he){return z.call(te,he,ue++)}),G}function ie(R){if(R._status===-1){var z=R._result;z=z(),z.then(function(te){(R._status===0||R._status===-1)&&(R._status=1,R._result=te)},function(te){(R._status===0||R._status===-1)&&(R._status=2,R._result=te)}),R._status===-1&&(R._status=0,R._result=z)}if(R._status===1)return R._result.default;throw R._result}var Y={current:null},W={transition:null},Q={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:W,ReactCurrentOwner:X};function U(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:H,forEach:function(R,z,te){H(R,function(){z.apply(this,arguments)},te)},count:function(R){var z=0;return H(R,function(){z++}),z},toArray:function(R){return H(R,function(z){return z})||[]},only:function(R){if(!b(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Se.Component=S,Se.Fragment=t,Se.Profiler=o,Se.PureComponent=T,Se.StrictMode=i,Se.Suspense=d,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Se.act=U,Se.cloneElement=function(R,z,te){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var G=E({},R.props),ue=R.key,he=R.ref,me=R._owner;if(z!=null){if(z.ref!==void 0&&(he=z.ref,me=X.current),z.key!==void 0&&(ue=""+z.key),R.type&&R.type.defaultProps)var Ee=R.type.defaultProps;for(Ce in z)k.call(z,Ce)&&!V.hasOwnProperty(Ce)&&(G[Ce]=z[Ce]===void 0&&Ee!==void 0?Ee[Ce]:z[Ce])}var Ce=arguments.length-2;if(Ce===1)G.children=te;else if(1<Ce){Ee=Array(Ce);for(var ze=0;ze<Ce;ze++)Ee[ze]=arguments[ze+2];G.children=Ee}return{$$typeof:r,type:R.type,key:ue,ref:he,props:G,_owner:me}},Se.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},Se.createElement=N,Se.createFactory=function(R){var z=N.bind(null,R);return z.type=R,z},Se.createRef=function(){return{current:null}},Se.forwardRef=function(R){return{$$typeof:c,render:R}},Se.isValidElement=b,Se.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:ie}},Se.memo=function(R,z){return{$$typeof:g,type:R,compare:z===void 0?null:z}},Se.startTransition=function(R){var z=W.transition;W.transition={};try{R()}finally{W.transition=z}},Se.unstable_act=U,Se.useCallback=function(R,z){return Y.current.useCallback(R,z)},Se.useContext=function(R){return Y.current.useContext(R)},Se.useDebugValue=function(){},Se.useDeferredValue=function(R){return Y.current.useDeferredValue(R)},Se.useEffect=function(R,z){return Y.current.useEffect(R,z)},Se.useId=function(){return Y.current.useId()},Se.useImperativeHandle=function(R,z,te){return Y.current.useImperativeHandle(R,z,te)},Se.useInsertionEffect=function(R,z){return Y.current.useInsertionEffect(R,z)},Se.useLayoutEffect=function(R,z){return Y.current.useLayoutEffect(R,z)},Se.useMemo=function(R,z){return Y.current.useMemo(R,z)},Se.useReducer=function(R,z,te){return Y.current.useReducer(R,z,te)},Se.useRef=function(R){return Y.current.useRef(R)},Se.useState=function(R){return Y.current.useState(R)},Se.useSyncExternalStore=function(R,z,te){return Y.current.useSyncExternalStore(R,z,te)},Se.useTransition=function(){return Y.current.useTransition()},Se.version="18.3.1",Se}var bg;function Sh(){return bg||(bg=1,Fc.exports=xy()),Fc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function wy(){if(Yg)return go;Yg=1;var r=Sh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,g){var p,_={},y=null,x=null;g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)i.call(d,p)&&!l.hasOwnProperty(p)&&(_[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)_[p]===void 0&&(_[p]=d[p]);return{$$typeof:e,type:c,key:y,ref:x,props:_,_owner:o.current}}return go.Fragment=t,go.jsx=u,go.jsxs=u,go}var Vg;function Sy(){return Vg||(Vg=1,Oc.exports=wy()),Oc.exports}var Oe=Sy(),Ht=Sh(),sa={},Nc={exports:{}},zt={},zc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Cy(){return Kg||(Kg=1,function(r){function e(W,Q){var U=W.length;W.push(Q);e:for(;0<U;){var R=U-1>>>1,z=W[R];if(0<o(z,Q))W[R]=Q,W[U]=z,U=R;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Q=W[0],U=W.pop();if(U!==Q){W[0]=U;e:for(var R=0,z=W.length,te=z>>>1;R<te;){var G=2*(R+1)-1,ue=W[G],he=G+1,me=W[he];if(0>o(ue,U))he<z&&0>o(me,ue)?(W[R]=me,W[he]=U,R=he):(W[R]=ue,W[G]=U,R=G);else if(he<z&&0>o(me,U))W[R]=me,W[he]=U,R=he;else break e}}return Q}function o(W,Q){var U=W.sortIndex-Q.sortIndex;return U!==0?U:W.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],g=[],p=1,_=null,y=3,x=!1,E=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(W){for(var Q=t(g);Q!==null;){if(Q.callback===null)i(g);else if(Q.startTime<=W)i(g),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=t(g)}}function M(W){if(w=!1,D(W),!E)if(t(d)!==null)E=!0,ie(k);else{var Q=t(g);Q!==null&&Y(M,Q.startTime-W)}}function k(W,Q){E=!1,w&&(w=!1,I(N),N=-1),x=!0;var U=y;try{for(D(Q),_=t(d);_!==null&&(!(_.expirationTime>Q)||W&&!ne());){var R=_.callback;if(typeof R=="function"){_.callback=null,y=_.priorityLevel;var z=R(_.expirationTime<=Q);Q=r.unstable_now(),typeof z=="function"?_.callback=z:_===t(d)&&i(d),D(Q)}else i(d);_=t(d)}if(_!==null)var te=!0;else{var G=t(g);G!==null&&Y(M,G.startTime-Q),te=!1}return te}finally{_=null,y=U,x=!1}}var X=!1,V=null,N=-1,j=5,b=-1;function ne(){return!(r.unstable_now()-b<j)}function q(){if(V!==null){var W=r.unstable_now();b=W;var Q=!0;try{Q=V(!0,W)}finally{Q?ee():(X=!1,V=null)}}else X=!1}var ee;if(typeof T=="function")ee=function(){T(q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,H=oe.port2;oe.port1.onmessage=q,ee=function(){H.postMessage(null)}}else ee=function(){S(q,0)};function ie(W){V=W,X||(X=!0,ee())}function Y(W,Q){N=S(function(){W(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){E||x||(E=!0,ie(k))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(W){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var U=y;y=Q;try{return W()}finally{y=U}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,Q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var U=y;y=W;try{return Q()}finally{y=U}},r.unstable_scheduleCallback=function(W,Q,U){var R=r.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?R+U:R):U=R,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,W={id:p++,callback:Q,priorityLevel:W,startTime:U,expirationTime:z,sortIndex:-1},U>R?(W.sortIndex=U,e(g,W),t(d)===null&&W===t(g)&&(w?(I(N),N=-1):w=!0,Y(M,U-R))):(W.sortIndex=z,e(d,W),E||x||(E=!0,ie(k))),W},r.unstable_shouldYield=ne,r.unstable_wrapCallback=function(W){var Q=y;return function(){var U=y;y=Q;try{return W.apply(this,arguments)}finally{y=U}}}}(Gc)),Gc}var Zg;function Ry(){return Zg||(Zg=1,zc.exports=Cy()),zc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function Ty(){if(Hg)return zt;Hg=1;var r=Sh(),e=Ry();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},_={};function y(n){return d.call(_,n)?!0:d.call(p,n)?!1:g.test(n)?_[n]=!0:(p[n]=!0,!1)}function x(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function E(n,s,a,h){if(s===null||typeof s>"u"||x(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function w(n,s,a,h,f,m,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=v}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){S[n]=new w(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];S[s]=new w(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){S[n]=new w(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){S[n]=new w(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){S[n]=new w(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){S[n]=new w(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){S[n]=new w(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){S[n]=new w(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){S[n]=new w(n,5,!1,n.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(I,T);S[s]=new w(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){S[n]=new w(n,1,!1,n.toLowerCase(),null,!0,!0)});function D(n,s,a,h){var f=S.hasOwnProperty(s)?S[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(E(s,a,f,h)&&(a=null),h||f===null?y(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),X=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),ne=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),W=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var U=Object.assign,R;function z(n){if(R===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);R=s&&s[1]||""}return`
`+R+n}var te=!1;function G(n,s){if(!n||te)return"";te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(F){var h=F}Reflect.construct(n,[],s)}else{try{s.call()}catch(F){h=F}n.call(s.prototype)}else{try{throw Error()}catch(F){h=F}n()}}catch(F){if(F&&h&&typeof F.stack=="string"){for(var f=F.stack.split(`
`),m=h.stack.split(`
`),v=f.length-1,C=m.length-1;1<=v&&0<=C&&f[v]!==m[C];)C--;for(;1<=v&&0<=C;v--,C--)if(f[v]!==m[C]){if(v!==1||C!==1)do if(v--,C--,0>C||f[v]!==m[C]){var L=`
`+f[v].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=v&&0<=C);break}}}finally{te=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?z(n):""}function ue(n){switch(n.tag){case 5:return z(n.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return n=G(n.type,!1),n;case 11:return n=G(n.type.render,!1),n;case 1:return n=G(n.type,!0),n;default:return""}}function he(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case X:return"Portal";case j:return"Profiler";case N:return"StrictMode";case ee:return"Suspense";case oe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ne:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case q:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case H:return s=n.displayName||null,s!==null?s:he(n.type)||"Memo";case ie:s=n._payload,n=n._init;try{return he(n(s))}catch{}}return null}function me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(s);case 8:return s===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ee(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ce(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ze(n){var s=Ce(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,m.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ct(n){n._valueTracker||(n._valueTracker=ze(n))}function kn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Ce(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function gn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Yn(n,s){var a=s.checked;return U({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Pn(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Ee(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function qt(n,s){s=s.checked,s!=null&&D(n,"checked",s,!1)}function gt(n,s){qt(n,s);var a=Ee(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Dn(n,s.type,a):s.hasOwnProperty("defaultValue")&&Dn(n,s.type,Ee(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function bt(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Dn(n,s,a){(s!=="number"||gn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Qt=Array.isArray;function Jt(n,s,a,h){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Ee(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function pn(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return U({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vn(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Qt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ee(a)}}function Kn(n,s){var a=Ee(s.value),h=Ee(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function He(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Tr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ji(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Tr(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zn,er=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function tr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qo=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(n){Qo.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),mi[s]=mi[n]})});function Ir(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||mi.hasOwnProperty(n)&&mi[n]?(""+s).trim():s+"px"}function Jo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Ir(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,f):n[a]=f}}var Ja=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lr(n,s){if(s){if(Ja[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Mr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function Ar(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var As=null,On=null,en=null;function _i(n){if(n=Qs(n)){if(typeof As!="function")throw Error(t(280));var s=n.stateNode;s&&(s=El(s),As(n.stateNode,n.type,s))}}function yi(n){On?en?en.push(n):en=[n]:On=n}function ks(){if(On){var n=On,s=en;if(en=On=null,_i(n),s)for(n=0;n<s.length;n++)_i(s[n])}}function Ps(n,s){return n(s)}function Rt(){}var mn=!1;function Tt(n,s,a){if(mn)return n(s,a);mn=!0;try{return Ps(n,s,a)}finally{mn=!1,(On!==null||en!==null)&&(Rt(),ks())}}function pt(n,s){var a=n.stateNode;if(a===null)return null;var h=El(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var mt=!1;if(c)try{var It={};Object.defineProperty(It,"passive",{get:function(){mt=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{mt=!1}function _n(n,s,a,h,f,m,v,C,L){var F=Array.prototype.slice.call(arguments,3);try{s.apply(a,F)}catch(Z){this.onError(Z)}}var Ge=!1,Qe=null,kt=!1,Ds=null,T_={onError:function(n){Ge=!0,Qe=n}};function I_(n,s,a,h,f,m,v,C,L){Ge=!1,Qe=null,_n.apply(T_,arguments)}function L_(n,s,a,h,f,m,v,C,L){if(I_.apply(this,arguments),Ge){if(Ge){var F=Qe;Ge=!1,Qe=null}else throw Error(t(198));kt||(kt=!0,Ds=F)}}function ir(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function cd(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function hd(n){if(ir(n)!==n)throw Error(t(188))}function M_(n){var s=n.alternate;if(!s){if(s=ir(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return hd(f),n;if(m===h)return hd(f),s;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=m;else{for(var v=!1,C=f.child;C;){if(C===a){v=!0,a=f,h=m;break}if(C===h){v=!0,h=f,a=m;break}C=C.sibling}if(!v){for(C=m.child;C;){if(C===a){v=!0,a=m,h=f;break}if(C===h){v=!0,h=m,a=f;break}C=C.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function dd(n){return n=M_(n),n!==null?fd(n):null}function fd(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=fd(n);if(s!==null)return s;n=n.sibling}return null}var gd=e.unstable_scheduleCallback,pd=e.unstable_cancelCallback,A_=e.unstable_shouldYield,k_=e.unstable_requestPaint,$e=e.unstable_now,P_=e.unstable_getCurrentPriorityLevel,eu=e.unstable_ImmediatePriority,md=e.unstable_UserBlockingPriority,el=e.unstable_NormalPriority,D_=e.unstable_LowPriority,_d=e.unstable_IdlePriority,tl=null,Fn=null;function O_(n){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(tl,n,void 0,(n.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:z_,F_=Math.log,N_=Math.LN2;function z_(n){return n>>>=0,n===0?32:31-(F_(n)/N_|0)|0}var nl=64,il=4194304;function Os(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function rl(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,f=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var C=v&~f;C!==0?h=Os(C):(m&=v,m!==0&&(h=Os(m)))}else v=a&~f,v!==0?h=Os(v):m!==0&&(h=Os(m));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,m=s&-s,f>=m||f===16&&(m&4194240)!==0))return s;if(h&4&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-yn(s),f=1<<a,h|=n[a],s&=~f;return h}function G_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U_(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-yn(m),C=1<<v,L=f[v];L===-1?(!(C&a)||C&h)&&(f[v]=G_(C,s)):L<=s&&(n.expiredLanes|=C),m&=~C}}function tu(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function yd(){var n=nl;return nl<<=1,!(nl&4194240)&&(nl=64),n}function nu(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Fs(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-yn(s),n[s]=a}function W_(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-yn(a),m=1<<f;s[f]=0,h[f]=-1,n[f]=-1,a&=~m}}function iu(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-yn(a),f=1<<h;f&s|n[h]&s&&(n[h]|=s),a&=~f}}var Fe=0;function vd(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Ed,ru,xd,wd,Sd,su=!1,sl=[],vi=null,Ei=null,xi=null,Ns=new Map,zs=new Map,wi=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cd(n,s){switch(n){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":Ns.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(s.pointerId)}}function Gs(n,s,a,h,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Qs(s),s!==null&&ru(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function j_(n,s,a,h,f){switch(s){case"focusin":return vi=Gs(vi,n,s,a,h,f),!0;case"dragenter":return Ei=Gs(Ei,n,s,a,h,f),!0;case"mouseover":return xi=Gs(xi,n,s,a,h,f),!0;case"pointerover":var m=f.pointerId;return Ns.set(m,Gs(Ns.get(m)||null,n,s,a,h,f)),!0;case"gotpointercapture":return m=f.pointerId,zs.set(m,Gs(zs.get(m)||null,n,s,a,h,f)),!0}return!1}function Rd(n){var s=rr(n.target);if(s!==null){var a=ir(s);if(a!==null){if(s=a.tag,s===13){if(s=cd(a),s!==null){n.blockedOn=s,Sd(n.priority,function(){xd(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ol(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=lu(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);nr=h,a.target.dispatchEvent(h),nr=null}else return s=Qs(a),s!==null&&ru(s),n.blockedOn=a,!1;s.shift()}return!0}function Td(n,s,a){ol(n)&&a.delete(s)}function B_(){su=!1,vi!==null&&ol(vi)&&(vi=null),Ei!==null&&ol(Ei)&&(Ei=null),xi!==null&&ol(xi)&&(xi=null),Ns.forEach(Td),zs.forEach(Td)}function Us(n,s){n.blockedOn===s&&(n.blockedOn=null,su||(su=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,B_)))}function Ws(n){function s(f){return Us(f,n)}if(0<sl.length){Us(sl[0],n);for(var a=1;a<sl.length;a++){var h=sl[a];h.blockedOn===n&&(h.blockedOn=null)}}for(vi!==null&&Us(vi,n),Ei!==null&&Us(Ei,n),xi!==null&&Us(xi,n),Ns.forEach(s),zs.forEach(s),a=0;a<wi.length;a++)h=wi[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<wi.length&&(a=wi[0],a.blockedOn===null);)Rd(a),a.blockedOn===null&&wi.shift()}var kr=M.ReactCurrentBatchConfig,ll=!0;function b_(n,s,a,h){var f=Fe,m=kr.transition;kr.transition=null;try{Fe=1,ou(n,s,a,h)}finally{Fe=f,kr.transition=m}}function Y_(n,s,a,h){var f=Fe,m=kr.transition;kr.transition=null;try{Fe=4,ou(n,s,a,h)}finally{Fe=f,kr.transition=m}}function ou(n,s,a,h){if(ll){var f=lu(n,s,a,h);if(f===null)Cu(n,s,h,al,a),Cd(n,h);else if(j_(f,n,s,a,h))h.stopPropagation();else if(Cd(n,h),s&4&&-1<X_.indexOf(n)){for(;f!==null;){var m=Qs(f);if(m!==null&&Ed(m),m=lu(n,s,a,h),m===null&&Cu(n,s,h,al,a),m===f)break;f=m}f!==null&&h.stopPropagation()}else Cu(n,s,h,null,a)}}var al=null;function lu(n,s,a,h){if(al=null,n=Ar(h),n=rr(n),n!==null)if(s=ir(n),s===null)n=null;else if(a=s.tag,a===13){if(n=cd(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return al=n,null}function Id(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P_()){case eu:return 1;case md:return 4;case el:case D_:return 16;case _d:return 536870912;default:return 16}default:return 16}}var Si=null,au=null,ul=null;function Ld(){if(ul)return ul;var n,s=au,a=s.length,h,f="value"in Si?Si.value:Si.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var v=a-n;for(h=1;h<=v&&s[a-h]===f[m-h];h++);return ul=f.slice(n,1<h?1-h:void 0)}function cl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function hl(){return!0}function Md(){return!1}function Yt(n){function s(a,h,f,m,v){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?hl:Md,this.isPropagationStopped=Md,this}return U(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),s}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uu=Yt(Pr),Xs=U({},Pr,{view:0,detail:0}),V_=Yt(Xs),cu,hu,js,dl=U({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==js&&(js&&n.type==="mousemove"?(cu=n.screenX-js.screenX,hu=n.screenY-js.screenY):hu=cu=0,js=n),cu)},movementY:function(n){return"movementY"in n?n.movementY:hu}}),Ad=Yt(dl),K_=U({},dl,{dataTransfer:0}),Z_=Yt(K_),H_=U({},Xs,{relatedTarget:0}),du=Yt(H_),$_=U({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),q_=Yt($_),Q_=U({},Pr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),J_=Yt(Q_),e0=U({},Pr,{data:0}),kd=Yt(e0),t0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=i0[n])?!!s[n]:!1}function fu(){return r0}var s0=U({},Xs,{key:function(n){if(n.key){var s=t0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=cl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?n0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(n){return n.type==="keypress"?cl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?cl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),o0=Yt(s0),l0=U({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pd=Yt(l0),a0=U({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),u0=Yt(a0),c0=U({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),h0=Yt(c0),d0=U({},dl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),f0=Yt(d0),g0=[9,13,27,32],gu=c&&"CompositionEvent"in window,Bs=null;c&&"documentMode"in document&&(Bs=document.documentMode);var p0=c&&"TextEvent"in window&&!Bs,Dd=c&&(!gu||Bs&&8<Bs&&11>=Bs),Od=" ",Fd=!1;function Nd(n,s){switch(n){case"keyup":return g0.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dr=!1;function m0(n,s){switch(n){case"compositionend":return zd(s);case"keypress":return s.which!==32?null:(Fd=!0,Od);case"textInput":return n=s.data,n===Od&&Fd?null:n;default:return null}}function _0(n,s){if(Dr)return n==="compositionend"||!gu&&Nd(n,s)?(n=Ld(),ul=au=Si=null,Dr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Dd&&s.locale!=="ko"?null:s.data;default:return null}}var y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!y0[n.type]:s==="textarea"}function Ud(n,s,a,h){yi(h),s=_l(s,"onChange"),0<s.length&&(a=new uu("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var bs=null,Ys=null;function v0(n){rf(n,0)}function fl(n){var s=Gr(n);if(kn(s))return n}function E0(n,s){if(n==="change")return s}var Wd=!1;if(c){var pu;if(c){var mu="oninput"in document;if(!mu){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),mu=typeof Xd.oninput=="function"}pu=mu}else pu=!1;Wd=pu&&(!document.documentMode||9<document.documentMode)}function jd(){bs&&(bs.detachEvent("onpropertychange",Bd),Ys=bs=null)}function Bd(n){if(n.propertyName==="value"&&fl(Ys)){var s=[];Ud(s,Ys,n,Ar(n)),Tt(v0,s)}}function x0(n,s,a){n==="focusin"?(jd(),bs=s,Ys=a,bs.attachEvent("onpropertychange",Bd)):n==="focusout"&&jd()}function w0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return fl(Ys)}function S0(n,s){if(n==="click")return fl(s)}function C0(n,s){if(n==="input"||n==="change")return fl(s)}function R0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var vn=typeof Object.is=="function"?Object.is:R0;function Vs(n,s){if(vn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!d.call(s,f)||!vn(n[f],s[f]))return!1}return!0}function bd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yd(n,s){var a=bd(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=bd(a)}}function Vd(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Vd(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Kd(){for(var n=window,s=gn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=gn(n.document)}return s}function _u(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function T0(n){var s=Kd(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Vd(a.ownerDocument.documentElement,a)){if(h!==null&&_u(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!n.extend&&m>h&&(f=h,h=m,m=f),f=Yd(a,m);var v=Yd(a,h);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),m>h?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var I0=c&&"documentMode"in document&&11>=document.documentMode,Or=null,yu=null,Ks=null,vu=!1;function Zd(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vu||Or==null||Or!==gn(h)||(h=Or,"selectionStart"in h&&_u(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ks&&Vs(Ks,h)||(Ks=h,h=_l(yu,"onSelect"),0<h.length&&(s=new uu("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Or)))}function gl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Fr={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},Eu={},Hd={};c&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function pl(n){if(Eu[n])return Eu[n];if(!Fr[n])return n;var s=Fr[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Hd)return Eu[n]=s[a];return n}var $d=pl("animationend"),qd=pl("animationiteration"),Qd=pl("animationstart"),Jd=pl("transitionend"),ef=new Map,tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(n,s){ef.set(n,s),l(s,[n])}for(var xu=0;xu<tf.length;xu++){var wu=tf[xu],L0=wu.toLowerCase(),M0=wu[0].toUpperCase()+wu.slice(1);Ci(L0,"on"+M0)}Ci($d,"onAnimationEnd"),Ci(qd,"onAnimationIteration"),Ci(Qd,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Jd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function nf(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,L_(h,s,void 0,n),n.currentTarget=null}function rf(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],f=h.event;h=h.listeners;e:{var m=void 0;if(s)for(var v=h.length-1;0<=v;v--){var C=h[v],L=C.instance,F=C.currentTarget;if(C=C.listener,L!==m&&f.isPropagationStopped())break e;nf(f,C,F),m=L}else for(v=0;v<h.length;v++){if(C=h[v],L=C.instance,F=C.currentTarget,C=C.listener,L!==m&&f.isPropagationStopped())break e;nf(f,C,F),m=L}}}if(kt)throw n=Ds,kt=!1,Ds=null,n}function Xe(n,s){var a=s[Au];a===void 0&&(a=s[Au]=new Set);var h=n+"__bubble";a.has(h)||(sf(s,n,2,!1),a.add(h))}function Su(n,s,a){var h=0;s&&(h|=4),sf(a,n,h,s)}var ml="_reactListening"+Math.random().toString(36).slice(2);function Hs(n){if(!n[ml]){n[ml]=!0,i.forEach(function(a){a!=="selectionchange"&&(A0.has(a)||Su(a,!1,n),Su(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ml]||(s[ml]=!0,Su("selectionchange",!1,s))}}function sf(n,s,a,h){switch(Id(s)){case 1:var f=b_;break;case 4:f=Y_;break;default:f=ou}a=f.bind(null,s,a,n),f=void 0,!mt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Cu(n,s,a,h,f){var m=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var L=v.tag;if((L===3||L===4)&&(L=v.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;v=v.return}for(;C!==null;){if(v=rr(C),v===null)return;if(L=v.tag,L===5||L===6){h=m=v;continue e}C=C.parentNode}}h=h.return}Tt(function(){var F=m,Z=Ar(a),$=[];e:{var K=ef.get(n);if(K!==void 0){var re=uu,ae=n;switch(n){case"keypress":if(cl(a)===0)break e;case"keydown":case"keyup":re=o0;break;case"focusin":ae="focus",re=du;break;case"focusout":ae="blur",re=du;break;case"beforeblur":case"afterblur":re=du;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=u0;break;case $d:case qd:case Qd:re=q_;break;case Jd:re=h0;break;case"scroll":re=V_;break;case"wheel":re=f0;break;case"copy":case"cut":case"paste":re=J_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Pd}var ce=(s&4)!==0,qe=!ce&&n==="scroll",P=ce?K!==null?K+"Capture":null:K;ce=[];for(var A=F,O;A!==null;){O=A;var J=O.stateNode;if(O.tag===5&&J!==null&&(O=J,P!==null&&(J=pt(A,P),J!=null&&ce.push($s(A,J,O)))),qe)break;A=A.return}0<ce.length&&(K=new re(K,ae,null,a,Z),$.push({event:K,listeners:ce}))}}if(!(s&7)){e:{if(K=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",K&&a!==nr&&(ae=a.relatedTarget||a.fromElement)&&(rr(ae)||ae[Hn]))break e;if((re||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,re?(ae=a.relatedTarget||a.toElement,re=F,ae=ae?rr(ae):null,ae!==null&&(qe=ir(ae),ae!==qe||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(re=null,ae=F),re!==ae)){if(ce=Ad,J="onMouseLeave",P="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(ce=Pd,J="onPointerLeave",P="onPointerEnter",A="pointer"),qe=re==null?K:Gr(re),O=ae==null?K:Gr(ae),K=new ce(J,A+"leave",re,a,Z),K.target=qe,K.relatedTarget=O,J=null,rr(Z)===F&&(ce=new ce(P,A+"enter",ae,a,Z),ce.target=O,ce.relatedTarget=qe,J=ce),qe=J,re&&ae)t:{for(ce=re,P=ae,A=0,O=ce;O;O=Nr(O))A++;for(O=0,J=P;J;J=Nr(J))O++;for(;0<A-O;)ce=Nr(ce),A--;for(;0<O-A;)P=Nr(P),O--;for(;A--;){if(ce===P||P!==null&&ce===P.alternate)break t;ce=Nr(ce),P=Nr(P)}ce=null}else ce=null;re!==null&&of($,K,re,ce,!1),ae!==null&&qe!==null&&of($,qe,ae,ce,!0)}}e:{if(K=F?Gr(F):window,re=K.nodeName&&K.nodeName.toLowerCase(),re==="select"||re==="input"&&K.type==="file")var de=E0;else if(Gd(K))if(Wd)de=C0;else{de=w0;var ge=x0}else(re=K.nodeName)&&re.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(de=S0);if(de&&(de=de(n,F))){Ud($,de,a,Z);break e}ge&&ge(n,K,F),n==="focusout"&&(ge=K._wrapperState)&&ge.controlled&&K.type==="number"&&Dn(K,"number",K.value)}switch(ge=F?Gr(F):window,n){case"focusin":(Gd(ge)||ge.contentEditable==="true")&&(Or=ge,yu=F,Ks=null);break;case"focusout":Ks=yu=Or=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Zd($,a,Z);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":Zd($,a,Z)}var pe;if(gu)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Dr?Nd(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Dd&&a.locale!=="ko"&&(Dr||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Dr&&(pe=Ld()):(Si=Z,au="value"in Si?Si.value:Si.textContent,Dr=!0)),ge=_l(F,_e),0<ge.length&&(_e=new kd(_e,n,null,a,Z),$.push({event:_e,listeners:ge}),pe?_e.data=pe:(pe=zd(a),pe!==null&&(_e.data=pe)))),(pe=p0?m0(n,a):_0(n,a))&&(F=_l(F,"onBeforeInput"),0<F.length&&(Z=new kd("onBeforeInput","beforeinput",null,a,Z),$.push({event:Z,listeners:F}),Z.data=pe))}rf($,s)})}function $s(n,s,a){return{instance:n,listener:s,currentTarget:a}}function _l(n,s){for(var a=s+"Capture",h=[];n!==null;){var f=n,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=pt(n,a),m!=null&&h.unshift($s(n,m,f)),m=pt(n,s),m!=null&&h.push($s(n,m,f))),n=n.return}return h}function Nr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function of(n,s,a,h,f){for(var m=s._reactName,v=[];a!==null&&a!==h;){var C=a,L=C.alternate,F=C.stateNode;if(L!==null&&L===h)break;C.tag===5&&F!==null&&(C=F,f?(L=pt(a,m),L!=null&&v.unshift($s(a,L,C))):f||(L=pt(a,m),L!=null&&v.push($s(a,L,C)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var k0=/\r\n?/g,P0=/\u0000|\uFFFD/g;function lf(n){return(typeof n=="string"?n:""+n).replace(k0,`
`).replace(P0,"")}function yl(n,s,a){if(s=lf(s),lf(n)!==s&&a)throw Error(t(425))}function vl(){}var Ru=null,Tu=null;function Iu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lu=typeof setTimeout=="function"?setTimeout:void 0,D0=typeof clearTimeout=="function"?clearTimeout:void 0,af=typeof Promise=="function"?Promise:void 0,O0=typeof queueMicrotask=="function"?queueMicrotask:typeof af<"u"?function(n){return af.resolve(null).then(n).catch(F0)}:Lu;function F0(n){setTimeout(function(){throw n})}function Mu(n,s){var a=s,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){n.removeChild(f),Ws(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Ws(s)}function Ri(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function uf(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var zr=Math.random().toString(36).slice(2),Nn="__reactFiber$"+zr,qs="__reactProps$"+zr,Hn="__reactContainer$"+zr,Au="__reactEvents$"+zr,N0="__reactListeners$"+zr,z0="__reactHandles$"+zr;function rr(n){var s=n[Nn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Hn]||a[Nn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=uf(n);n!==null;){if(a=n[Nn])return a;n=uf(n)}return s}n=a,a=n.parentNode}return null}function Qs(n){return n=n[Nn]||n[Hn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Gr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function El(n){return n[qs]||null}var ku=[],Ur=-1;function Ti(n){return{current:n}}function je(n){0>Ur||(n.current=ku[Ur],ku[Ur]=null,Ur--)}function Ue(n,s){Ur++,ku[Ur]=n.current,n.current=s}var Ii={},_t=Ti(Ii),Pt=Ti(!1),sr=Ii;function Wr(n,s){var a=n.type.contextTypes;if(!a)return Ii;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=s[m];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Dt(n){return n=n.childContextTypes,n!=null}function xl(){je(Pt),je(_t)}function cf(n,s,a){if(_t.current!==Ii)throw Error(t(168));Ue(_t,s),Ue(Pt,a)}function hf(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,me(n)||"Unknown",f));return U({},a,h)}function wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ii,sr=_t.current,Ue(_t,n),Ue(Pt,Pt.current),!0}function df(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=hf(n,s,sr),h.__reactInternalMemoizedMergedChildContext=n,je(Pt),je(_t),Ue(_t,n)):je(Pt),Ue(Pt,a)}var $n=null,Sl=!1,Pu=!1;function ff(n){$n===null?$n=[n]:$n.push(n)}function G0(n){Sl=!0,ff(n)}function Li(){if(!Pu&&$n!==null){Pu=!0;var n=0,s=Fe;try{var a=$n;for(Fe=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}$n=null,Sl=!1}catch(f){throw $n!==null&&($n=$n.slice(n+1)),gd(eu,Li),f}finally{Fe=s,Pu=!1}}return null}var Xr=[],jr=0,Cl=null,Rl=0,tn=[],nn=0,or=null,qn=1,Qn="";function lr(n,s){Xr[jr++]=Rl,Xr[jr++]=Cl,Cl=n,Rl=s}function gf(n,s,a){tn[nn++]=qn,tn[nn++]=Qn,tn[nn++]=or,or=n;var h=qn;n=Qn;var f=32-yn(h)-1;h&=~(1<<f),a+=1;var m=32-yn(s)+f;if(30<m){var v=f-f%5;m=(h&(1<<v)-1).toString(32),h>>=v,f-=v,qn=1<<32-yn(s)+f|a<<f|h,Qn=m+n}else qn=1<<m|a<<f|h,Qn=n}function Du(n){n.return!==null&&(lr(n,1),gf(n,1,0))}function Ou(n){for(;n===Cl;)Cl=Xr[--jr],Xr[jr]=null,Rl=Xr[--jr],Xr[jr]=null;for(;n===or;)or=tn[--nn],tn[nn]=null,Qn=tn[--nn],tn[nn]=null,qn=tn[--nn],tn[nn]=null}var Vt=null,Kt=null,Be=!1,En=null;function pf(n,s){var a=ln(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function mf(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Vt=n,Kt=Ri(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Vt=n,Kt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=or!==null?{id:qn,overflow:Qn}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=ln(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Vt=n,Kt=null,!0):!1;default:return!1}}function Fu(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Nu(n){if(Be){var s=Kt;if(s){var a=s;if(!mf(n,s)){if(Fu(n))throw Error(t(418));s=Ri(a.nextSibling);var h=Vt;s&&mf(n,s)?pf(h,a):(n.flags=n.flags&-4097|2,Be=!1,Vt=n)}}else{if(Fu(n))throw Error(t(418));n.flags=n.flags&-4097|2,Be=!1,Vt=n}}}function _f(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Vt=n}function Tl(n){if(n!==Vt)return!1;if(!Be)return _f(n),Be=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Iu(n.type,n.memoizedProps)),s&&(s=Kt)){if(Fu(n))throw yf(),Error(t(418));for(;s;)pf(n,s),s=Ri(s.nextSibling)}if(_f(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Kt=Ri(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Kt=null}}else Kt=Vt?Ri(n.stateNode.nextSibling):null;return!0}function yf(){for(var n=Kt;n;)n=Ri(n.nextSibling)}function Br(){Kt=Vt=null,Be=!1}function zu(n){En===null?En=[n]:En.push(n)}var U0=M.ReactCurrentBatchConfig;function Js(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var f=h,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(v){var C=f.refs;v===null?delete C[m]:C[m]=v},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Il(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function vf(n){var s=n._init;return s(n._payload)}function Ef(n){function s(P,A){if(n){var O=P.deletions;O===null?(P.deletions=[A],P.flags|=16):O.push(A)}}function a(P,A){if(!n)return null;for(;A!==null;)s(P,A),A=A.sibling;return null}function h(P,A){for(P=new Map;A!==null;)A.key!==null?P.set(A.key,A):P.set(A.index,A),A=A.sibling;return P}function f(P,A){return P=Ni(P,A),P.index=0,P.sibling=null,P}function m(P,A,O){return P.index=O,n?(O=P.alternate,O!==null?(O=O.index,O<A?(P.flags|=2,A):O):(P.flags|=2,A)):(P.flags|=1048576,A)}function v(P){return n&&P.alternate===null&&(P.flags|=2),P}function C(P,A,O,J){return A===null||A.tag!==6?(A=Lc(O,P.mode,J),A.return=P,A):(A=f(A,O),A.return=P,A)}function L(P,A,O,J){var de=O.type;return de===V?Z(P,A,O.props.children,J,O.key):A!==null&&(A.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ie&&vf(de)===A.type)?(J=f(A,O.props),J.ref=Js(P,A,O),J.return=P,J):(J=ql(O.type,O.key,O.props,null,P.mode,J),J.ref=Js(P,A,O),J.return=P,J)}function F(P,A,O,J){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=Mc(O,P.mode,J),A.return=P,A):(A=f(A,O.children||[]),A.return=P,A)}function Z(P,A,O,J,de){return A===null||A.tag!==7?(A=pr(O,P.mode,J,de),A.return=P,A):(A=f(A,O),A.return=P,A)}function $(P,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Lc(""+A,P.mode,O),A.return=P,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case k:return O=ql(A.type,A.key,A.props,null,P.mode,O),O.ref=Js(P,null,A),O.return=P,O;case X:return A=Mc(A,P.mode,O),A.return=P,A;case ie:var J=A._init;return $(P,J(A._payload),O)}if(Qt(A)||Q(A))return A=pr(A,P.mode,O,null),A.return=P,A;Il(P,A)}return null}function K(P,A,O,J){var de=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return de!==null?null:C(P,A,""+O,J);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return O.key===de?L(P,A,O,J):null;case X:return O.key===de?F(P,A,O,J):null;case ie:return de=O._init,K(P,A,de(O._payload),J)}if(Qt(O)||Q(O))return de!==null?null:Z(P,A,O,J,null);Il(P,O)}return null}function re(P,A,O,J,de){if(typeof J=="string"&&J!==""||typeof J=="number")return P=P.get(O)||null,C(A,P,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return P=P.get(J.key===null?O:J.key)||null,L(A,P,J,de);case X:return P=P.get(J.key===null?O:J.key)||null,F(A,P,J,de);case ie:var ge=J._init;return re(P,A,O,ge(J._payload),de)}if(Qt(J)||Q(J))return P=P.get(O)||null,Z(A,P,J,de,null);Il(A,J)}return null}function ae(P,A,O,J){for(var de=null,ge=null,pe=A,_e=A=0,lt=null;pe!==null&&_e<O.length;_e++){pe.index>_e?(lt=pe,pe=null):lt=pe.sibling;var Me=K(P,pe,O[_e],J);if(Me===null){pe===null&&(pe=lt);break}n&&pe&&Me.alternate===null&&s(P,pe),A=m(Me,A,_e),ge===null?de=Me:ge.sibling=Me,ge=Me,pe=lt}if(_e===O.length)return a(P,pe),Be&&lr(P,_e),de;if(pe===null){for(;_e<O.length;_e++)pe=$(P,O[_e],J),pe!==null&&(A=m(pe,A,_e),ge===null?de=pe:ge.sibling=pe,ge=pe);return Be&&lr(P,_e),de}for(pe=h(P,pe);_e<O.length;_e++)lt=re(pe,P,_e,O[_e],J),lt!==null&&(n&&lt.alternate!==null&&pe.delete(lt.key===null?_e:lt.key),A=m(lt,A,_e),ge===null?de=lt:ge.sibling=lt,ge=lt);return n&&pe.forEach(function(zi){return s(P,zi)}),Be&&lr(P,_e),de}function ce(P,A,O,J){var de=Q(O);if(typeof de!="function")throw Error(t(150));if(O=de.call(O),O==null)throw Error(t(151));for(var ge=de=null,pe=A,_e=A=0,lt=null,Me=O.next();pe!==null&&!Me.done;_e++,Me=O.next()){pe.index>_e?(lt=pe,pe=null):lt=pe.sibling;var zi=K(P,pe,Me.value,J);if(zi===null){pe===null&&(pe=lt);break}n&&pe&&zi.alternate===null&&s(P,pe),A=m(zi,A,_e),ge===null?de=zi:ge.sibling=zi,ge=zi,pe=lt}if(Me.done)return a(P,pe),Be&&lr(P,_e),de;if(pe===null){for(;!Me.done;_e++,Me=O.next())Me=$(P,Me.value,J),Me!==null&&(A=m(Me,A,_e),ge===null?de=Me:ge.sibling=Me,ge=Me);return Be&&lr(P,_e),de}for(pe=h(P,pe);!Me.done;_e++,Me=O.next())Me=re(pe,P,_e,Me.value,J),Me!==null&&(n&&Me.alternate!==null&&pe.delete(Me.key===null?_e:Me.key),A=m(Me,A,_e),ge===null?de=Me:ge.sibling=Me,ge=Me);return n&&pe.forEach(function(yy){return s(P,yy)}),Be&&lr(P,_e),de}function qe(P,A,O,J){if(typeof O=="object"&&O!==null&&O.type===V&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case k:e:{for(var de=O.key,ge=A;ge!==null;){if(ge.key===de){if(de=O.type,de===V){if(ge.tag===7){a(P,ge.sibling),A=f(ge,O.props.children),A.return=P,P=A;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ie&&vf(de)===ge.type){a(P,ge.sibling),A=f(ge,O.props),A.ref=Js(P,ge,O),A.return=P,P=A;break e}a(P,ge);break}else s(P,ge);ge=ge.sibling}O.type===V?(A=pr(O.props.children,P.mode,J,O.key),A.return=P,P=A):(J=ql(O.type,O.key,O.props,null,P.mode,J),J.ref=Js(P,A,O),J.return=P,P=J)}return v(P);case X:e:{for(ge=O.key;A!==null;){if(A.key===ge)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){a(P,A.sibling),A=f(A,O.children||[]),A.return=P,P=A;break e}else{a(P,A);break}else s(P,A);A=A.sibling}A=Mc(O,P.mode,J),A.return=P,P=A}return v(P);case ie:return ge=O._init,qe(P,A,ge(O._payload),J)}if(Qt(O))return ae(P,A,O,J);if(Q(O))return ce(P,A,O,J);Il(P,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,A!==null&&A.tag===6?(a(P,A.sibling),A=f(A,O),A.return=P,P=A):(a(P,A),A=Lc(O,P.mode,J),A.return=P,P=A),v(P)):a(P,A)}return qe}var br=Ef(!0),xf=Ef(!1),Ll=Ti(null),Ml=null,Yr=null,Gu=null;function Uu(){Gu=Yr=Ml=null}function Wu(n){var s=Ll.current;je(Ll),n._currentValue=s}function Xu(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function Vr(n,s){Ml=n,Gu=Yr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Ot=!0),n.firstContext=null)}function rn(n){var s=n._currentValue;if(Gu!==n)if(n={context:n,memoizedValue:s,next:null},Yr===null){if(Ml===null)throw Error(t(308));Yr=n,Ml.dependencies={lanes:0,firstContext:n}}else Yr=Yr.next=n;return s}var ar=null;function ju(n){ar===null?ar=[n]:ar.push(n)}function wf(n,s,a,h){var f=s.interleaved;return f===null?(a.next=a,ju(s)):(a.next=f.next,f.next=a),s.interleaved=a,Jn(n,h)}function Jn(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Mi=!1;function Bu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ei(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Ai(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,Ie&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Jn(n,a)}return f=h.interleaved,f===null?(s.next=s,ju(h)):(s.next=f.next,f.next=s),h.interleaved=s,Jn(n,a)}function Al(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,iu(n,a)}}function Cf(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function kl(n,s,a,h){var f=n.updateQueue;Mi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,F=L.next;L.next=null,v===null?m=F:v.next=F,v=L;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==v&&(C===null?Z.firstBaseUpdate=F:C.next=F,Z.lastBaseUpdate=L))}if(m!==null){var $=f.baseState;v=0,Z=F=L=null,C=m;do{var K=C.lane,re=C.eventTime;if((h&K)===K){Z!==null&&(Z=Z.next={eventTime:re,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ae=n,ce=C;switch(K=s,re=a,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){$=ae.call(re,$,K);break e}$=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,K=typeof ae=="function"?ae.call(re,$,K):ae,K==null)break e;$=U({},$,K);break e;case 2:Mi=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,K=f.effects,K===null?f.effects=[C]:K.push(C))}else re={eventTime:re,lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(F=Z=re,L=$):Z=Z.next=re,v|=K;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;K=C,C=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);if(Z===null&&(L=$),f.baseState=L,f.firstBaseUpdate=F,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else m===null&&(f.shared.lanes=0);hr|=v,n.lanes=v,n.memoizedState=$}}function Rf(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var eo={},zn=Ti(eo),to=Ti(eo),no=Ti(eo);function ur(n){if(n===eo)throw Error(t(174));return n}function bu(n,s){switch(Ue(no,s),Ue(to,n),Ue(zn,eo),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ji(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ji(s,n)}je(zn),Ue(zn,s)}function Kr(){je(zn),je(to),je(no)}function Tf(n){ur(no.current);var s=ur(zn.current),a=Ji(s,n.type);s!==a&&(Ue(to,n),Ue(zn,a))}function Yu(n){to.current===n&&(je(zn),je(to))}var be=Ti(0);function Pl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vu=[];function Ku(){for(var n=0;n<Vu.length;n++)Vu[n]._workInProgressVersionPrimary=null;Vu.length=0}var Dl=M.ReactCurrentDispatcher,Zu=M.ReactCurrentBatchConfig,cr=0,Ye=null,tt=null,st=null,Ol=!1,io=!1,ro=0,W0=0;function yt(){throw Error(t(321))}function Hu(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!vn(n[a],s[a]))return!1;return!0}function $u(n,s,a,h,f,m){if(cr=m,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Dl.current=n===null||n.memoizedState===null?b0:Y0,n=a(h,f),io){m=0;do{if(io=!1,ro=0,25<=m)throw Error(t(301));m+=1,st=tt=null,s.updateQueue=null,Dl.current=V0,n=a(h,f)}while(io)}if(Dl.current=zl,s=tt!==null&&tt.next!==null,cr=0,st=tt=Ye=null,Ol=!1,s)throw Error(t(300));return n}function qu(){var n=ro!==0;return ro=0,n}function Gn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ye.memoizedState=st=n:st=st.next=n,st}function sn(){if(tt===null){var n=Ye.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var s=st===null?Ye.memoizedState:st.next;if(s!==null)st=s,tt=n;else{if(n===null)throw Error(t(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?Ye.memoizedState=st=n:st=st.next=n}return st}function so(n,s){return typeof s=="function"?s(n):s}function Qu(n){var s=sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=tt,f=h.baseQueue,m=a.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}h.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,h=h.baseState;var C=v=null,L=null,F=m;do{var Z=F.lane;if((cr&Z)===Z)L!==null&&(L=L.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),h=F.hasEagerState?F.eagerState:n(h,F.action);else{var $={lane:Z,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};L===null?(C=L=$,v=h):L=L.next=$,Ye.lanes|=Z,hr|=Z}F=F.next}while(F!==null&&F!==m);L===null?v=h:L.next=C,vn(h,s.memoizedState)||(Ot=!0),s.memoizedState=h,s.baseState=v,s.baseQueue=L,a.lastRenderedState=h}if(n=a.interleaved,n!==null){f=n;do m=f.lane,Ye.lanes|=m,hr|=m,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ju(n){var s=sn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);vn(m,s.memoizedState)||(Ot=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,h]}function If(){}function Lf(n,s){var a=Ye,h=sn(),f=s(),m=!vn(h.memoizedState,f);if(m&&(h.memoizedState=f,Ot=!0),h=h.queue,ec(kf.bind(null,a,h,n),[n]),h.getSnapshot!==s||m||st!==null&&st.memoizedState.tag&1){if(a.flags|=2048,oo(9,Af.bind(null,a,h,f,s),void 0,null),ot===null)throw Error(t(349));cr&30||Mf(a,s,f)}return f}function Mf(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Af(n,s,a,h){s.value=a,s.getSnapshot=h,Pf(s)&&Df(n)}function kf(n,s,a){return a(function(){Pf(s)&&Df(n)})}function Pf(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!vn(n,a)}catch{return!0}}function Df(n){var s=Jn(n,1);s!==null&&Cn(s,n,1,-1)}function Of(n){var s=Gn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:n},s.queue=n,n=n.dispatch=B0.bind(null,Ye,n),[s.memoizedState,n]}function oo(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=Ye.updateQueue,s===null?(s={lastEffect:null,stores:null},Ye.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function Ff(){return sn().memoizedState}function Fl(n,s,a,h){var f=Gn();Ye.flags|=n,f.memoizedState=oo(1|s,a,void 0,h===void 0?null:h)}function Nl(n,s,a,h){var f=sn();h=h===void 0?null:h;var m=void 0;if(tt!==null){var v=tt.memoizedState;if(m=v.destroy,h!==null&&Hu(h,v.deps)){f.memoizedState=oo(s,a,m,h);return}}Ye.flags|=n,f.memoizedState=oo(1|s,a,m,h)}function Nf(n,s){return Fl(8390656,8,n,s)}function ec(n,s){return Nl(2048,8,n,s)}function zf(n,s){return Nl(4,2,n,s)}function Gf(n,s){return Nl(4,4,n,s)}function Uf(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Wf(n,s,a){return a=a!=null?a.concat([n]):null,Nl(4,4,Uf.bind(null,s,n),a)}function tc(){}function Xf(n,s){var a=sn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function jf(n,s){var a=sn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Hu(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Bf(n,s,a){return cr&21?(vn(a,s)||(a=yd(),Ye.lanes|=a,hr|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Ot=!0),n.memoizedState=a)}function X0(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var h=Zu.transition;Zu.transition={};try{n(!1),s()}finally{Fe=a,Zu.transition=h}}function bf(){return sn().memoizedState}function j0(n,s,a){var h=Oi(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Yf(n))Vf(s,a);else if(a=wf(n,s,a,h),a!==null){var f=Mt();Cn(a,n,h,f),Kf(a,s,h)}}function B0(n,s,a){var h=Oi(n),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yf(n))Vf(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,C=m(v,a);if(f.hasEagerState=!0,f.eagerState=C,vn(C,v)){var L=s.interleaved;L===null?(f.next=f,ju(s)):(f.next=L.next,L.next=f),s.interleaved=f;return}}catch{}finally{}a=wf(n,s,f,h),a!==null&&(f=Mt(),Cn(a,n,h,f),Kf(a,s,h))}}function Yf(n){var s=n.alternate;return n===Ye||s!==null&&s===Ye}function Vf(n,s){io=Ol=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Kf(n,s,a){if(a&4194240){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,iu(n,a)}}var zl={readContext:rn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},b0={readContext:rn,useCallback:function(n,s){return Gn().memoizedState=[n,s===void 0?null:s],n},useContext:rn,useEffect:Nf,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Fl(4194308,4,Uf.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Fl(4194308,4,n,s)},useInsertionEffect:function(n,s){return Fl(4,2,n,s)},useMemo:function(n,s){var a=Gn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=Gn();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=j0.bind(null,Ye,n),[h.memoizedState,n]},useRef:function(n){var s=Gn();return n={current:n},s.memoizedState=n},useState:Of,useDebugValue:tc,useDeferredValue:function(n){return Gn().memoizedState=n},useTransition:function(){var n=Of(!1),s=n[0];return n=X0.bind(null,n[1]),Gn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=Ye,f=Gn();if(Be){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),ot===null)throw Error(t(349));cr&30||Mf(h,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Nf(kf.bind(null,h,m,n),[n]),h.flags|=2048,oo(9,Af.bind(null,h,m,a,s),void 0,null),a},useId:function(){var n=Gn(),s=ot.identifierPrefix;if(Be){var a=Qn,h=qn;a=(h&~(1<<32-yn(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=ro++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=W0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Y0={readContext:rn,useCallback:Xf,useContext:rn,useEffect:ec,useImperativeHandle:Wf,useInsertionEffect:zf,useLayoutEffect:Gf,useMemo:jf,useReducer:Qu,useRef:Ff,useState:function(){return Qu(so)},useDebugValue:tc,useDeferredValue:function(n){var s=sn();return Bf(s,tt.memoizedState,n)},useTransition:function(){var n=Qu(so)[0],s=sn().memoizedState;return[n,s]},useMutableSource:If,useSyncExternalStore:Lf,useId:bf,unstable_isNewReconciler:!1},V0={readContext:rn,useCallback:Xf,useContext:rn,useEffect:ec,useImperativeHandle:Wf,useInsertionEffect:zf,useLayoutEffect:Gf,useMemo:jf,useReducer:Ju,useRef:Ff,useState:function(){return Ju(so)},useDebugValue:tc,useDeferredValue:function(n){var s=sn();return tt===null?s.memoizedState=n:Bf(s,tt.memoizedState,n)},useTransition:function(){var n=Ju(so)[0],s=sn().memoizedState;return[n,s]},useMutableSource:If,useSyncExternalStore:Lf,useId:bf,unstable_isNewReconciler:!1};function xn(n,s){if(n&&n.defaultProps){s=U({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function nc(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:U({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Gl={isMounted:function(n){return(n=n._reactInternals)?ir(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=Mt(),f=Oi(n),m=ei(h,f);m.payload=s,a!=null&&(m.callback=a),s=Ai(n,m,f),s!==null&&(Cn(s,n,f,h),Al(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=Mt(),f=Oi(n),m=ei(h,f);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=Ai(n,m,f),s!==null&&(Cn(s,n,f,h),Al(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Mt(),h=Oi(n),f=ei(a,h);f.tag=2,s!=null&&(f.callback=s),s=Ai(n,f,h),s!==null&&(Cn(s,n,h,a),Al(s,n,h))}};function Zf(n,s,a,h,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,m,v):s.prototype&&s.prototype.isPureReactComponent?!Vs(a,h)||!Vs(f,m):!0}function Hf(n,s,a){var h=!1,f=Ii,m=s.contextType;return typeof m=="object"&&m!==null?m=rn(m):(f=Dt(s)?sr:_t.current,h=s.contextTypes,m=(h=h!=null)?Wr(n,f):Ii),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gl,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=m),s}function $f(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Gl.enqueueReplaceState(s,s.state,null)}function ic(n,s,a,h){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Bu(n);var m=s.contextType;typeof m=="object"&&m!==null?f.context=rn(m):(m=Dt(s)?sr:_t.current,f.context=Wr(n,m)),f.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(nc(n,s,m,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Gl.enqueueReplaceState(f,f.state,null),kl(n,a,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Zr(n,s){try{var a="",h=s;do a+=ue(h),h=h.return;while(h);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:f,digest:null}}function rc(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function sc(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function qf(n,s,a){a=ei(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Yl||(Yl=!0,Ec=h),sc(n,s)},a}function Qf(n,s,a){a=ei(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){sc(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){sc(n,s),typeof h!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Jf(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new K0;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),n=ly.bind(null,n,s,a),s.then(n,n))}function eg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function tg(n,s,a,h,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ei(-1,1),s.tag=2,Ai(a,s,1))),a.lanes|=1),n)}var Z0=M.ReactCurrentOwner,Ot=!1;function Lt(n,s,a,h){s.child=n===null?xf(s,null,a,h):br(s,n.child,a,h)}function ng(n,s,a,h,f){a=a.render;var m=s.ref;return Vr(s,f),h=$u(n,s,a,h,m,f),a=qu(),n!==null&&!Ot?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(Be&&a&&Du(s),s.flags|=1,Lt(n,s,h,f),s.child)}function ig(n,s,a,h,f){if(n===null){var m=a.type;return typeof m=="function"&&!Ic(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,rg(n,s,m,h,f)):(n=ql(a.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!(n.lanes&f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Vs,a(v,h)&&n.ref===s.ref)return ti(n,s,f)}return s.flags|=1,n=Ni(m,h),n.ref=s.ref,n.return=s,s.child=n}function rg(n,s,a,h,f){if(n!==null){var m=n.memoizedProps;if(Vs(m,h)&&n.ref===s.ref)if(Ot=!1,s.pendingProps=h=m,(n.lanes&f)!==0)n.flags&131072&&(Ot=!0);else return s.lanes=n.lanes,ti(n,s,f)}return oc(n,s,a,h,f)}function sg(n,s,a){var h=s.pendingProps,f=h.children,m=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue($r,Zt),Zt|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ue($r,Zt),Zt|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,Ue($r,Zt),Zt|=h}else m!==null?(h=m.baseLanes|a,s.memoizedState=null):h=a,Ue($r,Zt),Zt|=h;return Lt(n,s,f,a),s.child}function og(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function oc(n,s,a,h,f){var m=Dt(a)?sr:_t.current;return m=Wr(s,m),Vr(s,f),a=$u(n,s,a,h,m,f),h=qu(),n!==null&&!Ot?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,ti(n,s,f)):(Be&&h&&Du(s),s.flags|=1,Lt(n,s,a,f),s.child)}function lg(n,s,a,h,f){if(Dt(a)){var m=!0;wl(s)}else m=!1;if(Vr(s,f),s.stateNode===null)Wl(n,s),Hf(s,a,h),ic(s,a,h,f),h=!0;else if(n===null){var v=s.stateNode,C=s.memoizedProps;v.props=C;var L=v.context,F=a.contextType;typeof F=="object"&&F!==null?F=rn(F):(F=Dt(a)?sr:_t.current,F=Wr(s,F));var Z=a.getDerivedStateFromProps,$=typeof Z=="function"||typeof v.getSnapshotBeforeUpdate=="function";$||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==h||L!==F)&&$f(s,v,h,F),Mi=!1;var K=s.memoizedState;v.state=K,kl(s,h,v,f),L=s.memoizedState,C!==h||K!==L||Pt.current||Mi?(typeof Z=="function"&&(nc(s,a,Z,h),L=s.memoizedState),(C=Mi||Zf(s,a,C,h,K,L,F))?($||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=L),v.props=h,v.state=L,v.context=F,h=C):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{v=s.stateNode,Sf(n,s),C=s.memoizedProps,F=s.type===s.elementType?C:xn(s.type,C),v.props=F,$=s.pendingProps,K=v.context,L=a.contextType,typeof L=="object"&&L!==null?L=rn(L):(L=Dt(a)?sr:_t.current,L=Wr(s,L));var re=a.getDerivedStateFromProps;(Z=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==$||K!==L)&&$f(s,v,h,L),Mi=!1,K=s.memoizedState,v.state=K,kl(s,h,v,f);var ae=s.memoizedState;C!==$||K!==ae||Pt.current||Mi?(typeof re=="function"&&(nc(s,a,re,h),ae=s.memoizedState),(F=Mi||Zf(s,a,F,h,K,ae,L)||!1)?(Z||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ae,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ae,L)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ae),v.props=h,v.state=ae,v.context=L,h=F):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),h=!1)}return lc(n,s,a,h,m,f)}function lc(n,s,a,h,f,m){og(n,s);var v=(s.flags&128)!==0;if(!h&&!v)return f&&df(s,a,!1),ti(n,s,m);h=s.stateNode,Z0.current=s;var C=v&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&v?(s.child=br(s,n.child,null,m),s.child=br(s,null,C,m)):Lt(n,s,C,m),s.memoizedState=h.state,f&&df(s,a,!0),s.child}function ag(n){var s=n.stateNode;s.pendingContext?cf(n,s.pendingContext,s.pendingContext!==s.context):s.context&&cf(n,s.context,!1),bu(n,s.containerInfo)}function ug(n,s,a,h,f){return Br(),zu(f),s.flags|=256,Lt(n,s,a,h),s.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function uc(n){return{baseLanes:n,cachePool:null,transitions:null}}function cg(n,s,a){var h=s.pendingProps,f=be.current,m=!1,v=(s.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ue(be,f&1),n===null)return Nu(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(v=h.children,n=h.fallback,m?(h=s.mode,m=s.child,v={mode:"hidden",children:v},!(h&1)&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Ql(v,h,0,null),n=pr(n,h,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=uc(a),s.memoizedState=ac,n):cc(s,v));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return H0(n,s,v,h,C,f,a);if(m){m=h.fallback,v=s.mode,f=n.child,C=f.sibling;var L={mode:"hidden",children:h.children};return!(v&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=L,s.deletions=null):(h=Ni(f,L),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?m=Ni(C,m):(m=pr(m,v,a,null),m.flags|=2),m.return=s,h.return=s,h.sibling=m,s.child=h,h=m,m=s.child,v=n.child.memoizedState,v=v===null?uc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,s.memoizedState=ac,h}return m=n.child,n=m.sibling,h=Ni(m,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function cc(n,s){return s=Ql({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ul(n,s,a,h){return h!==null&&zu(h),br(s,n.child,null,a),n=cc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function H0(n,s,a,h,f,m,v){if(a)return s.flags&256?(s.flags&=-257,h=rc(Error(t(422))),Ul(n,s,v,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=h.fallback,f=s.mode,h=Ql({mode:"visible",children:h.children},f,0,null),m=pr(m,f,v,null),m.flags|=2,h.return=s,m.return=s,h.sibling=m,s.child=h,s.mode&1&&br(s,n.child,null,v),s.child.memoizedState=uc(v),s.memoizedState=ac,m);if(!(s.mode&1))return Ul(n,s,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,m=Error(t(419)),h=rc(m,h,void 0),Ul(n,s,v,h)}if(C=(v&n.childLanes)!==0,Ot||C){if(h=ot,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|v)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,Jn(n,f),Cn(h,n,f,-1))}return Tc(),h=rc(Error(t(421))),Ul(n,s,v,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=ay.bind(null,n),f._reactRetry=s,null):(n=m.treeContext,Kt=Ri(f.nextSibling),Vt=s,Be=!0,En=null,n!==null&&(tn[nn++]=qn,tn[nn++]=Qn,tn[nn++]=or,qn=n.id,Qn=n.overflow,or=s),s=cc(s,h.children),s.flags|=4096,s)}function hg(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Xu(n.return,s,a)}function hc(n,s,a,h,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=f)}function dg(n,s,a){var h=s.pendingProps,f=h.revealOrder,m=h.tail;if(Lt(n,s,h.children,a),h=be.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hg(n,a,s);else if(n.tag===19)hg(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ue(be,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Pl(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),hc(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Pl(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}hc(s,!0,a,null,m);break;case"together":hc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Wl(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ti(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),hr|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ni(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ni(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function $0(n,s,a){switch(s.tag){case 3:ag(s),Br();break;case 5:Tf(s);break;case 1:Dt(s.type)&&wl(s);break;case 4:bu(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ue(Ll,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ue(be,be.current&1),s.flags|=128,null):a&s.child.childLanes?cg(n,s,a):(Ue(be,be.current&1),n=ti(n,s,a),n!==null?n.sibling:null);Ue(be,be.current&1);break;case 19:if(h=(a&s.childLanes)!==0,n.flags&128){if(h)return dg(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ue(be,be.current),h)break;return null;case 22:case 23:return s.lanes=0,sg(n,s,a)}return ti(n,s,a)}var fg,dc,gg,pg;fg=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},dc=function(){},gg=function(n,s,a,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,ur(zn.current);var m=null;switch(a){case"input":f=Yn(n,f),h=Yn(n,h),m=[];break;case"select":f=U({},f,{value:void 0}),h=U({},h,{value:void 0}),m=[];break;case"textarea":f=pn(n,f),h=pn(n,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=vl)}Lr(a,h);var v;a=null;for(F in f)if(!h.hasOwnProperty(F)&&f.hasOwnProperty(F)&&f[F]!=null)if(F==="style"){var C=f[F];for(v in C)C.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?m||(m=[]):(m=m||[]).push(F,null));for(F in h){var L=h[F];if(C=f!=null?f[F]:void 0,h.hasOwnProperty(F)&&L!==C&&(L!=null||C!=null))if(F==="style")if(C){for(v in C)!C.hasOwnProperty(v)||L&&L.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in L)L.hasOwnProperty(v)&&C[v]!==L[v]&&(a||(a={}),a[v]=L[v])}else a||(m||(m=[]),m.push(F,a)),a=L;else F==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(m=m||[]).push(F,L)):F==="children"?typeof L!="string"&&typeof L!="number"||(m=m||[]).push(F,""+L):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(o.hasOwnProperty(F)?(L!=null&&F==="onScroll"&&Xe("scroll",n),m||C===L||(m=[])):(m=m||[]).push(F,L))}a&&(m=m||[]).push("style",a);var F=m;(s.updateQueue=F)&&(s.flags|=4)}},pg=function(n,s,a,h){a!==h&&(s.flags|=4)};function lo(n,s){if(!Be)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function vt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function q0(n,s,a){var h=s.pendingProps;switch(Ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(s),null;case 1:return Dt(s.type)&&xl(),vt(s),null;case 3:return h=s.stateNode,Kr(),je(Pt),je(_t),Ku(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Tl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,En!==null&&(Sc(En),En=null))),dc(n,s),vt(s),null;case 5:Yu(s);var f=ur(no.current);if(a=s.type,n!==null&&s.stateNode!=null)gg(n,s,a,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return vt(s),null}if(n=ur(zn.current),Tl(s)){h=s.stateNode,a=s.type;var m=s.memoizedProps;switch(h[Nn]=s,h[qs]=m,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<Zs.length;f++)Xe(Zs[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":Pn(h,m),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Xe("invalid",h);break;case"textarea":Vn(h,m),Xe("invalid",h)}Lr(a,m),f=null;for(var v in m)if(m.hasOwnProperty(v)){var C=m[v];v==="children"?typeof C=="string"?h.textContent!==C&&(m.suppressHydrationWarning!==!0&&yl(h.textContent,C,n),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(m.suppressHydrationWarning!==!0&&yl(h.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(v)&&C!=null&&v==="onScroll"&&Xe("scroll",h)}switch(a){case"input":Ct(h),bt(h,m,!0);break;case"textarea":Ct(h),He(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=vl)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Tr(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=v.createElement(a,{is:h.is}):(n=v.createElement(a),a==="select"&&(v=n,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):n=v.createElementNS(n,a),n[Nn]=s,n[qs]=h,fg(n,s,!1,!1),s.stateNode=n;e:{switch(v=Mr(a,h),a){case"dialog":Xe("cancel",n),Xe("close",n),f=h;break;case"iframe":case"object":case"embed":Xe("load",n),f=h;break;case"video":case"audio":for(f=0;f<Zs.length;f++)Xe(Zs[f],n);f=h;break;case"source":Xe("error",n),f=h;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),f=h;break;case"details":Xe("toggle",n),f=h;break;case"input":Pn(n,h),f=Yn(n,h),Xe("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=U({},h,{value:void 0}),Xe("invalid",n);break;case"textarea":Vn(n,h),f=pn(n,h),Xe("invalid",n);break;default:f=h}Lr(a,f),C=f;for(m in C)if(C.hasOwnProperty(m)){var L=C[m];m==="style"?Jo(n,L):m==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&er(n,L)):m==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&tr(n,L):typeof L=="number"&&tr(n,""+L):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?L!=null&&m==="onScroll"&&Xe("scroll",n):L!=null&&D(n,m,L,v))}switch(a){case"input":Ct(n),bt(n,h,!1);break;case"textarea":Ct(n),He(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ee(h.value));break;case"select":n.multiple=!!h.multiple,m=h.value,m!=null?Jt(n,!!h.multiple,m,!1):h.defaultValue!=null&&Jt(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=vl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return vt(s),null;case 6:if(n&&s.stateNode!=null)pg(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ur(no.current),ur(zn.current),Tl(s)){if(h=s.stateNode,a=s.memoizedProps,h[Nn]=s,(m=h.nodeValue!==a)&&(n=Vt,n!==null))switch(n.tag){case 3:yl(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&yl(h.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Nn]=s,s.stateNode=h}return vt(s),null;case 13:if(je(be),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Be&&Kt!==null&&s.mode&1&&!(s.flags&128))yf(),Br(),s.flags|=98560,m=!1;else if(m=Tl(s),h!==null&&h.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Nn]=s}else Br(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;vt(s),m=!1}else En!==null&&(Sc(En),En=null),m=!0;if(!m)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||be.current&1?nt===0&&(nt=3):Tc())),s.updateQueue!==null&&(s.flags|=4),vt(s),null);case 4:return Kr(),dc(n,s),n===null&&Hs(s.stateNode.containerInfo),vt(s),null;case 10:return Wu(s.type._context),vt(s),null;case 17:return Dt(s.type)&&xl(),vt(s),null;case 19:if(je(be),m=s.memoizedState,m===null)return vt(s),null;if(h=(s.flags&128)!==0,v=m.rendering,v===null)if(h)lo(m,!1);else{if(nt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(v=Pl(n),v!==null){for(s.flags|=128,lo(m,!1),h=v.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)m=a,n=h,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ue(be,be.current&1|2),s.child}n=n.sibling}m.tail!==null&&$e()>qr&&(s.flags|=128,h=!0,lo(m,!1),s.lanes=4194304)}else{if(!h)if(n=Pl(v),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),lo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Be)return vt(s),null}else 2*$e()-m.renderingStartTime>qr&&a!==1073741824&&(s.flags|=128,h=!0,lo(m,!1),s.lanes=4194304);m.isBackwards?(v.sibling=s.child,s.child=v):(a=m.last,a!==null?a.sibling=v:s.child=v,m.last=v)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=$e(),s.sibling=null,a=be.current,Ue(be,h?a&1|2:a&1),s):(vt(s),null);case 22:case 23:return Rc(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Zt&1073741824&&(vt(s),s.subtreeFlags&6&&(s.flags|=8192)):vt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Q0(n,s){switch(Ou(s),s.tag){case 1:return Dt(s.type)&&xl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Kr(),je(Pt),je(_t),Ku(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Yu(s),null;case 13:if(je(be),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Br()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return je(be),null;case 4:return Kr(),null;case 10:return Wu(s.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var Xl=!1,Et=!1,J0=typeof WeakSet=="function"?WeakSet:Set,le=null;function Hr(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Ve(n,s,h)}else a.current=null}function fc(n,s,a){try{a()}catch(h){Ve(n,s,h)}}var mg=!1;function ey(n,s){if(Ru=ll,n=Kd(),_u(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,C=-1,L=-1,F=0,Z=0,$=n,K=null;t:for(;;){for(var re;$!==a||f!==0&&$.nodeType!==3||(C=v+f),$!==m||h!==0&&$.nodeType!==3||(L=v+h),$.nodeType===3&&(v+=$.nodeValue.length),(re=$.firstChild)!==null;)K=$,$=re;for(;;){if($===n)break t;if(K===a&&++F===f&&(C=v),K===m&&++Z===h&&(L=v),(re=$.nextSibling)!==null)break;$=K,K=$.parentNode}$=re}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tu={focusedElem:n,selectionRange:a},ll=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ae=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,qe=ae.memoizedState,P=s.stateNode,A=P.getSnapshotBeforeUpdate(s.elementType===s.type?ce:xn(s.type,ce),qe);P.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var O=s.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){Ve(s,s.return,J)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ae=mg,mg=!1,ae}function ao(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var m=f.destroy;f.destroy=void 0,m!==void 0&&fc(s,a,m)}f=f.next}while(f!==h)}}function jl(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function gc(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function _g(n){var s=n.alternate;s!==null&&(n.alternate=null,_g(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Nn],delete s[qs],delete s[Au],delete s[N0],delete s[z0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function yg(n){return n.tag===5||n.tag===3||n.tag===4}function vg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pc(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vl));else if(h!==4&&(n=n.child,n!==null))for(pc(n,s,a),n=n.sibling;n!==null;)pc(n,s,a),n=n.sibling}function mc(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(mc(n,s,a),n=n.sibling;n!==null;)mc(n,s,a),n=n.sibling}var ct=null,wn=!1;function ki(n,s,a){for(a=a.child;a!==null;)Eg(n,s,a),a=a.sibling}function Eg(n,s,a){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(tl,a)}catch{}switch(a.tag){case 5:Et||Hr(a,s);case 6:var h=ct,f=wn;ct=null,ki(n,s,a),ct=h,wn=f,ct!==null&&(wn?(n=ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):ct.removeChild(a.stateNode));break;case 18:ct!==null&&(wn?(n=ct,a=a.stateNode,n.nodeType===8?Mu(n.parentNode,a):n.nodeType===1&&Mu(n,a),Ws(n)):Mu(ct,a.stateNode));break;case 4:h=ct,f=wn,ct=a.stateNode.containerInfo,wn=!0,ki(n,s,a),ct=h,wn=f;break;case 0:case 11:case 14:case 15:if(!Et&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,v=m.destroy;m=m.tag,v!==void 0&&(m&2||m&4)&&fc(a,s,v),f=f.next}while(f!==h)}ki(n,s,a);break;case 1:if(!Et&&(Hr(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){Ve(a,s,C)}ki(n,s,a);break;case 21:ki(n,s,a);break;case 22:a.mode&1?(Et=(h=Et)||a.memoizedState!==null,ki(n,s,a),Et=h):ki(n,s,a);break;default:ki(n,s,a)}}function xg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new J0),s.forEach(function(h){var f=uy.bind(null,n,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Sn(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var m=n,v=s,C=v;e:for(;C!==null;){switch(C.tag){case 5:ct=C.stateNode,wn=!1;break e;case 3:ct=C.stateNode.containerInfo,wn=!0;break e;case 4:ct=C.stateNode.containerInfo,wn=!0;break e}C=C.return}if(ct===null)throw Error(t(160));Eg(m,v,f),ct=null,wn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(F){Ve(f,s,F)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)wg(s,n),s=s.sibling}function wg(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sn(s,n),Un(n),h&4){try{ao(3,n,n.return),jl(3,n)}catch(ce){Ve(n,n.return,ce)}try{ao(5,n,n.return)}catch(ce){Ve(n,n.return,ce)}}break;case 1:Sn(s,n),Un(n),h&512&&a!==null&&Hr(a,a.return);break;case 5:if(Sn(s,n),Un(n),h&512&&a!==null&&Hr(a,a.return),n.flags&32){var f=n.stateNode;try{tr(f,"")}catch(ce){Ve(n,n.return,ce)}}if(h&4&&(f=n.stateNode,f!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,C=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{C==="input"&&m.type==="radio"&&m.name!=null&&qt(f,m),Mr(C,v);var F=Mr(C,m);for(v=0;v<L.length;v+=2){var Z=L[v],$=L[v+1];Z==="style"?Jo(f,$):Z==="dangerouslySetInnerHTML"?er(f,$):Z==="children"?tr(f,$):D(f,Z,$,F)}switch(C){case"input":gt(f,m);break;case"textarea":Kn(f,m);break;case"select":var K=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var re=m.value;re!=null?Jt(f,!!m.multiple,re,!1):K!==!!m.multiple&&(m.defaultValue!=null?Jt(f,!!m.multiple,m.defaultValue,!0):Jt(f,!!m.multiple,m.multiple?[]:"",!1))}f[qs]=m}catch(ce){Ve(n,n.return,ce)}}break;case 6:if(Sn(s,n),Un(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,m=n.memoizedProps;try{f.nodeValue=m}catch(ce){Ve(n,n.return,ce)}}break;case 3:if(Sn(s,n),Un(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Ws(s.containerInfo)}catch(ce){Ve(n,n.return,ce)}break;case 4:Sn(s,n),Un(n);break;case 13:Sn(s,n),Un(n),f=n.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(vc=$e())),h&4&&xg(n);break;case 22:if(Z=a!==null&&a.memoizedState!==null,n.mode&1?(Et=(F=Et)||Z,Sn(s,n),Et=F):Sn(s,n),Un(n),h&8192){if(F=n.memoizedState!==null,(n.stateNode.isHidden=F)&&!Z&&n.mode&1)for(le=n,Z=n.child;Z!==null;){for($=le=Z;le!==null;){switch(K=le,re=K.child,K.tag){case 0:case 11:case 14:case 15:ao(4,K,K.return);break;case 1:Hr(K,K.return);var ae=K.stateNode;if(typeof ae.componentWillUnmount=="function"){h=K,a=K.return;try{s=h,ae.props=s.memoizedProps,ae.state=s.memoizedState,ae.componentWillUnmount()}catch(ce){Ve(h,a,ce)}}break;case 5:Hr(K,K.return);break;case 22:if(K.memoizedState!==null){Rg($);continue}}re!==null?(re.return=K,le=re):Rg($)}Z=Z.sibling}e:for(Z=null,$=n;;){if($.tag===5){if(Z===null){Z=$;try{f=$.stateNode,F?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(C=$.stateNode,L=$.memoizedProps.style,v=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=Ir("display",v))}catch(ce){Ve(n,n.return,ce)}}}else if($.tag===6){if(Z===null)try{$.stateNode.nodeValue=F?"":$.memoizedProps}catch(ce){Ve(n,n.return,ce)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===n)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===n)break e;for(;$.sibling===null;){if($.return===null||$.return===n)break e;Z===$&&(Z=null),$=$.return}Z===$&&(Z=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Sn(s,n),Un(n),h&4&&xg(n);break;case 21:break;default:Sn(s,n),Un(n)}}function Un(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(yg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(tr(f,""),h.flags&=-33);var m=vg(n);mc(n,m,f);break;case 3:case 4:var v=h.stateNode.containerInfo,C=vg(n);pc(n,C,v);break;default:throw Error(t(161))}}catch(L){Ve(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ty(n,s,a){le=n,Sg(n)}function Sg(n,s,a){for(var h=(n.mode&1)!==0;le!==null;){var f=le,m=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||Xl;if(!v){var C=f.alternate,L=C!==null&&C.memoizedState!==null||Et;C=Xl;var F=Et;if(Xl=v,(Et=L)&&!F)for(le=f;le!==null;)v=le,L=v.child,v.tag===22&&v.memoizedState!==null?Tg(f):L!==null?(L.return=v,le=L):Tg(f);for(;m!==null;)le=m,Sg(m),m=m.sibling;le=f,Xl=C,Et=F}Cg(n)}else f.subtreeFlags&8772&&m!==null?(m.return=f,le=m):Cg(n)}}function Cg(n){for(;le!==null;){var s=le;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Et||jl(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Et)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:xn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Rf(s,m,h);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Rf(s,v,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var F=s.alternate;if(F!==null){var Z=F.memoizedState;if(Z!==null){var $=Z.dehydrated;$!==null&&Ws($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Et||s.flags&512&&gc(s)}catch(K){Ve(s,s.return,K)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function Rg(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function Tg(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{jl(4,s)}catch(L){Ve(s,a,L)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(L){Ve(s,f,L)}}var m=s.return;try{gc(s)}catch(L){Ve(s,m,L)}break;case 5:var v=s.return;try{gc(s)}catch(L){Ve(s,v,L)}}}catch(L){Ve(s,s.return,L)}if(s===n){le=null;break}var C=s.sibling;if(C!==null){C.return=s.return,le=C;break}le=s.return}}var ny=Math.ceil,Bl=M.ReactCurrentDispatcher,_c=M.ReactCurrentOwner,on=M.ReactCurrentBatchConfig,Ie=0,ot=null,Je=null,ht=0,Zt=0,$r=Ti(0),nt=0,uo=null,hr=0,bl=0,yc=0,co=null,Ft=null,vc=0,qr=1/0,ni=null,Yl=!1,Ec=null,Pi=null,Vl=!1,Di=null,Kl=0,ho=0,xc=null,Zl=-1,Hl=0;function Mt(){return Ie&6?$e():Zl!==-1?Zl:Zl=$e()}function Oi(n){return n.mode&1?Ie&2&&ht!==0?ht&-ht:U0.transition!==null?(Hl===0&&(Hl=yd()),Hl):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:Id(n.type)),n):1}function Cn(n,s,a,h){if(50<ho)throw ho=0,xc=null,Error(t(185));Fs(n,a,h),(!(Ie&2)||n!==ot)&&(n===ot&&(!(Ie&2)&&(bl|=a),nt===4&&Fi(n,ht)),Nt(n,h),a===1&&Ie===0&&!(s.mode&1)&&(qr=$e()+500,Sl&&Li()))}function Nt(n,s){var a=n.callbackNode;U_(n,s);var h=rl(n,n===ot?ht:0);if(h===0)a!==null&&pd(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&pd(a),s===1)n.tag===0?G0(Lg.bind(null,n)):ff(Lg.bind(null,n)),O0(function(){!(Ie&6)&&Li()}),a=null;else{switch(vd(h)){case 1:a=eu;break;case 4:a=md;break;case 16:a=el;break;case 536870912:a=_d;break;default:a=el}a=Ng(a,Ig.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Ig(n,s){if(Zl=-1,Hl=0,Ie&6)throw Error(t(327));var a=n.callbackNode;if(Qr()&&n.callbackNode!==a)return null;var h=rl(n,n===ot?ht:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=$l(n,h);else{s=h;var f=Ie;Ie|=2;var m=Ag();(ot!==n||ht!==s)&&(ni=null,qr=$e()+500,fr(n,s));do try{sy();break}catch(C){Mg(n,C)}while(!0);Uu(),Bl.current=m,Ie=f,Je!==null?s=0:(ot=null,ht=0,s=nt)}if(s!==0){if(s===2&&(f=tu(n),f!==0&&(h=f,s=wc(n,f))),s===1)throw a=uo,fr(n,0),Fi(n,h),Nt(n,$e()),a;if(s===6)Fi(n,h);else{if(f=n.current.alternate,!(h&30)&&!iy(f)&&(s=$l(n,h),s===2&&(m=tu(n),m!==0&&(h=m,s=wc(n,m))),s===1))throw a=uo,fr(n,0),Fi(n,h),Nt(n,$e()),a;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:gr(n,Ft,ni);break;case 3:if(Fi(n,h),(h&130023424)===h&&(s=vc+500-$e(),10<s)){if(rl(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Mt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Lu(gr.bind(null,n,Ft,ni),s);break}gr(n,Ft,ni);break;case 4:if(Fi(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var v=31-yn(h);m=1<<v,v=s[v],v>f&&(f=v),h&=~m}if(h=f,h=$e()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*ny(h/1960))-h,10<h){n.timeoutHandle=Lu(gr.bind(null,n,Ft,ni),h);break}gr(n,Ft,ni);break;case 5:gr(n,Ft,ni);break;default:throw Error(t(329))}}}return Nt(n,$e()),n.callbackNode===a?Ig.bind(null,n):null}function wc(n,s){var a=co;return n.current.memoizedState.isDehydrated&&(fr(n,s).flags|=256),n=$l(n,s),n!==2&&(s=Ft,Ft=a,s!==null&&Sc(s)),n}function Sc(n){Ft===null?Ft=n:Ft.push.apply(Ft,n)}function iy(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],m=f.getSnapshot;f=f.value;try{if(!vn(m(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Fi(n,s){for(s&=~yc,s&=~bl,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-yn(s),h=1<<a;n[a]=-1,s&=~h}}function Lg(n){if(Ie&6)throw Error(t(327));Qr();var s=rl(n,0);if(!(s&1))return Nt(n,$e()),null;var a=$l(n,s);if(n.tag!==0&&a===2){var h=tu(n);h!==0&&(s=h,a=wc(n,h))}if(a===1)throw a=uo,fr(n,0),Fi(n,s),Nt(n,$e()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,gr(n,Ft,ni),Nt(n,$e()),null}function Cc(n,s){var a=Ie;Ie|=1;try{return n(s)}finally{Ie=a,Ie===0&&(qr=$e()+500,Sl&&Li())}}function dr(n){Di!==null&&Di.tag===0&&!(Ie&6)&&Qr();var s=Ie;Ie|=1;var a=on.transition,h=Fe;try{if(on.transition=null,Fe=1,n)return n()}finally{Fe=h,on.transition=a,Ie=s,!(Ie&6)&&Li()}}function Rc(){Zt=$r.current,je($r)}function fr(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,D0(a)),Je!==null)for(a=Je.return;a!==null;){var h=a;switch(Ou(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&xl();break;case 3:Kr(),je(Pt),je(_t),Ku();break;case 5:Yu(h);break;case 4:Kr();break;case 13:je(be);break;case 19:je(be);break;case 10:Wu(h.type._context);break;case 22:case 23:Rc()}a=a.return}if(ot=n,Je=n=Ni(n.current,null),ht=Zt=s,nt=0,uo=null,yc=bl=hr=0,Ft=co=null,ar!==null){for(s=0;s<ar.length;s++)if(a=ar[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,m=a.pending;if(m!==null){var v=m.next;m.next=f,h.next=v}a.pending=h}ar=null}return n}function Mg(n,s){do{var a=Je;try{if(Uu(),Dl.current=zl,Ol){for(var h=Ye.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Ol=!1}if(cr=0,st=tt=Ye=null,io=!1,ro=0,_c.current=null,a===null||a.return===null){nt=1,uo=s,Je=null;break}e:{var m=n,v=a.return,C=a,L=s;if(s=ht,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var F=L,Z=C,$=Z.tag;if(!(Z.mode&1)&&($===0||$===11||$===15)){var K=Z.alternate;K?(Z.updateQueue=K.updateQueue,Z.memoizedState=K.memoizedState,Z.lanes=K.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var re=eg(v);if(re!==null){re.flags&=-257,tg(re,v,C,m,s),re.mode&1&&Jf(m,F,s),s=re,L=F;var ae=s.updateQueue;if(ae===null){var ce=new Set;ce.add(L),s.updateQueue=ce}else ae.add(L);break e}else{if(!(s&1)){Jf(m,F,s),Tc();break e}L=Error(t(426))}}else if(Be&&C.mode&1){var qe=eg(v);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),tg(qe,v,C,m,s),zu(Zr(L,C));break e}}m=L=Zr(L,C),nt!==4&&(nt=2),co===null?co=[m]:co.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var P=qf(m,L,s);Cf(m,P);break e;case 1:C=L;var A=m.type,O=m.stateNode;if(!(m.flags&128)&&(typeof A.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Pi===null||!Pi.has(O)))){m.flags|=65536,s&=-s,m.lanes|=s;var J=Qf(m,C,s);Cf(m,J);break e}}m=m.return}while(m!==null)}Pg(a)}catch(de){s=de,Je===a&&a!==null&&(Je=a=a.return);continue}break}while(!0)}function Ag(){var n=Bl.current;return Bl.current=zl,n===null?zl:n}function Tc(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||!(hr&268435455)&&!(bl&268435455)||Fi(ot,ht)}function $l(n,s){var a=Ie;Ie|=2;var h=Ag();(ot!==n||ht!==s)&&(ni=null,fr(n,s));do try{ry();break}catch(f){Mg(n,f)}while(!0);if(Uu(),Ie=a,Bl.current=h,Je!==null)throw Error(t(261));return ot=null,ht=0,nt}function ry(){for(;Je!==null;)kg(Je)}function sy(){for(;Je!==null&&!A_();)kg(Je)}function kg(n){var s=Fg(n.alternate,n,Zt);n.memoizedProps=n.pendingProps,s===null?Pg(n):Je=s,_c.current=null}function Pg(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=Q0(a,s),a!==null){a.flags&=32767,Je=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nt=6,Je=null;return}}else if(a=q0(a,s,Zt),a!==null){Je=a;return}if(s=s.sibling,s!==null){Je=s;return}Je=s=n}while(s!==null);nt===0&&(nt=5)}function gr(n,s,a){var h=Fe,f=on.transition;try{on.transition=null,Fe=1,oy(n,s,a,h)}finally{on.transition=f,Fe=h}return null}function oy(n,s,a,h){do Qr();while(Di!==null);if(Ie&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(W_(n,m),n===ot&&(Je=ot=null,ht=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Vl||(Vl=!0,Ng(el,function(){return Qr(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=on.transition,on.transition=null;var v=Fe;Fe=1;var C=Ie;Ie|=4,_c.current=null,ey(n,a),wg(a,n),T0(Tu),ll=!!Ru,Tu=Ru=null,n.current=a,ty(a),k_(),Ie=C,Fe=v,on.transition=m}else n.current=a;if(Vl&&(Vl=!1,Di=n,Kl=f),m=n.pendingLanes,m===0&&(Pi=null),O_(a.stateNode),Nt(n,$e()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Yl)throw Yl=!1,n=Ec,Ec=null,n;return Kl&1&&n.tag!==0&&Qr(),m=n.pendingLanes,m&1?n===xc?ho++:(ho=0,xc=n):ho=0,Li(),null}function Qr(){if(Di!==null){var n=vd(Kl),s=on.transition,a=Fe;try{if(on.transition=null,Fe=16>n?16:n,Di===null)var h=!1;else{if(n=Di,Di=null,Kl=0,Ie&6)throw Error(t(331));var f=Ie;for(Ie|=4,le=n.current;le!==null;){var m=le,v=m.child;if(le.flags&16){var C=m.deletions;if(C!==null){for(var L=0;L<C.length;L++){var F=C[L];for(le=F;le!==null;){var Z=le;switch(Z.tag){case 0:case 11:case 15:ao(8,Z,m)}var $=Z.child;if($!==null)$.return=Z,le=$;else for(;le!==null;){Z=le;var K=Z.sibling,re=Z.return;if(_g(Z),Z===F){le=null;break}if(K!==null){K.return=re,le=K;break}le=re}}}var ae=m.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var qe=ce.sibling;ce.sibling=null,ce=qe}while(ce!==null)}}le=m}}if(m.subtreeFlags&2064&&v!==null)v.return=m,le=v;else e:for(;le!==null;){if(m=le,m.flags&2048)switch(m.tag){case 0:case 11:case 15:ao(9,m,m.return)}var P=m.sibling;if(P!==null){P.return=m.return,le=P;break e}le=m.return}}var A=n.current;for(le=A;le!==null;){v=le;var O=v.child;if(v.subtreeFlags&2064&&O!==null)O.return=v,le=O;else e:for(v=A;le!==null;){if(C=le,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:jl(9,C)}}catch(de){Ve(C,C.return,de)}if(C===v){le=null;break e}var J=C.sibling;if(J!==null){J.return=C.return,le=J;break e}le=C.return}}if(Ie=f,Li(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(tl,n)}catch{}h=!0}return h}finally{Fe=a,on.transition=s}}return!1}function Dg(n,s,a){s=Zr(a,s),s=qf(n,s,1),n=Ai(n,s,1),s=Mt(),n!==null&&(Fs(n,1,s),Nt(n,s))}function Ve(n,s,a){if(n.tag===3)Dg(n,n,a);else for(;s!==null;){if(s.tag===3){Dg(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Pi===null||!Pi.has(h))){n=Zr(a,n),n=Qf(s,n,1),s=Ai(s,n,1),n=Mt(),s!==null&&(Fs(s,1,n),Nt(s,n));break}}s=s.return}}function ly(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=Mt(),n.pingedLanes|=n.suspendedLanes&a,ot===n&&(ht&a)===a&&(nt===4||nt===3&&(ht&130023424)===ht&&500>$e()-vc?fr(n,0):yc|=a),Nt(n,s)}function Og(n,s){s===0&&(n.mode&1?(s=il,il<<=1,!(il&130023424)&&(il=4194304)):s=1);var a=Mt();n=Jn(n,s),n!==null&&(Fs(n,s,a),Nt(n,a))}function ay(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Og(n,a)}function uy(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Og(n,a)}var Fg;Fg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Pt.current)Ot=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Ot=!1,$0(n,s,a);Ot=!!(n.flags&131072)}else Ot=!1,Be&&s.flags&1048576&&gf(s,Rl,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Wl(n,s),n=s.pendingProps;var f=Wr(s,_t.current);Vr(s,a),f=$u(null,s,h,n,f,a);var m=qu();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Dt(h)?(m=!0,wl(s)):m=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Bu(s),f.updater=Gl,s.stateNode=f,f._reactInternals=s,ic(s,h,n,a),s=lc(null,s,h,!0,m,a)):(s.tag=0,Be&&m&&Du(s),Lt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Wl(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=hy(h),n=xn(h,n),f){case 0:s=oc(null,s,h,n,a);break e;case 1:s=lg(null,s,h,n,a);break e;case 11:s=ng(null,s,h,n,a);break e;case 14:s=ig(null,s,h,xn(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:xn(h,f),oc(n,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:xn(h,f),lg(n,s,h,f,a);case 3:e:{if(ag(s),n===null)throw Error(t(387));h=s.pendingProps,m=s.memoizedState,f=m.element,Sf(n,s),kl(s,h,null,a);var v=s.memoizedState;if(h=v.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){f=Zr(Error(t(423)),s),s=ug(n,s,h,a,f);break e}else if(h!==f){f=Zr(Error(t(424)),s),s=ug(n,s,h,a,f);break e}else for(Kt=Ri(s.stateNode.containerInfo.firstChild),Vt=s,Be=!0,En=null,a=xf(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Br(),h===f){s=ti(n,s,a);break e}Lt(n,s,h,a)}s=s.child}return s;case 5:return Tf(s),n===null&&Nu(s),h=s.type,f=s.pendingProps,m=n!==null?n.memoizedProps:null,v=f.children,Iu(h,f)?v=null:m!==null&&Iu(h,m)&&(s.flags|=32),og(n,s),Lt(n,s,v,a),s.child;case 6:return n===null&&Nu(s),null;case 13:return cg(n,s,a);case 4:return bu(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=br(s,null,h,a):Lt(n,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:xn(h,f),ng(n,s,h,f,a);case 7:return Lt(n,s,s.pendingProps,a),s.child;case 8:return Lt(n,s,s.pendingProps.children,a),s.child;case 12:return Lt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,m=s.memoizedProps,v=f.value,Ue(Ll,h._currentValue),h._currentValue=v,m!==null)if(vn(m.value,v)){if(m.children===f.children&&!Pt.current){s=ti(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var C=m.dependencies;if(C!==null){v=m.child;for(var L=C.firstContext;L!==null;){if(L.context===h){if(m.tag===1){L=ei(-1,a&-a),L.tag=2;var F=m.updateQueue;if(F!==null){F=F.shared;var Z=F.pending;Z===null?L.next=L:(L.next=Z.next,Z.next=L),F.pending=L}}m.lanes|=a,L=m.alternate,L!==null&&(L.lanes|=a),Xu(m.return,a,s),C.lanes|=a;break}L=L.next}}else if(m.tag===10)v=m.type===s.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),Xu(v,a,s),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===s){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Lt(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Vr(s,a),f=rn(f),h=h(f),s.flags|=1,Lt(n,s,h,a),s.child;case 14:return h=s.type,f=xn(h,s.pendingProps),f=xn(h.type,f),ig(n,s,h,f,a);case 15:return rg(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:xn(h,f),Wl(n,s),s.tag=1,Dt(h)?(n=!0,wl(s)):n=!1,Vr(s,a),Hf(s,h,f),ic(s,h,f,a),lc(null,s,h,!0,n,a);case 19:return dg(n,s,a);case 22:return sg(n,s,a)}throw Error(t(156,s.tag))};function Ng(n,s){return gd(n,s)}function cy(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(n,s,a,h){return new cy(n,s,a,h)}function Ic(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hy(n){if(typeof n=="function")return Ic(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q)return 11;if(n===H)return 14}return 2}function Ni(n,s){var a=n.alternate;return a===null?(a=ln(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function ql(n,s,a,h,f,m){var v=2;if(h=n,typeof n=="function")Ic(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case V:return pr(a.children,f,m,s);case N:v=8,f|=8;break;case j:return n=ln(12,a,s,f|2),n.elementType=j,n.lanes=m,n;case ee:return n=ln(13,a,s,f),n.elementType=ee,n.lanes=m,n;case oe:return n=ln(19,a,s,f),n.elementType=oe,n.lanes=m,n;case Y:return Ql(a,f,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:v=10;break e;case ne:v=9;break e;case q:v=11;break e;case H:v=14;break e;case ie:v=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ln(v,a,s,f),s.elementType=n,s.type=h,s.lanes=m,s}function pr(n,s,a,h){return n=ln(7,n,h,s),n.lanes=a,n}function Ql(n,s,a,h){return n=ln(22,n,h,s),n.elementType=Y,n.lanes=a,n.stateNode={isHidden:!1},n}function Lc(n,s,a){return n=ln(6,n,null,s),n.lanes=a,n}function Mc(n,s,a){return s=ln(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function dy(n,s,a,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ac(n,s,a,h,f,m,v,C,L){return n=new dy(n,s,a,C,L),s===1?(s=1,m===!0&&(s|=8)):s=0,m=ln(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bu(m),n}function fy(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function zg(n){if(!n)return Ii;n=n._reactInternals;e:{if(ir(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Dt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Dt(a))return hf(n,a,s)}return s}function Gg(n,s,a,h,f,m,v,C,L){return n=Ac(a,h,!0,n,f,m,v,C,L),n.context=zg(null),a=n.current,h=Mt(),f=Oi(a),m=ei(h,f),m.callback=s??null,Ai(a,m,f),n.current.lanes=f,Fs(n,f,h),Nt(n,h),n}function Jl(n,s,a,h){var f=s.current,m=Mt(),v=Oi(f);return a=zg(a),s.context===null?s.context=a:s.pendingContext=a,s=ei(m,v),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Ai(f,s,v),n!==null&&(Cn(n,f,v,m),Al(n,f,v)),v}function ea(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ug(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function kc(n,s){Ug(n,s),(n=n.alternate)&&Ug(n,s)}function gy(){return null}var Wg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Pc(n){this._internalRoot=n}ta.prototype.render=Pc.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Jl(n,s,null,null)},ta.prototype.unmount=Pc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;dr(function(){Jl(null,n,null,null)}),s[Hn]=null}};function ta(n){this._internalRoot=n}ta.prototype.unstable_scheduleHydration=function(n){if(n){var s=wd();n={blockedOn:null,target:n,priority:s};for(var a=0;a<wi.length&&s!==0&&s<wi[a].priority;a++);wi.splice(a,0,n),a===0&&Rd(n)}};function Dc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function na(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Xg(){}function py(n,s,a,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var F=ea(v);m.call(F)}}var v=Gg(s,h,n,0,null,!1,!1,"",Xg);return n._reactRootContainer=v,n[Hn]=v.current,Hs(n.nodeType===8?n.parentNode:n),dr(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var F=ea(L);C.call(F)}}var L=Ac(n,0,!1,null,null,!1,!1,"",Xg);return n._reactRootContainer=L,n[Hn]=L.current,Hs(n.nodeType===8?n.parentNode:n),dr(function(){Jl(s,L,a,h)}),L}function ia(n,s,a,h,f){var m=a._reactRootContainer;if(m){var v=m;if(typeof f=="function"){var C=f;f=function(){var L=ea(v);C.call(L)}}Jl(s,v,n,f)}else v=py(a,s,n,f,h);return ea(v)}Ed=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Os(s.pendingLanes);a!==0&&(iu(s,a|1),Nt(s,$e()),!(Ie&6)&&(qr=$e()+500,Li()))}break;case 13:dr(function(){var h=Jn(n,1);if(h!==null){var f=Mt();Cn(h,n,1,f)}}),kc(n,1)}},ru=function(n){if(n.tag===13){var s=Jn(n,134217728);if(s!==null){var a=Mt();Cn(s,n,134217728,a)}kc(n,134217728)}},xd=function(n){if(n.tag===13){var s=Oi(n),a=Jn(n,s);if(a!==null){var h=Mt();Cn(a,n,s,h)}kc(n,s)}},wd=function(){return Fe},Sd=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},As=function(n,s,a){switch(s){case"input":if(gt(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var f=El(h);if(!f)throw Error(t(90));kn(h),gt(h,f)}}}break;case"textarea":Kn(n,a);break;case"select":s=a.value,s!=null&&Jt(n,!!a.multiple,s,!1)}},Ps=Cc,Rt=dr;var my={usingClientEntryPoint:!1,Events:[Qs,Gr,El,yi,ks,Cc]},fo={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_y={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=dd(n),n===null?null:n.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{tl=ra.inject(_y),Fn=ra}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=my,zt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(s))throw Error(t(200));return fy(n,s,null,a)},zt.createRoot=function(n,s){if(!Dc(n))throw Error(t(299));var a=!1,h="",f=Wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ac(n,1,!1,null,null,a,!1,h,f),n[Hn]=s.current,Hs(n.nodeType===8?n.parentNode:n),new Pc(s)},zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=dd(s),n=n===null?null:n.stateNode,n},zt.flushSync=function(n){return dr(n)},zt.hydrate=function(n,s,a){if(!na(s))throw Error(t(200));return ia(null,n,s,!0,a)},zt.hydrateRoot=function(n,s,a){if(!Dc(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,m="",v=Wg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=Gg(s,null,n,1,a??null,f,!1,m,v),n[Hn]=s.current,Hs(n),h)for(n=0;n<h.length;n++)a=h[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ta(s)},zt.render=function(n,s,a){if(!na(s))throw Error(t(200));return ia(null,n,s,!1,a)},zt.unmountComponentAtNode=function(n){if(!na(n))throw Error(t(40));return n._reactRootContainer?(dr(function(){ia(null,null,n,!1,function(){n._reactRootContainer=null,n[Hn]=null})}),!0):!1},zt.unstable_batchedUpdates=Cc,zt.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!na(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ia(n,s,a,!1,h)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var $g;function Iy(){if($g)return Nc.exports;$g=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nc.exports=Ty(),Nc.exports}var qg;function Ly(){if(qg)return sa;qg=1;var r=Iy();return sa.createRoot=r.createRoot,sa.hydrateRoot=r.hydrateRoot,sa}var My=Ly();function Ay(r){return Oe.jsx(Oe.Fragment,{children:Oe.jsxs("div",{className:"weatherContainer",children:[Oe.jsxs("section",{className:"header container-row",children:[Oe.jsx("div",{className:"",children:r.city}),Oe.jsx("div",{className:"",children:r.time})]}),Oe.jsxs("section",{className:"weather",children:[Oe.jsxs("div",{className:"about_weather",children:[Oe.jsx("img",{src:r.icon,className:"image"}),Oe.jsx("div",{className:"description",children:r.weather})]}),Oe.jsxs("div",{className:"temp",children:[Oe.jsx("div",{className:"current",children:r.temp}),Oe.jsxs("div",{className:"feelsLike",children:[" feels like ",r.realFeel]})]})]}),Oe.jsx("section",{className:"wind&humidity",children:Oe.jsxs("div",{className:"wind container-row",children:[Oe.jsxs("div",{className:"",children:[Oe.jsx("h4",{children:"wind"}),Oe.jsx("h4",{children:"gusts"}),Oe.jsx("h4",{children:"humidity"})]}),Oe.jsxs("div",{children:[Oe.jsx("p",{className:"wind-info",children:r.wind}),Oe.jsx("p",{className:"wind-info",children:r.gusts}),Oe.jsx("p",{className:"wind-info",children:r.humidity})]})]})})]})})}const ky={"01d":"day.svg","02d":"cloudy-day-1.svg","03d":"cloudy-day-2.svg","04d":"cloudy.svg","09d":"rainy-6.svg","10d":"rainy-1.svg","11d":"thunder.svg","13d":"snowy-6.svg","50d":"cloudy.svg","01n":"night.svg","02n":"cloudy-night-1.svg","03n":"cloudy-night-2.svg","04n":"cloudy.svg","09n":"rainy-6.svg","10n":"rainy-4.svg","11n":"thunder.svg","13n":"snowy-6.svg","50n":"cloudy.svg"};class gi{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Es={PROPERTYCHANGE:"propertychange"};class Da{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Py(r,e,t){let i,o;t=t||ai;let l=0,u=r.length,c=!1;for(;l<u;)i=l+(u-l>>1),o=+t(r[i],e),o<0?l=i+1:(u=i,c=!o);return c?l:~l}function ai(r,e){return r>e?1:r<e?-1:0}function Dy(r,e){return r<e?1:r>e?-1:0}function Ch(r,e,t){if(r[0]<=e)return 0;const i=r.length;if(e<=r[i-1])return i-1;if(typeof t=="function"){for(let o=1;o<i;++o){const l=r[o];if(l===e)return o;if(l<e)return t(e,r[o-1],l)>0?o-1:o}return i-1}if(t>0){for(let o=1;o<i;++o)if(r[o]<e)return o-1;return i-1}if(t<0){for(let o=1;o<i;++o)if(r[o]<=e)return o;return i-1}for(let o=1;o<i;++o){if(r[o]==e)return o;if(r[o]<e)return r[o-1]-e<e-r[o]?o-1:o}return i-1}function Oy(r,e,t){for(;e<t;){const i=r[e];r[e]=r[t],r[t]=i,++e,--t}}function Rh(r,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let o=0;o<i;o++)r[r.length]=t[o]}function Qi(r,e){const t=r.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(r[i]!==e[i])return!1;return!0}function Fy(r,e,t){const i=e||ai;return r.every(function(o,l){if(l===0)return!0;const u=i(r[l-1],o);return!(u>0||u===0)})}function To(){return!0}function Oa(){return!1}function xs(){}function lm(r){let e,t,i;return function(){const o=Array.prototype.slice.call(arguments);return(!t||this!==i||!Qi(o,t))&&(i=this,t=o,e=r.apply(this,arguments)),e}}function Ny(r){function e(){let t;try{t=r()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Wo(r){for(const e in r)delete r[e]}function ws(r){let e;for(e in r)return!1;return!e}class Fa extends Da{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),o=i[e]||(i[e]=[]);o.includes(t)||o.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,o=this.listeners_&&this.listeners_[i];if(!o)return;const l=t?new gi(e):e;l.target||(l.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});i in u||(u[i]=0,c[i]=0),++u[i];let d;for(let g=0,p=o.length;g<p;++g)if("handleEvent"in o[g]?d=o[g].handleEvent(l):d=o[g].call(this,l),d===!1||l.propagationStopped){d=!1;break}if(--u[i]===0){let g=c[i];for(delete c[i];g--;)this.removeEventListener(i,xs);delete u[i]}return d}disposeInternal(){this.listeners_&&Wo(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const o=i.indexOf(t);o!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[o]=xs,++this.pendingRemovals_[e]):(i.splice(o,1),i.length===0&&delete this.listeners_[e]))}}const ve={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Le(r,e,t,i,o){if(o){const u=t;t=function(){r.removeEventListener(e,t),u.apply(i??this,arguments)}}else i&&i!==r&&(t=t.bind(i));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function _a(r,e,t,i){return Le(r,e,t,i,!0)}function We(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Wo(r))}class Xo extends Fa{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ve.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=Le(this,e[l],t);return o}return Le(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const o=e.length;i=new Array(o);for(let l=0;l<o;++l)i[l]=_a(this,e[l],t)}else i=_a(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)zy(i);else if(Array.isArray(e))for(let o=0,l=e.length;o<l;++o)this.removeEventListener(e[o],t);else this.removeEventListener(e,t)}}Xo.prototype.on;Xo.prototype.once;Xo.prototype.un;function zy(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)We(r[e]);else We(r)}function Ae(){throw new Error("Unimplemented abstract method.")}let Gy=0;function De(r){return r.ol_uid||(r.ol_uid=String(++Gy))}class Qg extends gi{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class bn extends Xo{constructor(e){super(),this.on,this.once,this.un,De(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Qg(i,e,t)),i=Es.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Qg(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const o=this.values_||(this.values_={});if(i)o[e]=t;else{const l=o[e];o[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],ws(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const Gt={ADD:"add",REMOVE:"remove"},Jg={LENGTH:"length"};class oa extends gi{constructor(e,t,i){super(e),this.element=t,this.index=i}}class jn extends bn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,o=this.array_.length;i<o;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,o=t.length;i<o;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Jg.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new oa(Gt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,o=t.length;i<o;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new oa(Gt.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const o=this.array_[e];this.array_[e]=t,this.dispatchEvent(new oa(Gt.REMOVE,o,e)),this.dispatchEvent(new oa(Gt.ADD,t,e))}updateLength_(){this.set(Jg.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function ke(r,e){if(!r)throw new Error(e)}class Th extends bn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Th(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(We(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Le(e,ve.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Uy(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Uy(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(ke(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}new Array(6);function Mn(){return[1,0,0,1,0,0]}function Wy(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function ut(r,e){const t=e[0],i=e[1];return e[0]=r[0]*t+r[2]*i+r[4],e[1]=r[1]*t+r[3]*i+r[5],e}function hi(r,e,t,i,o,l,u,c){const d=Math.sin(l),g=Math.cos(l);return r[0]=i*g,r[1]=o*d,r[2]=-i*d,r[3]=o*g,r[4]=u*i*g-c*i*d+e,r[5]=u*o*d+c*o*g+t,r}function am(r,e){const t=Xy(e);ke(t!==0,"Transformation matrix cannot be inverted");const i=e[0],o=e[1],l=e[2],u=e[3],c=e[4],d=e[5];return r[0]=u/t,r[1]=-o/t,r[2]=-l/t,r[3]=i/t,r[4]=(l*d-u*c)/t,r[5]=-(i*d-o*c)/t,r}function Xy(r){return r[0]*r[3]-r[1]*r[2]}const ep=[1e6,1e6,1e6,1e6,2,2];function jy(r){return"matrix("+r.map((t,i)=>Math.round(t*ep[i])/ep[i]).join(", ")+")"}const at={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function tp(r){const e=$t();for(let t=0,i=r.length;t<i;++t)Ro(e,r[t]);return e}function By(r,e,t){const i=Math.min.apply(null,r),o=Math.min.apply(null,e),l=Math.max.apply(null,r),u=Math.max.apply(null,e);return di(i,o,l,u,t)}function Ih(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function um(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function cm(r,e,t){let i,o;return e<r[0]?i=r[0]-e:r[2]<e?i=e-r[2]:i=0,t<r[1]?o=r[1]-t:r[3]<t?o=t-r[3]:o=0,i*i+o*o}function Ss(r,e){return hm(r,e[0],e[1])}function hs(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function hm(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function oh(r,e){const t=r[0],i=r[1],o=r[2],l=r[3],u=e[0],c=e[1];let d=at.UNKNOWN;return u<t?d=d|at.LEFT:u>o&&(d=d|at.RIGHT),c<i?d=d|at.BELOW:c>l&&(d=d|at.ABOVE),d===at.UNKNOWN&&(d=at.INTERSECTING),d}function $t(){return[1/0,1/0,-1/0,-1/0]}function di(r,e,t,i,o){return o?(o[0]=r,o[1]=e,o[2]=t,o[3]=i,o):[r,e,t,i]}function jo(r){return di(1/0,1/0,-1/0,-1/0,r)}function dm(r,e){const t=r[0],i=r[1];return di(t,i,t,i,e)}function Lh(r,e,t,i,o){const l=jo(o);return gm(l,r,e,t,i)}function Io(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function fm(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Ro(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function gm(r,e,t,i,o){for(;t<i;t+=o)by(r,e[t],e[t+1]);return r}function by(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function pm(r,e){let t;return t=e(Na(r)),t||(t=e(za(r)),t)||(t=e(Ga(r)),t)||(t=e(fi(r)),t)?t:!1}function Lo(r){let e=0;return Bo(r)||(e=Te(r)*rt(r)),e}function Na(r){return[r[0],r[1]]}function za(r){return[r[2],r[1]]}function Sr(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Yy(r,e){let t;if(e==="bottom-left")t=Na(r);else if(e==="bottom-right")t=za(r);else if(e==="top-left")t=fi(r);else if(e==="top-right")t=Ga(r);else throw new Error("Invalid corner");return t}function lh(r,e,t,i,o){const[l,u,c,d,g,p,_,y]=Vy(r,e,t,i);return di(Math.min(l,c,g,_),Math.min(u,d,p,y),Math.max(l,c,g,_),Math.max(u,d,p,y),o)}function Vy(r,e,t,i){const o=e*i[0]/2,l=e*i[1]/2,u=Math.cos(t),c=Math.sin(t),d=o*u,g=o*c,p=l*u,_=l*c,y=r[0],x=r[1];return[y-d+_,x-g-p,y-d-_,x-g+p,y+d-_,x+g+p,y+d+_,x+g-p,y-d+_,x-g-p]}function rt(r){return r[3]-r[1]}function Ln(r,e,t){const i=t||$t();return Xt(r,e)?(r[0]>e[0]?i[0]=r[0]:i[0]=e[0],r[1]>e[1]?i[1]=r[1]:i[1]=e[1],r[2]<e[2]?i[2]=r[2]:i[2]=e[2],r[3]<e[3]?i[3]=r[3]:i[3]=e[3]):jo(i),i}function fi(r){return[r[0],r[3]]}function Ga(r){return[r[2],r[3]]}function Te(r){return r[2]-r[0]}function Xt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Bo(r){return r[2]<r[0]||r[3]<r[1]}function Ky(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function Zy(r,e,t){let i=!1;const o=oh(r,e),l=oh(r,t);if(o===at.INTERSECTING||l===at.INTERSECTING)i=!0;else{const u=r[0],c=r[1],d=r[2],g=r[3],p=e[0],_=e[1],y=t[0],x=t[1],E=(x-_)/(y-p);let w,S;l&at.ABOVE&&!(o&at.ABOVE)&&(w=y-(x-g)/E,i=w>=u&&w<=d),!i&&l&at.RIGHT&&!(o&at.RIGHT)&&(S=x-(y-d)*E,i=S>=c&&S<=g),!i&&l&at.BELOW&&!(o&at.BELOW)&&(w=y-(x-c)/E,i=w>=u&&w<=d),!i&&l&at.LEFT&&!(o&at.LEFT)&&(S=x-(y-u)*E,i=S>=c&&S<=g)}return i}function Hy(r,e,t,i){if(Bo(r))return jo(t);let o=[];o=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],e(o,o,2);const l=[],u=[];for(let c=0,d=o.length;c<d;c+=2)l.push(o[c]),u.push(o[c+1]);return By(l,u,t)}function mm(r,e){const t=e.getExtent(),i=Sr(r);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const o=Te(t),u=Math.floor((i[0]-t[0])/o)*o;r[0]-=u,r[2]-=u}return r}function Mh(r,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[i[0],r[1],i[2],r[3]]];mm(r,e);const o=Te(i);if(Te(r)>o&&!t)return[[i[0],r[1],i[2],r[3]]];if(r[0]<i[0])return[[r[0]+o,r[1],i[2],r[3]],[i[0],r[1],r[2],r[3]]];if(r[2]>i[2])return[[r[0],r[1],i[2],r[3]],[i[0],r[1],r[2]-o,r[3]]]}return[r]}const Ah={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class kh{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ah[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const bo=6378137,ds=Math.PI*bo,$y=[-ds,-ds,ds,ds],qy=[-180,-85,180,85],la=bo*Math.log(Math.tan(Math.PI/2));class Jr extends kh{constructor(e){super({code:e,units:"m",extent:$y,global:!0,worldExtent:qy,getPointResolution:function(t,i){return t/Math.cosh(i[1]/bo)}})}}const np=[new Jr("EPSG:3857"),new Jr("EPSG:102100"),new Jr("EPSG:102113"),new Jr("EPSG:900913"),new Jr("http://www.opengis.net/def/crs/EPSG/0/3857"),new Jr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Qy(r,e,t,i){const o=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(o));for(let l=0;l<o;l+=i){e[l]=ds*r[l]/180;let u=bo*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));u>la?u=la:u<-la&&(u=-la),e[l+1]=u}return e}function Jy(r,e,t,i){const o=r.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=r.slice():e=new Array(o));for(let l=0;l<o;l+=i)e[l]=180*r[l]/ds,e[l+1]=360*Math.atan(Math.exp(r[l+1]/bo))/Math.PI-90;return e}const e1=6378137,ip=[-180,-90,180,90],t1=Math.PI*e1/180;class mr extends kh{constructor(e,t){super({code:e,units:"degrees",extent:ip,axisOrientation:t,global:!0,metersPerUnit:t1,worldExtent:ip})}}const rp=[new mr("CRS:84"),new mr("EPSG:4326","neu"),new mr("urn:ogc:def:crs:OGC:1.3:CRS84"),new mr("urn:ogc:def:crs:OGC:2:84"),new mr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new mr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new mr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ah={};function n1(r){return ah[r]||ah[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function i1(r,e){ah[r]=e}let ps={};function Mo(r,e,t){const i=r.getCode(),o=e.getCode();i in ps||(ps[i]={}),ps[i][o]=t}function Uc(r,e){return r in ps&&e in ps[r]?ps[r][e]:null}function Ze(r,e,t){return Math.min(Math.max(r,e),t)}function r1(r,e,t,i,o,l){const u=o-t,c=l-i;if(u!==0||c!==0){const d=((r-t)*u+(e-i)*c)/(u*u+c*c);d>1?(t=o,i=l):d>0&&(t+=u*d,i+=c*d)}return ms(r,e,t,i)}function ms(r,e,t,i){const o=t-r,l=i-e;return o*o+l*l}function s1(r){const e=r.length;for(let i=0;i<e;i++){let o=i,l=Math.abs(r[i][i]);for(let c=i+1;c<e;c++){const d=Math.abs(r[c][i]);d>l&&(l=d,o=c)}if(l===0)return null;const u=r[o];r[o]=r[i],r[i]=u;for(let c=i+1;c<e;c++){const d=-r[c][i]/r[i][i];for(let g=i;g<e+1;g++)i==g?r[c][g]=0:r[c][g]+=d*r[i][g]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=r[i][e]/r[i][i];for(let o=i-1;o>=0;o--)r[o][e]-=r[o][i]*t[i]}return t}function sp(r){return r*180/Math.PI}function Zi(r){return r*Math.PI/180}function _s(r,e){const t=r%e;return t*e<0?t+e:t}function un(r,e,t){return r+t*(e-r)}function Ph(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function aa(r,e){return Math.floor(Ph(r,e))}function ua(r,e){return Math.ceil(Ph(r,e))}function uh(r,e,t){if(r>=e&&r<t)return r;const i=t-e;return((r-e)%i+i)%i+e}function o1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function ya(r,e){let t=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=e[i]){t=!1;break}return t}function Dh(r,e){const t=Math.cos(e),i=Math.sin(e),o=r[0]*t-r[1]*i,l=r[1]*t+r[0]*i;return r[0]=o,r[1]=l,r}function l1(r,e){return r[0]*=e,r[1]*=e,r}function _m(r,e){if(e.canWrapX()){const t=Te(e.getExtent()),i=a1(r,e,t);i&&(r[0]-=i*t)}return r}function a1(r,e,t){const i=e.getExtent();let o=0;return e.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(t=t||Te(i),o=Math.floor((r[0]-i[0])/t)),o}const u1=63710088e-1;function op(r,e,t){t=t||u1;const i=Zi(r[1]),o=Zi(e[1]),l=(o-i)/2,u=Zi(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(i)*Math.cos(o);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const va=.9996,dn=.00669438,Ua=dn*dn,Wa=Ua*dn,vr=dn/(1-dn),lp=Math.sqrt(1-dn),Cs=(1-lp)/(1+lp),ym=Cs*Cs,Oh=ym*Cs,Fh=Oh*Cs,vm=Fh*Cs,Em=1-dn/4-3*Ua/64-5*Wa/256,c1=3*dn/8+3*Ua/32+45*Wa/1024,h1=15*Ua/256+45*Wa/1024,d1=35*Wa/3072,f1=3/2*Cs-27/32*Oh+269/512*vm,g1=21/16*ym-55/32*Fh,p1=151/96*Oh-417/128*vm,m1=1097/512*Fh,Ea=6378137;function _1(r,e,t){const i=r-5e5,u=(t.north?e:e-1e7)/va/(Ea*Em),c=u+f1*Math.sin(2*u)+g1*Math.sin(4*u)+p1*Math.sin(6*u)+m1*Math.sin(8*u),d=Math.sin(c),g=d*d,p=Math.cos(c),_=d/p,y=_*_,x=y*y,E=1-dn*g,w=Math.sqrt(1-dn*g),S=Ea/w,I=(1-dn)/E,T=vr*p**2,D=T*T,M=i/(S*va),k=M*M,X=k*M,V=X*M,N=V*M,j=N*M,b=c-_/I*(k/2-V/24*(5+3*y+10*T-4*D-9*vr))+j/720*(61+90*y+298*T+45*x-252*vr-3*D);let ne=(M-X/6*(1+2*y+T)+N/120*(5-2*T+28*y-3*D+8*vr+24*x))/p;return ne=uh(ne+Zi(xm(t.number)),-Math.PI,Math.PI),[sp(ne),sp(b)]}const ap=-80,up=84,y1=-180,v1=180;function E1(r,e,t){r=uh(r,y1,v1),e<ap?e=ap:e>up&&(e=up);const i=Zi(e),o=Math.sin(i),l=Math.cos(i),u=o/l,c=u*u,d=c*c,g=Zi(r),p=xm(t.number),_=Zi(p),y=Ea/Math.sqrt(1-dn*o**2),x=vr*l**2,E=l*uh(g-_,-Math.PI,Math.PI),w=E*E,S=w*E,I=S*E,T=I*E,D=T*E,M=Ea*(Em*i-c1*Math.sin(2*i)+h1*Math.sin(4*i)-d1*Math.sin(6*i)),k=va*y*(E+S/6*(1-c+x)+T/120*(5-18*c+d+72*x-58*vr))+5e5;let X=va*(M+y*u*(w/2+I/24*(5-c+9*x+4*x**2)+D/720*(61-58*c+d+600*x-330*vr)));return t.north||(X+=1e7),[k,X]}function xm(r){return(r-1)*6-180+3}const x1=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function wm(r){let e=0;for(const o of x1){const l=r.match(o);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function cp(r,e){return function(t,i,o,l){const u=t.length;o=o>1?o:2,l=l??o,i||(o>2?i=t.slice():i=new Array(u));for(let c=0;c<u;c+=l){const d=t[c],g=t[c+1],p=r(d,g,e);i[c]=p[0],i[c+1]=p[1]}return i}}function w1(r){return wm(r)?new kh({code:r,units:"m"}):null}function S1(r){const e=wm(r.getCode());return e?{forward:cp(E1,e),inverse:cp(_1,e)}:null}function Sm(...r){console.warn(...r)}const C1=[S1],R1=[w1];let ch=!0;function T1(r){ch=!1}function Nh(r,e){if(e!==void 0){for(let t=0,i=r.length;t<i;++t)e[t]=r[t];e=e}else e=r.slice();return e}function hh(r){i1(r.getCode(),r),Mo(r,r,Nh)}function I1(r){r.forEach(hh)}function St(r){if(typeof r!="string")return r;const e=n1(r);if(e)return e;for(const t of R1){const i=t(r);if(i)return i}return null}function hp(r,e,t,i){r=St(r);let o;const l=r.getPointResolutionFunc();if(l)o=l(e,t);else{const u=r.getUnits();if(u=="degrees"&&!i||i=="degrees")o=e;else{const c=Yo(r,St("EPSG:4326"));if(!c&&u!=="degrees")o=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const p=op(g.slice(0,2),g.slice(2,4)),_=op(g.slice(4,6),g.slice(6,8));o=(p+_)/2}const d=r.getMetersPerUnit();d!==void 0&&(o/=d)}}return o}function dp(r){I1(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Mo(e,t,Nh)})})}function L1(r,e,t,i){r.forEach(function(o){e.forEach(function(l){Mo(o,l,t),Mo(l,o,i)})})}function zh(r,e){return r?typeof r=="string"?St(r):r:St(e)}function M1(r){return function(e,t,i,o){const l=e.length;i=i!==void 0?i:2,o=o??i,t=t!==void 0?t:new Array(l);for(let u=0;u<l;u+=o){const c=r(e.slice(u,u+i)),d=c.length;for(let g=0,p=o;g<p;++g)t[u+g]=g>=d?e[u+g]:c[g]}return t}}function Wc(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||Yo(r,e)===Nh)&&t}function Yo(r,e){const t=r.getCode(),i=e.getCode();let o=Uc(t,i);if(o)return o;let l=null,u=null;for(const d of C1)l||(l=d(r)),u||(u=d(e));if(!l&&!u)return null;const c="EPSG:4326";if(u)if(l)o=Xc(l.inverse,u.forward);else{const d=Uc(t,c);d&&(o=Xc(d,u.forward))}else{const d=Uc(c,i);d&&(o=Xc(l.inverse,d))}return o&&(hh(r),hh(e),Mo(r,e,o)),o}function Xc(r,e){return function(t,i,o,l){return i=r(t,i,o,l),e(i,i,o,l)}}function Ao(r,e){const t=St(r),i=St(e);return Yo(t,i)}function Xa(r,e,t){const i=Ao(e,t);if(!i){const o=St(e).getCode(),l=St(t).getCode();throw new Error(`No transform available between ${o} and ${l}`)}return i(r,void 0,r.length)}function Cm(r,e,t,i){const o=Ao(e,t);return Hy(r,o,void 0)}let fn=null;function A1(r){fn=St(r)}function xa(){return fn}function k1(){A1("EPSG:4326")}function dh(r,e){return fn?Xa(r,e,fn):r}function si(r,e){return fn?Xa(r,fn,e):(ch&&!ya(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(ch=!1,Sm("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r)}function wa(r,e){return fn?Cm(r,e,fn):r}function Vi(r,e){return fn?Cm(r,fn,e):r}function P1(r,e){if(!fn)return r;const t=St(e).getMetersPerUnit(),i=fn.getMetersPerUnit();return t&&i?r*t/i:r}function D1(){dp(np),dp(rp),L1(rp,np,Qy,Jy)}D1();function Hi(r,e,t,i,o,l,u){l=l||[],u=u||2;let c=0;for(let d=e;d<t;d+=i){const g=r[d],p=r[d+1];l[c++]=o[0]*g+o[2]*p+o[4],l[c++]=o[1]*g+o[3]*p+o[5];for(let _=2;_<u;_++)l[c++]=r[d+_]}return l&&l.length!=c&&(l.length=c),l}function Rm(r,e,t,i,o,l,u){u=u||[];const c=Math.cos(o),d=Math.sin(o),g=l[0],p=l[1];let _=0;for(let y=e;y<t;y+=i){const x=r[y]-g,E=r[y+1]-p;u[_++]=g+x*c-E*d,u[_++]=p+x*d+E*c;for(let w=y+2;w<y+i;++w)u[_++]=r[w]}return u&&u.length!=_&&(u.length=_),u}function O1(r,e,t,i,o,l,u,c){c=c||[];const d=u[0],g=u[1];let p=0;for(let _=e;_<t;_+=i){const y=r[_]-d,x=r[_+1]-g;c[p++]=d+o*y,c[p++]=g+l*x;for(let E=_+2;E<_+i;++E)c[p++]=r[E]}return c&&c.length!=p&&(c.length=p),c}function F1(r,e,t,i,o,l,u){u=u||[];let c=0;for(let d=e;d<t;d+=i){u[c++]=r[d]+o,u[c++]=r[d+1]+l;for(let g=d+2;g<d+i;++g)u[c++]=r[g]}return u&&u.length!=c&&(u.length=c),u}const fp=Mn();class N1 extends bn{constructor(){super(),this.extent_=$t(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=lm((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const o=this.clone();return o.applyTransform(i),o.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ae()}closestPointXY(e,t,i,o){return Ae()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ae()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&jo(t),this.extentRevision_=this.getRevision()}return Ky(this.extent_,e)}rotate(e,t){Ae()}scale(e,t,i){Ae()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ae()}getType(){return Ae()}applyTransform(e){Ae()}intersectsExtent(e){return Ae()}translate(e,t){Ae()}transform(e,t){const i=St(e),o=i.getUnits()=="tile-pixels"?function(l,u,c){const d=i.getExtent(),g=i.getWorldExtent(),p=rt(g)/rt(d);hi(fp,g[0],g[3],p,-p,0,0,0);const _=Hi(l,0,l.length,c,fp,u),y=Ao(i,t);return y?y(_,_,c):_}:Ao(i,t);return this.applyTransform(o),this}}class Gh extends N1{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Lh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ae()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=gp(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ae()}setLayout(e,t,i){let o;if(e)o=gp(e);else{for(let l=0;l<i;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}o=t.length,e=z1(o)}this.layout=e,this.stride=o}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const o=this.getStride();Rm(i,0,i.length,o,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Sr(this.getExtent()));const o=this.getFlatCoordinates();if(o){const l=this.getStride();O1(o,0,o.length,l,e,t,i,o),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const o=this.getStride();F1(i,0,i.length,o,e,t,i),this.changed()}}}function z1(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function gp(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function G1(r,e,t){const i=r.getFlatCoordinates();if(!i)return null;const o=r.getStride();return Hi(i,0,i.length,o,e,t)}function pp(r,e,t,i,o,l,u){const c=r[e],d=r[e+1],g=r[t]-c,p=r[t+1]-d;let _;if(g===0&&p===0)_=e;else{const y=((o-c)*g+(l-d)*p)/(g*g+p*p);if(y>1)_=t;else if(y>0){for(let x=0;x<i;++x)u[x]=un(r[e+x],r[t+x],y);u.length=i;return}else _=e}for(let y=0;y<i;++y)u[y]=r[_+y];u.length=i}function Tm(r,e,t,i,o){let l=r[e],u=r[e+1];for(e+=i;e<t;e+=i){const c=r[e],d=r[e+1],g=ms(l,u,c,d);g>o&&(o=g),l=c,u=d}return o}function U1(r,e,t,i,o){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=Tm(r,e,c,i,o),e=c}return o}function Im(r,e,t,i,o,l,u,c,d,g,p){if(e==t)return g;let _,y;if(o===0){if(y=ms(u,c,r[e],r[e+1]),y<g){for(_=0;_<i;++_)d[_]=r[e+_];return d.length=i,y}return g}p=p||[NaN,NaN];let x=e+i;for(;x<t;)if(pp(r,x-i,x,i,u,c,p),y=ms(u,c,p[0],p[1]),y<g){for(g=y,_=0;_<i;++_)d[_]=p[_];d.length=i,x+=i}else x+=i*Math.max((Math.sqrt(y)-Math.sqrt(g))/o|0,1);if(pp(r,t-i,e,i,u,c,p),y=ms(u,c,p[0],p[1]),y<g){for(g=y,_=0;_<i;++_)d[_]=p[_];d.length=i}return g}function W1(r,e,t,i,o,l,u,c,d,g,p){p=p||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=Im(r,e,x,i,o,l,u,c,d,g,p),e=x}return g}function X1(r,e,t,i){for(let o=0,l=t.length;o<l;++o)r[e++]=t[o];return e}function Lm(r,e,t,i){for(let o=0,l=t.length;o<l;++o){const u=t[o];for(let c=0;c<i;++c)r[e++]=u[c]}return e}function j1(r,e,t,i,o){o=o||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=Lm(r,e,t[u],i);o[l++]=d,e=d}return o.length=l,o}function Uh(r,e,t,i,o,l,u){const c=(t-e)/i;if(c<3){for(;e<t;e+=i)l[u++]=r[e],l[u++]=r[e+1];return u}const d=new Array(c);d[0]=1,d[c-1]=1;const g=[e,t-i];let p=0;for(;g.length>0;){const _=g.pop(),y=g.pop();let x=0;const E=r[y],w=r[y+1],S=r[_],I=r[_+1];for(let T=y+i;T<_;T+=i){const D=r[T],M=r[T+1],k=r1(D,M,E,w,S,I);k>x&&(p=T,x=k)}x>o&&(d[(p-e)/i]=1,y+i<p&&g.push(y,p),p+i<_&&g.push(p,_))}for(let _=0;_<c;++_)d[_]&&(l[u++]=r[e+_*i],l[u++]=r[e+_*i+1]);return u}function B1(r,e,t,i,o,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=Uh(r,e,p,i,o,l,u),c.push(u),e=p}return u}function yr(r,e){return e*Math.round(r/e)}function b1(r,e,t,i,o,l,u){if(e==t)return u;let c=yr(r[e],o),d=yr(r[e+1],o);e+=i,l[u++]=c,l[u++]=d;let g,p;do if(g=yr(r[e],o),p=yr(r[e+1],o),e+=i,e==t)return l[u++]=g,l[u++]=p,u;while(g==c&&p==d);for(;e<t;){const _=yr(r[e],o),y=yr(r[e+1],o);if(e+=i,_==g&&y==p)continue;const x=g-c,E=p-d,w=_-c,S=y-d;if(x*S==E*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(E<0&&S<E||E==S||E>0&&S>E)){g=_,p=y;continue}l[u++]=g,l[u++]=p,c=g,d=p,g=_,p=y}return l[u++]=g,l[u++]=p,u}function Mm(r,e,t,i,o,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=b1(r,e,p,i,o,l,u),c.push(u),e=p}return u}function fs(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=e;u<t;u+=i)o[l++]=r.slice(u,u+i);return o.length=l,o}function Sa(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];o[l++]=fs(r,e,d,i,o[l]),e=d}return o.length=l,o}function mp(r,e,t,i,o){o=o!==void 0?o:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];o[l++]=d.length===1&&d[0]===e?[]:Sa(r,e,d,i,o[l]),e=d[d.length-1]}return o.length=l,o}function Am(r,e,t,i){let o=0;const l=r[t-i],u=r[t-i+1];let c=0,d=0;for(;e<t;e+=i){const g=r[e]-l,p=r[e+1]-u;o+=d*g-c*p,c=g,d=p}return o/2}function Y1(r,e,t,i){let o=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];o+=Am(r,e,c,i),e=c}return o}class ko extends Gh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new ko(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,o){return o<cm(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Tm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Im(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,o))}getArea(){return Am(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return fs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Uh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new ko(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lm(this.flatCoordinates,0,e,this.stride),this.changed()}}class ja extends Gh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ja(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,o){const l=this.flatCoordinates,u=ms(e,t,l[0],l[1]);if(u<o){const c=this.stride;for(let d=0;d<c;++d)i[d]=l[d];return i.length=c,u}return o}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return dm(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return hm(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=X1(this.flatCoordinates,0,e,this.stride),this.changed()}}function V1(r,e,t,i,o){return!pm(o,function(u){return!Er(r,e,t,i,u[0],u[1])})}function Er(r,e,t,i,o,l){let u=0,c=r[t-i],d=r[t-i+1];for(;e<t;e+=i){const g=r[e],p=r[e+1];d<=l?p>l&&(g-c)*(l-d)-(o-c)*(p-d)>0&&u++:p<=l&&(g-c)*(l-d)-(o-c)*(p-d)<0&&u--,c=g,d=p}return u!==0}function km(r,e,t,i,o,l){if(t.length===0||!Er(r,e,t[0],i,o,l))return!1;for(let u=1,c=t.length;u<c;++u)if(Er(r,t[u-1],t[u],i,o,l))return!1;return!0}function Wh(r,e,t,i,o,l,u){let c,d,g,p,_,y,x;const E=o[l+1],w=[];for(let T=0,D=t.length;T<D;++T){const M=t[T];for(p=r[M-i],y=r[M-i+1],c=e;c<M;c+=i)_=r[c],x=r[c+1],(E<=y&&x<=E||y<=E&&E<=x)&&(g=(E-y)/(x-y)*(_-p)+p,w.push(g)),p=_,y=x}let S=NaN,I=-1/0;for(w.sort(ai),p=w[0],c=1,d=w.length;c<d;++c){_=w[c];const T=Math.abs(_-p);T>I&&(g=(p+_)/2,km(r,e,t,i,g,E)&&(S=g,I=T)),p=_}return isNaN(S)&&(S=o[l]),u?(u.push(S,E,I),u):[S,E,I]}function K1(r,e,t,i,o){let l=[];for(let u=0,c=t.length;u<c;++u){const d=t[u];l=Wh(r,e,d,i,o,2*u,l),e=d[d.length-1]}return l}function Z1(r,e,t,i,o){let l;for(e+=i;e<t;e+=i)if(l=o(r.slice(e-i,e),r.slice(e,e+i)),l)return l;return!1}function Pm(r,e,t,i,o){const l=gm($t(),r,e,t,i);return Xt(o,l)?hs(o,l)||l[0]>=o[0]&&l[2]<=o[2]||l[1]>=o[1]&&l[3]<=o[3]?!0:Z1(r,e,t,i,function(u,c){return Zy(o,u,c)}):!1}function Dm(r,e,t,i,o){return!!(Pm(r,e,t,i,o)||Er(r,e,t,i,o[0],o[1])||Er(r,e,t,i,o[0],o[3])||Er(r,e,t,i,o[2],o[1])||Er(r,e,t,i,o[2],o[3]))}function H1(r,e,t,i,o){if(!Dm(r,e,t[0],i,o))return!1;if(t.length===1)return!0;for(let l=1,u=t.length;l<u;++l)if(V1(r,t[l-1],t[l],i,o)&&!Pm(r,t[l-1],t[l],i,o))return!1;return!0}function $1(r,e,t,i){for(;e<t-i;){for(let o=0;o<i;++o){const l=r[e+o];r[e+o]=r[t-i+o],r[t-i+o]=l}e+=i,t-=i}}function Xh(r,e,t,i){let o=0,l=r[t-i],u=r[t-i+1];for(;e<t;e+=i){const c=r[e],d=r[e+1];o+=(c-l)*(d+u),l=c,u=d}return o===0?void 0:o>0}function q1(r,e,t,i,o){o=o!==void 0?o:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=Xh(r,e,c,i);if(l===0){if(o&&d||!o&&!d)return!1}else if(o&&!d||!o&&d)return!1;e=c}return!0}function _p(r,e,t,i,o){o=o!==void 0?o:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=Xh(r,e,c,i);(l===0?o&&d||!o&&!d:o&&!d||!o&&d)&&$1(r,e,c,i),e=c}return e}function Q1(r,e){const t=[];let i=0,o=0,l;for(let u=0,c=e.length;u<c;++u){const d=e[u],g=Xh(r,i,d,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(o,u+1));else{if(t.length===0)continue;t[t.length-1].push(e[o])}o=u+1,i=d}return t}class Po extends Gh{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Rh(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Po(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,o){return o<cm(this.getExtent(),e,t)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(U1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),W1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,o))}containsXY(e,t){return km(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Y1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),_p(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Sa(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Sr(this.getExtent());this.flatInteriorPoint_=Wh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ja(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new ko(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,o=[];let l=0;for(let u=0,c=i.length;u<c;++u){const d=i[u],g=new ko(t.slice(l,d),e);o.push(g),l=d}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;q1(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_p(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Mm(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Po(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return H1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=j1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function yp(r){if(Bo(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],i=r[2],o=r[3],l=[e,t,e,o,i,o,i,t,e,t];return new Po(l,"XY",[l.length])}const cn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},we={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Do={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var dt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};dt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};dt.max=dt.whitepoint[2].D65;dt.rgb=function(r,e){e=e||dt.whitepoint[2].E;var t=r[0]/e[0],i=r[1]/e[1],o=r[2]/e[2],l,u,c;return l=t*3.240969941904521+i*-1.537383177570093+o*-.498610760293,u=t*-.96924363628087+i*1.87596750150772+o*.041555057407175,c=t*.055630079696993+i*-.20397695888897+o*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),[l*255,u*255,c*255]};Do.xyz=function(r,e){var t=r[0]/255,i=r[1]/255,o=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var l=t*.41239079926595+i*.35758433938387+o*.18048078840183,u=t*.21263900587151+i*.71516867876775+o*.072192315360733,c=t*.019330818715591+i*.11919477979462+o*.95053215224966;return e=e||dt.whitepoint[2].E,[l*e[0],u*e[1],c*e[2]]};const jh={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var i,o,l,u,c,d,g,p,_,y,x,E,w;if(l=r[0],u=r[1],c=r[2],l===0)return[0,0,0];var S=.0011070564598794539;return e=e||"D65",t=t||2,_=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),i=u/(13*l)+E||0,o=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*S,d=g*9*i/(4*o)||0,p=g*(12-3*i-20*o)/(4*o)||0,[d,g,p]}};dt.luv=function(r,e,t){var i,o,l,u,c,d,g,p,_,y,x,E,w,S=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,_=dt.whitepoint[t][e][0],y=dt.whitepoint[t][e][1],x=dt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),d=r[0],g=r[1],p=r[2],i=4*d/(d+15*g+3*p)||0,o=9*g/(d+15*g+3*p)||0;var T=g/y;return l=T<=S?I*T:116*Math.pow(T,1/3)-16,u=13*l*(i-E),c=13*l*(o-w),[l,u,c]};var Om={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],i=r[2],o,l,u;return u=i/360*2*Math.PI,o=t*Math.cos(u),l=t*Math.sin(u),[e,o,l]},xyz:function(r){return jh.xyz(Om.luv(r))}};jh.lchuv=function(r){var e=r[0],t=r[1],i=r[2],o=Math.sqrt(t*t+i*i),l=Math.atan2(i,t),u=l*360/2/Math.PI;return u<0&&(u+=360),[e,o,u]};dt.lchuv=function(r){return jh.lchuv(dt.luv(r))};const vp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Ep={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function J1(r){var p,_;var e,t=[],i=1,o;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),vp[r])t=vp[r].slice(),o="rgb";else if(r==="transparent")i=0,o="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),u=l.length,c=u<=4;i=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],u===4&&(i=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],u===8&&(i=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var d=e[1];o=d.replace(/a$/,"");var g=o==="cmyk"?4:o==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),o==="color"&&(o=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:o==="rgb"?y*255:o[0]==="h"||o[0]==="l"&&!x?y*100:o==="lab"?y*125:o==="lch"?x<2?y*150:y*360:o[0]==="o"&&!x?y:o==="oklab"?y*.4:o==="oklch"?x<2?y*.4:y*360:y;if(o[x]==="h"||x===2&&o[o.length-1]==="h"){if(Ep[y]!==void 0)return Ep[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),i=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),o=((_=(p=r.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:o,values:t,alpha:i}}const jc={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,i=r[2]/100,o,l,u,c,d,g=0;if(t===0)return d=i*255,[d,d,d];for(l=i<.5?i*(1+t):i+t-i*t,o=2*i-l,c=[0,0,0];g<3;)u=e+1/3*-(g-1),u<0?u++:u>1&&u--,d=6*u<1?o+(l-o)*6*u:2*u<1?l:3*u<2?o+(l-o)*(2/3-u)*6:o,c[g++]=d*255;return c}};Do.hsl=function(r){var e=r[0]/255,t=r[1]/255,i=r[2]/255,o=Math.min(e,t,i),l=Math.max(e,t,i),u=l-o,c,d,g;return l===o?c=0:e===l?c=(t-i)/u:t===l?c=2+(i-e)/u:i===l&&(c=4+(e-t)/u),c=Math.min(c*60,360),c<0&&(c+=360),g=(o+l)/2,l===o?d=0:g<=.5?d=u/(l+o):d=u/(2-l-o),[c,d*100,g*100]};function ev(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=J1(r);if(!t.space)return[];const i=t.space[0]==="h"?jc.min:Do.min,o=t.space[0]==="h"?jc.max:Do.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],i[0]),o[0]),e[1]=Math.min(Math.max(t.values[1],i[1]),o[1]),e[2]=Math.min(Math.max(t.values[2],i[2]),o[2]),t.space[0]==="h"&&(e=jc.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const Bh=[NaN,NaN,NaN,0];function tv(r){return typeof r=="string"?r:Yh(r)}const nv=1024,po={};let Bc=0;function iv(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function xp(r){const e=dt.lchuv(Do.xyz(r));return e[3]=r[3],e}function rv(r){const e=dt.rgb(Om.xyz(r));return e[3]=r[3],e}function bh(r){if(r==="none")return Bh;if(po.hasOwnProperty(r))return po[r];if(Bc>=nv){let t=0;for(const i in po)t++&3||(delete po[i],--Bc)}const e=ev(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return Fm(e),po[r]=e,++Bc,e}function Rs(r){return Array.isArray(r)?r:bh(r)}function Fm(r){return r[0]=Ze(r[0]+.5|0,0,255),r[1]=Ze(r[1]+.5|0,0,255),r[2]=Ze(r[2]+.5|0,0,255),r[3]=Ze(r[3],0,1),r}function Yh(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const o=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+o+")"}const qi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",sv=qi.includes("firefox"),ov=qi.includes("safari")&&!qi.includes("chrom");ov&&(qi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(qi));const lv=qi.includes("webkit")&&!qi.includes("edge"),Nm=qi.includes("macintosh"),zm=typeof devicePixelRatio<"u"?devicePixelRatio:1,Vh=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Gm=typeof Image<"u"&&Image.prototype.decode,Um=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function et(r,e,t,i){let o;return t&&t.length?o=t.shift():Vh?o=new OffscreenCanvas(r||300,e||300):o=document.createElement("canvas"),r&&(o.width=r),e&&(o.height=e),o.getContext("2d",i)}let bc;function Ca(){return bc||(bc=et(1,1)),bc}function Ba(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function wp(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function av(r){for(;r.lastChild;)r.lastChild.remove()}function uv(r,e){const t=r.childNodes;for(let i=0;;++i){const o=t[i],l=e[i];if(!o&&!l)break;if(o!==l){if(!o){r.appendChild(l);continue}if(!l){r.removeChild(o),--i;continue}r.insertBefore(l,o)}}}function cv(r,e,t){const i=r;let o=!0,l=!1,u=!1;const c=[_a(i,ve.LOAD,function(){u=!0,l||e()})];return i.src&&Gm?(l=!0,i.decode().then(function(){o&&e()}).catch(function(d){o&&(u?e():t())})):c.push(_a(i,ve.ERROR,t)),function(){o=!1,c.forEach(We)}}function hv(r,e){return new Promise((t,i)=>{function o(){u(),t(r)}function l(){u(),i(new Error("Image load error"))}function u(){r.removeEventListener("load",o),r.removeEventListener("error",l)}r.addEventListener("load",o),r.addEventListener("error",l)})}function dv(r,e){return e&&(r.src=e),r.src&&Gm?new Promise((t,i)=>r.decode().then(()=>t(r)).catch(o=>r.complete&&r.width?t(r):i(o))):hv(r)}class fv{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const o=Yc(e,t,i);return o in this.cache_?this.cache_[o]:null}getPattern(e,t,i){const o=Yc(e,t,i);return o in this.patternCache_?this.patternCache_[o]:null}set(e,t,i,o,l){const u=Yc(e,t,i),c=u in this.cache_;this.cache_[u]=o,l&&(o.getImageState()===we.IDLE&&o.load(),o.getImageState()===we.LOADING?o.ready().then(()=>{this.patternCache_[u]=Ca().createPattern(o.getImage(1),"repeat")}):this.patternCache_[u]=Ca().createPattern(o.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Yc(r,e,t){const i=t?Rs(t):"null";return e+":"+r+":"+i}const hn=new fv;let mo=null;class Wm extends Fa{constructor(e,t,i,o,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=l,this.imageState_=o===void 0?we.IDLE:o,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===we.LOADED){mo||(mo=et(1,1,void 0,{willReadFrequently:!0})),mo.drawImage(this.image_,0,0);try{mo.getImageData(0,0,1,1),this.tainted_=!1}catch{mo=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ve.CHANGE)}handleImageError_(){this.imageState_=we.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=we.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=et(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===we.IDLE){this.image_||this.initializeImage_(),this.imageState_=we.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&dv(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==we.LOADED)return;const t=this.image_,i=et(Math.ceil(t.width*e),Math.ceil(t.height*e)),o=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=tv(this.color_),i.fillRect(0,0,o.width/e,o.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=o}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===we.LOADED||this.imageState_===we.ERROR)e();else{const t=()=>{(this.imageState_===we.LOADED||this.imageState_===we.ERROR)&&(this.removeEventListener(ve.CHANGE,t),e())};this.addEventListener(ve.CHANGE,t)}})),this.ready_}}function Kh(r,e,t,i,o,l){let u=e===void 0?void 0:hn.get(e,t,o);return u||(u=new Wm(r,r&&"src"in r?r.src||void 0:e,t,i,o),hn.set(e,t,o,u,l)),l&&u&&!hn.getPattern(e,t,o)&&hn.set(e,t,o,u,l),u}class Vo{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Vo({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Kh(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===we.IDLE&&t.load(),t.getImageState()===we.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?De(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Rs(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Sp(r,e,t,i,o,l,u){let c,d;const g=(t-e)/i;if(g===1)c=e;else if(g===2)c=e,d=o;else if(g!==0){let p=r[e],_=r[e+1],y=0;const x=[0];for(let S=e+i;S<t;S+=i){const I=r[S],T=r[S+1];y+=Math.sqrt((I-p)*(I-p)+(T-_)*(T-_)),x.push(y),p=I,_=T}const E=o*y,w=Py(x,E);w<0?(d=(E-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*i):c=e+w*i}u=u>1?u:2,l=l||new Array(u);for(let p=0;p<u;++p)l[p]=c===void 0?NaN:d===void 0?r[c+p]:un(r[c+p],r[c+i+p],d);return l}function gv(r,e,t,i){let o=r[e],l=r[e+1],u=0;for(let c=e+i;c<t;c+=i){const d=r[c],g=r[c+1];u+=Math.sqrt((d-o)*(d-o)+(g-l)*(g-l)),o=d,l=g}return u}class ba{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new ba({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Cp(r){return r[0]>0&&r[1]>0}function pv(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Bt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class Ya{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Ya({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ae()}getImage(e){return Ae()}getHitDetectionImage(){return Ae()}getPixelRatio(e){return 1}getImageState(){return Ae()}getImageSize(){return Ae()}getOrigin(){return Ae()}getSize(){return Ae()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e)}listenImageChange(e){Ae()}load(){Ae()}unlistenImageChange(e){Ae()}ready(){return Promise.resolve()}}function Bn(r){return r?Array.isArray(r)?Yh(r):typeof r=="object"&&"src"in r?mv(r):r:null}function mv(r){if(!r.offset||!r.size)return hn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=hn.getPattern(e,void 0,r.color);if(t)return t;const i=hn.get(r.src,"anonymous",null);if(i.getImageState()!==we.LOADED)return null;const o=et(r.size[0],r.size[1]);return o.drawImage(i.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Kh(o.canvas,e,void 0,we.LOADED,r.color,!0),hn.getPattern(e,void 0,r.color)}const ca="ol-hidden",Va="ol-unselectable",Zh="ol-control",Rp="ol-collapsed",_v=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Tp=["style","variant","weight","size","lineHeight","family"],Xm=function(r){const e=r.match(_v);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,o=Tp.length;i<o;++i){const l=e[i+1];l!==void 0&&(t[Tp[i]]=l)}return t.families=t.family.split(/,\s?/),t},jm="10px sans-serif",Ut="#000",Ts="round",ui=[],ci=0,Is="round",Oo=10,Fo="#000",No="center",Ra="middle",xr=[0,0,0,0],zo=1,oi=new bn;let ls=null,fh;const gh={},yv=function(){const e="32px ",t=["monospace","serif"],i=t.length,o="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(g,p,_){let y=!0;for(let x=0;x<i;++x){const E=t[x];if(u=Ta(g+" "+p+" "+e+E,o),_!=E){const w=Ta(g+" "+p+" "+e+_+","+E,o);y=y&&w!=u}}return!!y}function d(){let g=!0;const p=oi.getKeys();for(let _=0,y=p.length;_<y;++_){const x=p[_];if(oi.get(x)<100){const[E,w,S]=x.split(`
`);c(E,w,S)?(Wo(gh),ls=null,fh=void 0,oi.set(x,100)):(oi.set(x,oi.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const p=Xm(g);if(!p)return;const _=p.families;for(let y=0,x=_.length;y<x;++y){const E=_[y],w=p.style+`
`+p.weight+`
`+E;oi.get(w)===void 0&&(oi.set(w,100,!0),c(p.style,p.weight,E)||(oi.set(w,0,!0),l===void 0&&(l=setInterval(d,32))))}}}(),vv=function(){let r;return function(e){let t=gh[e];if(t==null){if(Vh){const i=Xm(e),o=Bm(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);gh[e]=t}return t}}();function Bm(r,e){return ls||(ls=et(1,1)),r!=fh&&(ls.font=r,fh=ls.font),ls.measureText(e)}function Ta(r,e){return Bm(r,e).width}function Ip(r,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((o,l)=>Math.max(o,Ta(r,l)),0);return t[e]=i,i}function Ev(r,e){const t=[],i=[],o=[];let l=0,u=0,c=0,d=0;for(let g=0,p=e.length;g<=p;g+=2){const _=e[g];if(_===`
`||g===p){l=Math.max(l,u),o.push(u),u=0,c+=d,d=0;continue}const y=e[g+1]||r.font,x=Ta(y,_);t.push(x),u+=x;const E=vv(y);i.push(E),d=Math.max(d,E)}return{width:l,height:c,widths:t,heights:i,lineWidths:o}}function xv(r,e,t,i,o,l,u,c,d,g,p){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=_=>_.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),i.contextInstructions?(r.translate(d,g),r.scale(p[0],p[1]),wv(i,r)):p[0]<0||p[1]<0?(r.translate(d,g),r.scale(p[0],p[1]),r.drawImage(i,o,l,u,c,0,0,u,c)):r.drawImage(i,o,l,u,c,d,g,u*p[0],c*p[1]),r.restore()}function wv(r,e){const t=r.contextInstructions;for(let i=0,o=t.length;i<o;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class Ka extends Ya{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?we.LOADING:we.LOADED,this.imageState_===we.LOADING&&this.ready().then(()=>this.imageState_=we.LOADED),this.render()}clone(){const e=this.getScale(),t=new Ka({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,u;const t=(l=this.fill_)==null?void 0:l.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let o=(u=hn.get(i,null,null))==null?void 0:u.getImage(1);if(!o){const c=this.renderOptions_,d=Math.ceil(c.size*e),g=et(d,d);this.draw_(c,g,e),o=g.canvas,hn.set(i,null,null,new Wm(o,void 0,null,we.LOADED,null))}return o}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let o=this.radius,l=this.radius2_===void 0?o:this.radius2_;if(o<l){const X=o;o=l,l=X}const u=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/u,d=l*Math.sin(c),g=Math.sqrt(l*l-d*d),p=o-g,_=Math.sqrt(d*d+p*p),y=_/d;if(e==="miter"&&y<=i)return y*t;const x=t/2/y,E=t/2*(p/_),S=Math.sqrt((o+x)*(o+x)+E*E)-o;if(this.radius2_===void 0||e==="bevel")return S*2;const I=o*Math.sin(c),T=Math.sqrt(o*o-I*I),D=l-T,k=Math.sqrt(I*I+D*D)/I;if(k<=i){const X=k*t/2-l-o;return 2*Math.max(S,X)}return S*2}createRenderOptions(){let e=Ts,t=Is,i=0,o=null,l=0,u,c=0;this.stroke_&&(u=Bn(this.stroke_.getColor()??Fo),c=this.stroke_.getWidth()??zo,o=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Is,e=this.stroke_.getLineCap()??Ts,i=this.stroke_.getMiterLimit()??Oo);const d=this.calculateLineJoinSize_(t,c,i),g=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*g+d);return{strokeStyle:u,strokeWidth:c,size:p,lineCap:e,lineDash:o,lineDashOffset:l,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let o=this.fill_.getColor();o===null&&(o=Ut),t.fillStyle=Bn(o),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),o=0;typeof i=="string"&&(i=Rs(i)),i===null?o=1:Array.isArray(i)&&(o=i.length===4?i[3]:1),o===0&&(t=et(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,u=2*Math.PI/t;for(let c=0;c<t;c++){const d=l+c*u,g=c%2===0?i:o;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ut,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Za extends Ka{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Za({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class $i{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Lp,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new $i({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Lp,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Sv(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(ke(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let Vc=null;function bm(r,e){if(!Vc){const t=new Vo({color:"rgba(255,255,255,0.4)"}),i=new ba({color:"#3399CC",width:1.25});Vc=[new $i({image:new Za({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Vc}function Lp(r){return r.getGeometry()}const Cv="#333";class Hh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Bt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Vo({color:Cv}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Hh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Ne={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Ym extends bn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ne.OPACITY]=e.opacity!==void 0?e.opacity:1,ke(typeof t[Ne.OPACITY]=="number","Layer opacity must be a number"),t[Ne.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ne.Z_INDEX]=e.zIndex,t[Ne.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ne.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ne.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ne.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ze(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ae()}getLayerStatesArray(e){return Ae()}getExtent(){return this.get(Ne.EXTENT)}getMaxResolution(){return this.get(Ne.MAX_RESOLUTION)}getMinResolution(){return this.get(Ne.MIN_RESOLUTION)}getMinZoom(){return this.get(Ne.MIN_ZOOM)}getMaxZoom(){return this.get(Ne.MAX_ZOOM)}getOpacity(){return this.get(Ne.OPACITY)}getSourceState(){return Ae()}getVisible(){return this.get(Ne.VISIBLE)}getZIndex(){return this.get(Ne.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ne.EXTENT,e)}setMaxResolution(e){this.set(Ne.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ne.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ne.MAX_ZOOM,e)}setMinZoom(e){this.set(Ne.MIN_ZOOM,e)}setOpacity(e){ke(typeof e=="number","Layer opacity must be a number"),this.set(Ne.OPACITY,e)}setVisible(e){this.set(Ne.VISIBLE,e)}setZIndex(e){this.set(Ne.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const wt={ANIMATING:0,INTERACTING:1},Rn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Rv=42,$h=256;function Mp(r,e,t){return function(i,o,l,u,c){if(!i)return;if(!o&&!e)return i;const d=e?0:l[0]*o,g=e?0:l[1]*o,p=c?c[0]:0,_=c?c[1]:0;let y=r[0]+d/2+p,x=r[2]-d/2+p,E=r[1]+g/2+_,w=r[3]-g/2+_;y>x&&(y=(x+y)/2,x=y),E>w&&(E=(w+E)/2,w=E);let S=Ze(i[0],y,x),I=Ze(i[1],E,w);if(u&&t&&o){const T=30*o;S+=-T*Math.log(1+Math.max(0,y-i[0])/T)+T*Math.log(1+Math.max(0,i[0]-x)/T),I+=-T*Math.log(1+Math.max(0,E-i[1])/T)+T*Math.log(1+Math.max(0,i[1]-w)/T)}return[S,I]}}function Tv(r){return r}function qh(r,e,t,i){const o=Te(e)/t[0],l=rt(e)/t[1];return i?Math.min(r,Math.max(o,l)):Math.min(r,Math.min(o,l))}function Qh(r,e,t){let i=Math.min(r,e);const o=50;return i*=Math.log(1+o*Math.max(0,r/e-1))/o+1,t&&(i=Math.max(i,t),i/=Math.log(1+o*Math.max(0,t/r-1))/o+1),Ze(i,t/2,e*2)}function Iv(r,e,t,i){return e=e!==void 0?e:!0,function(o,l,u,c){if(o!==void 0){const d=r[0],g=r[r.length-1],p=t?qh(d,t,u,i):d;if(c)return e?Qh(o,p,g):Ze(o,g,p);const _=Math.min(p,o),y=Math.floor(Ch(r,_,l));return r[y]>p&&y<r.length-1?r[y+1]:r[y]}}}function Lv(r,e,t,i,o,l){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(u,c,d,g){if(u!==void 0){const p=o?qh(e,o,d,l):e;if(g)return i?Qh(u,p,t):Ze(u,t,p);const _=1e-9,y=Math.ceil(Math.log(e/p)/Math.log(r)-_),x=-c*(.5-_)+.5,E=Math.min(p,u),w=Math.floor(Math.log(e/E)/Math.log(r)+x),S=Math.max(y,w),I=e/Math.pow(r,S);return Ze(I,t,p)}}}function Ap(r,e,t,i,o){return t=t!==void 0?t:!0,function(l,u,c,d){if(l!==void 0){const g=i?qh(r,i,c,o):r;return!t||!d?Ze(l,e,g):Qh(l,g,e)}}}function Jh(r){if(r!==void 0)return 0}function kp(r){if(r!==void 0)return r}function Mv(r){const e=2*Math.PI/r;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Av(r){const e=Zi(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}function Vm(r){return Math.pow(r,3)}function Ls(r){return 1-Vm(1-r)}function kv(r){return 3*r*r-2*r*r*r}function Pv(r){return r}const Kc=0;class Wn extends bn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=zh(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&T1(),e.center&&(e.center=si(e.center,this.projection_)),e.extent&&(e.extent=Vi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Rn)delete t[c];this.setProperties(t,!0);const i=Ov(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const o=Dv(e),l=i.constraint,u=Fv(e);this.constraints_={center:o,resolution:l,rotation:u},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const o=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),u=l/2*(o[3]-t[3]+t[1]-o[1]),c=l/2*(o[0]-t[0]+t[2]-o[2]);this.setCenterInternal([i[0]+u,i[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let o=arguments[i];o.center&&(o=Object.assign({},o),o.center=si(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=si(o.anchor,this.getProjection())),t[i]=o}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let o=0;for(;o<t&&!this.isDef();++o){const p=arguments[o];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(o===t){i&&ha(i,!0);return}let l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,d=this.targetRotation_;const g=[];for(;o<t;++o){const p=arguments[o],_={start:l,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||kv,callback:i};if(p.center&&(_.sourceCenter=u,_.targetCenter=p.center.slice(),u=_.targetCenter),p.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(p.zoom),c=_.targetResolution):p.resolution&&(_.sourceResolution=c,_.targetResolution=p.resolution,c=_.targetResolution),p.rotation!==void 0){_.sourceRotation=d;const y=_s(p.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+y,d=_.targetRotation}Nv(_)?_.complete=!0:l+=_.duration,g.push(_)}this.animations_.push(g),this.setHint(wt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[wt.ANIMATING]>0}getInteracting(){return this.hints_[wt.INTERACTING]>0}cancelAnimations(){this.setHint(wt.ANIMATING,-this.hints_[wt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const o=this.animations_[t];if(o[0].callback&&ha(o[0].callback,!1),!e)for(let l=0,u=o.length;l<u;++l){const c=o[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const o=this.animations_[i];let l=!0;for(let u=0,c=o.length;u<c;++u){const d=o[u];if(d.complete)continue;const g=e-d.start;let p=d.duration>0?g/d.duration:1;p>=1?(d.complete=!0,p=1):l=!1;const _=d.easing(p);if(d.sourceCenter){const y=d.sourceCenter[0],x=d.sourceCenter[1],E=d.targetCenter[0],w=d.targetCenter[1];this.nextCenter_=d.targetCenter;const S=y+_*(E-y),I=x+_*(w-x);this.targetCenter_=[S,I]}if(d.sourceResolution&&d.targetResolution){const y=_===1?d.targetResolution:d.sourceResolution+_*(d.targetResolution-d.sourceResolution);if(d.anchor){const x=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(E,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const y=_===1?_s(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+_*(d.targetRotation-d.sourceRotation);if(d.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(l){this.animations_[i]=null,this.setHint(wt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=o[0].callback;u&&ha(u,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-t[0],o[1]-t[1]],Dh(i,e-this.getRotation()),o1(i,t)),i}calculateCenterZoom(e,t){let i;const o=this.getCenterInternal(),l=this.getResolution();if(o!==void 0&&l!==void 0){const u=t[0]-e*(t[0]-o[0])/l,c=t[1]-e*(t[1]-o[1])/l;i=[u,c]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],o=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(o*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&dh(e,this.getProjection())}getCenterInternal(){return this.get(Rn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return wa(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ke(t,"The view center is not defined");const i=this.getResolution();ke(i!==void 0,"The view resolution is not defined");const o=this.getRotation();return ke(o!==void 0,"The view rotation is not defined"),lh(t,i,o,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Rn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Vi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Te(e)/t[0],o=rt(e)/t[1];return Math.max(i,o)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(t/i)/Math.log(e);return function(l){return t/Math.pow(e,l*o)}}getRotation(){return this.get(Rn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,l=Math.log(i/o)/t;return function(u){return Math.log(i/u)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let o=this.getCenterInternal();const l=this.padding_;if(l){const u=this.getViewportSizeMinusPadding_();o=Zc(o,this.getViewportSize_(),[u[0]/2+l[3],u[1]/2+l[0]],t,i)}return{center:o.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,o;if(this.resolutions_){const l=Ch(this.resolutions_,e,1);t=l,i=this.resolutions_[l],l==this.resolutions_.length-1?o=2:o=i/this.resolutions_[l+1]}else i=this.maxResolution_,o=this.zoomFactor_;return t+Math.log(i/e)/Math.log(o)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Ze(Math.floor(e),0,this.resolutions_.length-2),o=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(o,Ze(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ke(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ke(!Bo(e),"Cannot fit empty extent provided as `geometry`");const o=Vi(e,this.getProjection());i=yp(o)}else if(e.getType()==="Circle"){const o=Vi(e.getExtent(),this.getProjection());i=yp(o),i.rotate(this.getRotation(),Sr(o))}else{const o=xa();o?i=e.clone().transform(o,this.getProjection()):i=e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),o=Math.sin(-t),l=e.getFlatCoordinates(),u=e.getStride();let c=1/0,d=1/0,g=-1/0,p=-1/0;for(let _=0,y=l.length;_<y;_+=u){const x=l[_]*i-l[_+1]*o,E=l[_]*o+l[_+1]*i;c=Math.min(c,x),d=Math.min(d,E),g=Math.max(g,x),p=Math.max(p,E)}return[c,d,g,p]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const o=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let u;t.minResolution!==void 0?u=t.minResolution:t.maxZoom!==void 0?u=this.getResolutionForZoom(t.maxZoom):u=0;const c=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(c,[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);d=isNaN(d)?u:Math.max(d,u),d=this.getConstrainedResolution(d,l?0:1);const g=this.getRotation(),p=Math.sin(g),_=Math.cos(g),y=Sr(c);y[0]+=(o[1]-o[3])/2*d,y[1]+=(o[0]-o[2])/2*d;const x=y[0]*_-y[1]*p,E=y[1]*_+y[0]*p,w=this.getConstrainedCenter([x,E],d),S=t.callback?t.callback:xs;t.duration!==void 0?this.animateInternal({resolution:d,center:w,duration:t.duration,easing:t.easing},S):(this.targetResolution_=d,this.targetCenter_=w,this.applyTargetState_(!1,!0),ha(S,!0))}centerOn(e,t,i){this.centerOnInternal(si(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(Zc(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,o){let l;const u=this.padding_;if(u&&e){const c=this.getViewportSizeMinusPadding_(-i),d=Zc(e,o,[c[0]/2+u[3],c[1]/2+u[0]],t,i);l=[e[0]-d[0],e[1]-d[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=dh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&si(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,o,i);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=si(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(o,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&si(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,o=this.constraints_.rotation(this.targetRotation_,i),l=this.getViewportSize_(o),u=this.constraints_.resolution(this.targetResolution_,0,l,i),c=this.constraints_.center(this.targetCenter_,u,l,i,this.calculateCenterShift(this.targetCenter_,u,o,l));this.get(Rn.ROTATION)!==o&&this.set(Rn.ROTATION,o),this.get(Rn.RESOLUTION)!==u&&(this.set(Rn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Rn.CENTER)||!ya(this.get(Rn.CENTER),c))&&this.set(Rn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const o=t||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,o,u),d=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=d,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!ya(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:d,resolution:c,duration:e,easing:Ls,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(wt.INTERACTING,1)}endInteraction(e,t,i){i=i&&si(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(wt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function ha(r,e){setTimeout(function(){r(e)},0)}function Dv(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Mp(r.extent,r.constrainOnlyCenter,t)}const e=zh(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Mp(t,!1,!1)}return Tv}function Ov(r){let e,t,i,u=r.minZoom!==void 0?r.minZoom:Kc,c=r.maxZoom!==void 0?r.maxZoom:28;const d=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,p=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,_=r.showFullExtent!==void 0?r.showFullExtent:!1,y=zh(r.projection,"EPSG:3857"),x=y.getExtent();let E=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(E=!1,w=x),r.resolutions!==void 0){const S=r.resolutions;t=S[u],i=S[c]!==void 0?S[c]:S[S.length-1],r.constrainResolution?e=Iv(S,p,!E&&w,_):e=Ap(t,i,p,!E&&w,_)}else{const I=(x?Math.max(Te(x),rt(x)):360*Ah.degrees/y.getMetersPerUnit())/$h/Math.pow(2,Kc),T=I/Math.pow(2,28-Kc);t=r.maxResolution,t!==void 0?u=0:t=I/Math.pow(d,u),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=t/Math.pow(d,c):i=I/Math.pow(d,c):i=T),c=u+Math.floor(Math.log(t/i)/Math.log(d)),i=t/Math.pow(d,c-u),r.constrainResolution?e=Lv(d,t,i,p,!E&&w,_):e=Ap(t,i,p,!E&&w,_)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:u,zoomFactor:d}}function Fv(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?Av():t===!1?kp:typeof t=="number"?Mv(t):kp}return Jh}function Nv(r){return!(r.sourceCenter&&r.targetCenter&&!ya(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Zc(r,e,t,i,o){const l=Math.cos(-o);let u=Math.sin(-o),c=r[0]*l-r[1]*u,d=r[1]*l+r[0]*u;c+=(e[0]/2-t[0])*i,d+=(t[1]-e[1]/2)*i,u=-u;const g=c*l-d*u,p=d*l+c*u;return[g,p]}class Ha extends Ym{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ne.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ne.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(We(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Le(e,ve.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Wn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let o;if(t.layerStatesArray){if(o=t.layerStatesArray.find(u=>u.layer===this),!o)return!1}else o=this.getLayerState();const l=this.getExtent();return ed(o,t.viewState)&&(!l||Xt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const i=e instanceof Wn?e.getViewStateAndExtent():e;let o=t(i);return Array.isArray(o)||(o=[o]),o}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ne.MAP,e)}getMapInternal(){return this.get(Ne.MAP)}setMap(e){this.mapPrecomposeKey_&&(We(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(We(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Le(e,cn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Le(this,ve.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ke(!t.some(o=>o.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Ne.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function ed(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const i=e.zoom;return i>r.minZoom&&i<=r.maxZoom}function Km(r,e,t=0,i=r.length-1,o=zv){for(;i>t;){if(i-t>600){const d=i-t+1,g=e-t+1,p=Math.log(d),_=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*_*(d-_)/d)*(g-d/2<0?-1:1),x=Math.max(t,Math.floor(e-g*_/d+y)),E=Math.min(i,Math.floor(e+(d-g)*_/d+y));Km(r,e,x,E,o)}const l=r[e];let u=t,c=i;for(_o(r,t,e),o(r[i],l)>0&&_o(r,t,i);u<c;){for(_o(r,u,c),u++,c--;o(r[u],l)<0;)u++;for(;o(r[c],l)>0;)c--}o(r[t],l)===0?_o(r,t,c):(c++,_o(r,c,i)),c<=e&&(t=c+1),e<=c&&(i=c-1)}}function _o(r,e,t){const i=r[e];r[e]=r[t],r[t]=i}function zv(r,e){return r<e?-1:r>e?1:0}let Zm=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!fa(e,t))return i;const o=this.toBBox,l=[];for(;t;){for(let u=0;u<t.children.length;u++){const c=t.children[u],d=t.leaf?o(c):c;fa(e,d)&&(t.leaf?i.push(c):$c(e,d)?this._all(c,i):l.push(c))}t=l.pop()}return i}collides(e){let t=this.data;if(!fa(e,t))return!1;const i=[];for(;t;){for(let o=0;o<t.children.length;o++){const l=t.children[o],u=t.leaf?this.toBBox(l):l;if(fa(e,u)){if(t.leaf||$c(e,u))return!0;i.push(l)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=as([]),this}remove(e,t){if(!e)return this;let i=this.data;const o=this.toBBox(e),l=[],u=[];let c,d,g;for(;i||l.length;){if(i||(i=l.pop(),d=l[l.length-1],c=u.pop(),g=!0),i.leaf){const p=Gv(e,i.children,t);if(p!==-1)return i.children.splice(p,1),l.push(i),this._condense(l),this}!g&&!i.leaf&&$c(i,o)?(l.push(i),u.push(c),c=0,d=i,i=i.children[0]):d?(c++,i=d.children[c],g=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,o){const l=i-t+1;let u=this._maxEntries,c;if(l<=u)return c=as(e.slice(t,i+1)),es(c,this.toBBox),c;o||(o=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,o-1))),c=as([]),c.leaf=!1,c.height=o;const d=Math.ceil(l/u),g=d*Math.ceil(Math.sqrt(u));Pp(e,t,i,g,this.compareMinX);for(let p=t;p<=i;p+=g){const _=Math.min(p+g-1,i);Pp(e,p,_,d,this.compareMinY);for(let y=p;y<=_;y+=d){const x=Math.min(y+d-1,_);c.children.push(this._build(e,y,x,o-1))}}return es(c,this.toBBox),c}_chooseSubtree(e,t,i,o){for(;o.push(t),!(t.leaf||o.length-1===i);){let l=1/0,u=1/0,c;for(let d=0;d<t.children.length;d++){const g=t.children[d],p=Hc(g),_=Xv(e,g)-p;_<u?(u=_,l=p<l?p:l,c=g):_===u&&p<l&&(l=p,c=g)}t=c||t.children[0]}return t}_insert(e,t,i){const o=i?e:this.toBBox(e),l=[],u=this._chooseSubtree(o,this.data,t,l);for(u.children.push(e),Eo(u,o);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(o,l,t)}_split(e,t){const i=e[t],o=i.children.length,l=this._minEntries;this._chooseSplitAxis(i,l,o);const u=this._chooseSplitIndex(i,l,o),c=as(i.children.splice(u,i.children.length-u));c.height=i.height,c.leaf=i.leaf,es(i,this.toBBox),es(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(i,c)}_splitRoot(e,t){this.data=as([e,t]),this.data.height=e.height+1,this.data.leaf=!1,es(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let o,l=1/0,u=1/0;for(let c=t;c<=i-t;c++){const d=vo(e,0,c,this.toBBox),g=vo(e,c,i,this.toBBox),p=jv(d,g),_=Hc(d)+Hc(g);p<l?(l=p,o=c,u=_<u?_:u):p===l&&_<u&&(u=_,o=c)}return o||i-t}_chooseSplitAxis(e,t,i){const o=e.leaf?this.compareMinX:Uv,l=e.leaf?this.compareMinY:Wv,u=this._allDistMargin(e,t,i,o),c=this._allDistMargin(e,t,i,l);u<c&&e.children.sort(o)}_allDistMargin(e,t,i,o){e.children.sort(o);const l=this.toBBox,u=vo(e,0,t,l),c=vo(e,i-t,i,l);let d=da(u)+da(c);for(let g=t;g<i-t;g++){const p=e.children[g];Eo(u,e.leaf?l(p):p),d+=da(u)}for(let g=i-t-1;g>=t;g--){const p=e.children[g];Eo(c,e.leaf?l(p):p),d+=da(c)}return d}_adjustParentBBoxes(e,t,i){for(let o=i;o>=0;o--)Eo(t[o],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():es(e[t],this.toBBox)}};function Gv(r,e,t){if(!t)return e.indexOf(r);for(let i=0;i<e.length;i++)if(t(r,e[i]))return i;return-1}function es(r,e){vo(r,0,r.children.length,e,r)}function vo(r,e,t,i,o){o||(o=as(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let l=e;l<t;l++){const u=r.children[l];Eo(o,r.leaf?i(u):u)}return o}function Eo(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function Uv(r,e){return r.minX-e.minX}function Wv(r,e){return r.minY-e.minY}function Hc(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function da(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Xv(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function jv(r,e){const t=Math.max(r.minX,e.minX),i=Math.max(r.minY,e.minY),o=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,o-t)*Math.max(0,l-i)}function $c(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function fa(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function as(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Pp(r,e,t,i,o){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=i)continue;const u=e+Math.ceil((t-e)/i/2)*i;Km(r,u,e,t,o),l.push(e,u,u,t)}}function Dp(r,e,t,i){return t!==void 0&&i!==void 0?[t/r,i/e]:t!==void 0?t/r:i!==void 0?i/e:1}class Ko extends Ya{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,o=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:o,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const u=e.img!==void 0?e.img:null;let c=e.src;ke(!(c!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&u&&(c=u.src||De(u)),ke(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),ke(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=we.IDLE:u!==void 0&&("complete"in u?u.complete?d=u.src?we.LOADED:we.IDLE:d=we.LOADING:d=we.LOADED),this.color_=e.color!==void 0?Rs(e.color):null,this.iconImage_=Kh(u,c,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,p;if(e.size)[g,p]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)g=_.width,p=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(Dp(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(Dp(g,p,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Ko({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=o[0]),this.anchorYUnits_=="fraction"&&(e[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+o[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==we.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==we.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ve.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ve.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Rr=0;const At=1<<Rr++,Re=1<<Rr++,Wt=1<<Rr++,In=1<<Rr++,Cr=1<<Rr++,xo=1<<Rr++,ga=Math.pow(2,Rr)-1,td={[At]:"boolean",[Re]:"number",[Wt]:"string",[In]:"color",[Cr]:"number[]",[xo]:"size"},Bv=Object.keys(td).map(Number).sort(ai);function bv(r){return r in td}function wo(r){const e=[];for(const t of Bv)So(r,t)&&e.push(td[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function So(r,e){return(r&e)===e}function Gi(r,e){return r===e}class it{constructor(e,t){if(!bv(e))throw new Error(`literal expressions must have a specific type, got ${wo(e)}`);this.type=e,this.value=t}}class Yv{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function Hm(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function ft(r,e,t){switch(typeof r){case"boolean":{if(Gi(e,Wt))return new it(Wt,r?"true":"false");if(!So(e,At))throw new Error(`got a boolean, but expected ${wo(e)}`);return new it(At,r)}case"number":{if(Gi(e,xo))return new it(xo,Bt(r));if(Gi(e,At))return new it(At,!!r);if(Gi(e,Wt))return new it(Wt,r.toString());if(!So(e,Re))throw new Error(`got a number, but expected ${wo(e)}`);return new it(Re,r)}case"string":{if(Gi(e,In))return new it(In,bh(r));if(Gi(e,At))return new it(At,!!r);if(!So(e,Wt))throw new Error(`got a string, but expected ${wo(e)}`);return new it(Wt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return nE(r,e,t);for(const i of r)if(typeof i!="number")throw new Error("expected an array of numbers");if(Gi(e,xo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new it(xo,r)}if(Gi(e,In)){if(r.length===3)return new it(In,[...r,1]);if(r.length===4)return new it(In,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!So(e,Cr))throw new Error(`got an array of numbers, but expected ${wo(e)}`);return new it(Cr,r)}const B={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Vv={[B.Get]:ye(xe(1,1/0),Op),[B.Var]:ye(xe(1,1),Kv),[B.Has]:ye(xe(1,1/0),Op),[B.Id]:ye(Zv,ts),[B.Concat]:ye(xe(2,1/0),Pe(Wt)),[B.GeometryType]:ye(Hv,ts),[B.LineMetric]:ye(ts),[B.Resolution]:ye(ts),[B.Zoom]:ye(ts),[B.Time]:ye(ts),[B.Any]:ye(xe(2,1/0),Pe(At)),[B.All]:ye(xe(2,1/0),Pe(At)),[B.Not]:ye(xe(1,1),Pe(At)),[B.Equal]:ye(xe(2,2),Pe(ga)),[B.NotEqual]:ye(xe(2,2),Pe(ga)),[B.GreaterThan]:ye(xe(2,2),Pe(Re)),[B.GreaterThanOrEqualTo]:ye(xe(2,2),Pe(Re)),[B.LessThan]:ye(xe(2,2),Pe(Re)),[B.LessThanOrEqualTo]:ye(xe(2,2),Pe(Re)),[B.Multiply]:ye(xe(2,1/0),Fp),[B.Coalesce]:ye(xe(2,1/0),Fp),[B.Divide]:ye(xe(2,2),Pe(Re)),[B.Add]:ye(xe(2,1/0),Pe(Re)),[B.Subtract]:ye(xe(2,2),Pe(Re)),[B.Clamp]:ye(xe(3,3),Pe(Re)),[B.Mod]:ye(xe(2,2),Pe(Re)),[B.Pow]:ye(xe(2,2),Pe(Re)),[B.Abs]:ye(xe(1,1),Pe(Re)),[B.Floor]:ye(xe(1,1),Pe(Re)),[B.Ceil]:ye(xe(1,1),Pe(Re)),[B.Round]:ye(xe(1,1),Pe(Re)),[B.Sin]:ye(xe(1,1),Pe(Re)),[B.Cos]:ye(xe(1,1),Pe(Re)),[B.Atan]:ye(xe(1,2),Pe(Re)),[B.Sqrt]:ye(xe(1,1),Pe(Re)),[B.Match]:ye(xe(4,1/0),Np,qv),[B.Between]:ye(xe(3,3),Pe(Re)),[B.Interpolate]:ye(xe(6,1/0),Np,Qv),[B.Case]:ye(xe(3,1/0),$v,Jv),[B.In]:ye(xe(2,2),eE),[B.Number]:ye(xe(1,1/0),Pe(ga)),[B.String]:ye(xe(1,1/0),Pe(ga)),[B.Array]:ye(xe(1,1/0),Pe(Re)),[B.Color]:ye(xe(1,4),Pe(Re)),[B.Band]:ye(xe(1,3),Pe(Re)),[B.Palette]:ye(xe(2,2),tE),[B.ToString]:ye(xe(1,1),Pe(At|Re|Wt|In))};function Op(r,e,t){const i=r.length-1,o=new Array(i);for(let l=0;l<i;++l){const u=r[l+1];switch(typeof u){case"number":{o[l]=new it(Re,u);break}case"string":{o[l]=new it(Wt,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}l===0&&t.properties.add(String(u))}return o}function Kv(r,e,t){const i=r[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new it(Wt,i)]}function Zv(r,e,t){t.featureId=!0}function Hv(r,e,t){t.geometryType=!0}function ts(r,e,t){const i=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function xe(r,e){return function(t,i,o){const l=t[0],u=t.length-1;if(r===e){if(u!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${u}`)}}else if(u<r||u>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${u}`)}}}function Fp(r,e,t){const i=r.length-1,o=new Array(i);for(let l=0;l<i;++l){const u=ft(r[l+1],e,t);o[l]=u}return o}function Pe(r){return function(e,t,i){const o=e.length-1,l=new Array(o);for(let u=0;u<o;++u){const c=ft(e[u+1],r,i);l[u]=c}return l}}function $v(r,e,t){const i=r[0],o=r.length-1;if(o%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${o} instead`)}function Np(r,e,t){const i=r[0],o=r.length-1;if(o%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${o} instead`)}function qv(r,e,t){const i=r.length-1,o=Wt|Re|At,l=ft(r[1],o,t),u=ft(r[r.length-1],e,t),c=new Array(i-2);for(let d=0;d<i-2;d+=2){try{const g=ft(r[d+2],l.type,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=ft(r[d+3],u.type,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[l,...c,u]}function Qv(r,e,t){const i=r[1];let o;switch(i[0]){case"linear":o=1;break;case"exponential":const d=i[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);o=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const l=new it(Re,o);let u;try{u=ft(r[2],Re,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const c=new Array(r.length-3);for(let d=0;d<c.length;d+=2){try{const g=ft(r[d+3],Re,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=ft(r[d+4],e,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[l,u,...c]}function Jv(r,e,t){const i=ft(r[r.length-1],e,t),o=new Array(r.length-1);for(let l=0;l<o.length-1;l+=2){try{const u=ft(r[l+1],At,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l} of case expression: ${u.message}`)}try{const u=ft(r[l+2],i.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of case expression: ${u.message}`)}}return o[o.length-1]=i,o}function eE(r,e,t){let i=r[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let o;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],o=Wt}else o=Re;const l=new Array(i.length);for(let c=0;c<l.length;c++)try{const d=ft(i[c],o,t);l[c]=d}catch(d){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${d.message}`)}return[ft(r[1],o,t),...l]}function tE(r,e,t){let i;try{i=ft(r[1],Re,t)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const o=r[2];if(!Array.isArray(o))throw new Error("the second argument of palette must be an array");const l=new Array(o.length);for(let u=0;u<l.length;u++){let c;try{c=ft(o[u],In,t)}catch(d){throw new Error(`failed to parse color at index ${u} in palette expression: ${d.message}`)}if(!(c instanceof it))throw new Error(`the palette color at index ${u} must be a literal value`);l[u]=c}return[i,...l]}function ye(...r){return function(e,t,i){const o=e[0];let l;for(let u=0;u<r.length;u++){const c=r[u](e,t,i);if(u==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new Yv(t,o,...l)}}function nE(r,e,t){const i=r[0],o=Vv[i];if(!o)throw new Error(`unknown operator: ${i}`);return o(r,e,t)}function $m(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return $m(r.getGeometries()[0]);default:return""}}function qm(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function pi(r,e,t){const i=ft(r,e,t);return An(i)}function An(r,e){if(r instanceof it){if(r.type===In&&typeof r.value=="string"){const i=bh(r.value);return function(){return i}}return function(){return r.value}}const t=r.operator;switch(t){case B.Number:case B.String:case B.Coalesce:return iE(r);case B.Get:case B.Var:case B.Has:return rE(r);case B.Id:return i=>i.featureId;case B.GeometryType:return i=>i.geometryType;case B.Concat:{const i=r.args.map(o=>An(o));return o=>"".concat(...i.map(l=>l(o).toString()))}case B.Resolution:return i=>i.resolution;case B.Any:case B.All:case B.Between:case B.In:case B.Not:return oE(r);case B.Equal:case B.NotEqual:case B.LessThan:case B.LessThanOrEqualTo:case B.GreaterThan:case B.GreaterThanOrEqualTo:return sE(r);case B.Multiply:case B.Divide:case B.Add:case B.Subtract:case B.Clamp:case B.Mod:case B.Pow:case B.Abs:case B.Floor:case B.Ceil:case B.Round:case B.Sin:case B.Cos:case B.Atan:case B.Sqrt:return lE(r);case B.Case:return aE(r);case B.Match:return uE(r);case B.Interpolate:return cE(r);case B.ToString:return hE(r);default:throw new Error(`Unsupported operator ${t}`)}}function iE(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case B.Coalesce:return l=>{for(let u=0;u<i;++u){const c=o[u](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case B.Number:case B.String:return l=>{for(let u=0;u<i;++u){const c=o[u](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function rE(r,e){const i=r.args[0].value;switch(r.operator){case B.Get:return o=>{const l=r.args;let u=o.properties[i];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;u=u[p]}return u};case B.Var:return o=>o.variables[i];case B.Has:return o=>{const l=r.args;if(!(i in o.properties))return!1;let u=o.properties[i];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;if(!u||!Object.hasOwn(u,p))return!1;u=u[p]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function sE(r,e){const t=r.operator,i=An(r.args[0]),o=An(r.args[1]);switch(t){case B.Equal:return l=>i(l)===o(l);case B.NotEqual:return l=>i(l)!==o(l);case B.LessThan:return l=>i(l)<o(l);case B.LessThanOrEqualTo:return l=>i(l)<=o(l);case B.GreaterThan:return l=>i(l)>o(l);case B.GreaterThanOrEqualTo:return l=>i(l)>=o(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function oE(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case B.Any:return l=>{for(let u=0;u<i;++u)if(o[u](l))return!0;return!1};case B.All:return l=>{for(let u=0;u<i;++u)if(!o[u](l))return!1;return!0};case B.Between:return l=>{const u=o[0](l),c=o[1](l),d=o[2](l);return u>=c&&u<=d};case B.In:return l=>{const u=o[0](l);for(let c=1;c<i;++c)if(u===o[c](l))return!0;return!1};case B.Not:return l=>!o[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function lE(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case B.Multiply:return l=>{let u=1;for(let c=0;c<i;++c)u*=o[c](l);return u};case B.Divide:return l=>o[0](l)/o[1](l);case B.Add:return l=>{let u=0;for(let c=0;c<i;++c)u+=o[c](l);return u};case B.Subtract:return l=>o[0](l)-o[1](l);case B.Clamp:return l=>{const u=o[0](l),c=o[1](l);if(u<c)return c;const d=o[2](l);return u>d?d:u};case B.Mod:return l=>o[0](l)%o[1](l);case B.Pow:return l=>Math.pow(o[0](l),o[1](l));case B.Abs:return l=>Math.abs(o[0](l));case B.Floor:return l=>Math.floor(o[0](l));case B.Ceil:return l=>Math.ceil(o[0](l));case B.Round:return l=>Math.round(o[0](l));case B.Sin:return l=>Math.sin(o[0](l));case B.Cos:return l=>Math.cos(o[0](l));case B.Atan:return i===2?l=>Math.atan2(o[0](l),o[1](l)):l=>Math.atan(o[0](l));case B.Sqrt:return l=>Math.sqrt(o[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function aE(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{for(let l=0;l<t-1;l+=2)if(i[l](o))return i[l+1](o);return i[t-1](o)}}function uE(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{const l=i[0](o);for(let u=1;u<t;u+=2)if(l===i[u](o))return i[u+1](o);return i[t-1](o)}}function cE(r,e){const t=r.args.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=An(r.args[o]);return o=>{const l=i[0](o),u=i[1](o);let c,d;for(let g=2;g<t;g+=2){const p=i[g](o);let _=i[g+1](o);const y=Array.isArray(_);if(y&&(_=iv(_)),p>=u)return g===2?_:y?dE(l,u,c,d,p,_):Co(l,u,c,d,p,_);c=p,d=_}return d}}function hE(r,e){const t=r.operator,i=r.args.length,o=new Array(i);for(let l=0;l<i;++l)o[l]=An(r.args[l]);switch(t){case B.ToString:return l=>{const u=o[0](l);return r.args[0].type===In?Yh(u):u.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Co(r,e,t,i,o,l){const u=o-t;if(u===0)return i;const c=e-t,d=r===1?c/u:(Math.pow(r,c)-1)/(Math.pow(r,u)-1);return i+d*(l-i)}function dE(r,e,t,i,o,l){if(o-t===0)return i;const c=xp(i),d=xp(l);let g=d[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const p=[Co(r,e,t,c[0],o,d[0]),Co(r,e,t,c[1],o,d[1]),c[2]+Co(r,e,t,0,o,g),Co(r,e,t,i[3],o,l[3])];return Fm(rv(p))}function fE(r){return!0}function gE(r){const e=Hm(),t=pE(r,e),i=qm();return function(o,l){if(i.properties=o.getPropertiesInternal(),i.resolution=l,e.featureId){const u=o.getId();u!==void 0?i.featureId=u:i.featureId=null}return e.geometryType&&(i.geometryType=$m(o.getGeometry())),t(i)}}function zp(r){const e=Hm(),t=r.length,i=new Array(t);for(let u=0;u<t;++u)i[u]=ph(r[u],e);const o=qm(),l=new Array(t);return function(u,c){if(o.properties=u.getPropertiesInternal(),o.resolution=c,e.featureId){const g=u.getId();g!==void 0?o.featureId=g:o.featureId=null}let d=0;for(let g=0;g<t;++g){const p=i[g](o);p&&(l[d]=p,d+=1)}return l.length=d,l}}function pE(r,e){const t=r.length,i=new Array(t);for(let o=0;o<t;++o){const l=r[o],u="filter"in l?pi(l.filter,At,e):fE;let c;if(Array.isArray(l.style)){const d=l.style.length;c=new Array(d);for(let g=0;g<d;++g)c[g]=ph(l.style[g],e)}else c=[ph(l.style,e)];i[o]={filter:u,styles:c}}return function(o){const l=[];let u=!1;for(let c=0;c<t;++c){const d=i[c].filter;if(d(o)&&!(r[c].else&&u)){u=!0;for(const g of i[c].styles){const p=g(o);p&&l.push(p)}}}return l}}function ph(r,e){const t=Go(r,"",e),i=Uo(r,"",e),o=mE(r,e),l=_E(r,e),u=jt(r,"z-index",e);if(!t&&!i&&!o&&!l&&!ws(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new $i;return function(d){let g=!0;if(t){const p=t(d);p&&(g=!1),c.setFill(p)}if(i){const p=i(d);p&&(g=!1),c.setStroke(p)}if(o){const p=o(d);p&&(g=!1),c.setText(p)}if(l){const p=l(d);p&&(g=!1),c.setImage(p)}return u&&c.setZIndex(u(d)),g?null:c}}function Go(r,e,t){let i;if(e+"fill-pattern-src"in r)i=xE(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;i=nd(r,e+"fill-color",t)}if(!i)return null;const o=new Vo;return function(l){const u=i(l);return u===Bh?null:(o.setColor(u),o)}}function Uo(r,e,t){const i=jt(r,e+"stroke-width",t),o=nd(r,e+"stroke-color",t);if(!i&&!o)return null;const l=li(r,e+"stroke-line-cap",t),u=li(r,e+"stroke-line-join",t),c=Qm(r,e+"stroke-line-dash",t),d=jt(r,e+"stroke-line-dash-offset",t),g=jt(r,e+"stroke-miter-limit",t),p=new ba;return function(_){if(o){const y=o(_);if(y===Bh)return null;p.setColor(y)}if(i&&p.setWidth(i(_)),l){const y=l(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(y)}if(u){const y=u(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(y)}return c&&p.setLineDash(c(_)),d&&p.setLineDashOffset(d(_)),g&&p.setMiterLimit(g(_)),p}}function mE(r,e){const t="text-",i=li(r,t+"value",e);if(!i)return null;const o=Go(r,t,e),l=Go(r,t+"background-",e),u=Uo(r,t,e),c=Uo(r,t+"background-",e),d=li(r,t+"font",e),g=jt(r,t+"max-angle",e),p=jt(r,t+"offset-x",e),_=jt(r,t+"offset-y",e),y=ys(r,t+"overflow",e),x=li(r,t+"placement",e),E=jt(r,t+"repeat",e),w=$a(r,t+"scale",e),S=ys(r,t+"rotate-with-view",e),I=jt(r,t+"rotation",e),T=li(r,t+"align",e),D=li(r,t+"justify",e),M=li(r,t+"baseline",e),k=ys(r,t+"keep-upright",e),X=Qm(r,t+"padding",e),V=qa(r,t+"declutter-mode"),N=new Hh({declutterMode:V});return function(j){if(N.setText(i(j)),o&&N.setFill(o(j)),l&&N.setBackgroundFill(l(j)),u&&N.setStroke(u(j)),c&&N.setBackgroundStroke(c(j)),d&&N.setFont(d(j)),g&&N.setMaxAngle(g(j)),p&&N.setOffsetX(p(j)),_&&N.setOffsetY(_(j)),y&&N.setOverflow(y(j)),x){const b=x(j);if(b!=="point"&&b!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(b)}if(E&&N.setRepeat(E(j)),w&&N.setScale(w(j)),S&&N.setRotateWithView(S(j)),I&&N.setRotation(I(j)),T){const b=T(j);if(b!=="left"&&b!=="center"&&b!=="right"&&b!=="end"&&b!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(b)}if(D){const b=D(j);if(b!=="left"&&b!=="right"&&b!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(b)}if(M){const b=M(j);if(b!=="bottom"&&b!=="top"&&b!=="middle"&&b!=="alphabetic"&&b!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(b)}return X&&N.setPadding(X(j)),k&&N.setKeepUpright(k(j)),N}}function _E(r,e){return"icon-src"in r?yE(r,e):"shape-points"in r?vE(r,e):"circle-radius"in r?EE(r,e):null}function yE(r,e){const t="icon-",i=t+"src",o=Jm(r[i],i),l=Ia(r,t+"anchor",e),u=$a(r,t+"scale",e),c=jt(r,t+"opacity",e),d=Ia(r,t+"displacement",e),g=jt(r,t+"rotation",e),p=ys(r,t+"rotate-with-view",e),_=Up(r,t+"anchor-origin"),y=Wp(r,t+"anchor-x-units"),x=Wp(r,t+"anchor-y-units"),E=RE(r,t+"color"),w=SE(r,t+"cross-origin"),S=CE(r,t+"offset"),I=Up(r,t+"offset-origin"),T=La(r,t+"width"),D=La(r,t+"height"),M=wE(r,t+"size"),k=qa(r,t+"declutter-mode"),X=new Ko({src:o,anchorOrigin:_,anchorXUnits:y,anchorYUnits:x,color:E,crossOrigin:w,offset:S,offsetOrigin:I,height:D,width:T,size:M,declutterMode:k});return function(V){return c&&X.setOpacity(c(V)),d&&X.setDisplacement(d(V)),g&&X.setRotation(g(V)),p&&X.setRotateWithView(p(V)),u&&X.setScale(u(V)),l&&X.setAnchor(l(V)),X}}function vE(r,e){const t="shape-",i=t+"points",o=t+"radius",l=mh(r[i],i),u=mh(r[o],o),c=Go(r,t,e),d=Uo(r,t,e),g=$a(r,t+"scale",e),p=Ia(r,t+"displacement",e),_=jt(r,t+"rotation",e),y=ys(r,t+"rotate-with-view",e),x=La(r,t+"radius2"),E=La(r,t+"angle"),w=qa(r,t+"declutter-mode"),S=new Ka({points:l,radius:u,radius2:x,angle:E,declutterMode:w});return function(I){return c&&S.setFill(c(I)),d&&S.setStroke(d(I)),p&&S.setDisplacement(p(I)),_&&S.setRotation(_(I)),y&&S.setRotateWithView(y(I)),g&&S.setScale(g(I)),S}}function EE(r,e){const t="circle-",i=Go(r,t,e),o=Uo(r,t,e),l=jt(r,t+"radius",e),u=$a(r,t+"scale",e),c=Ia(r,t+"displacement",e),d=jt(r,t+"rotation",e),g=ys(r,t+"rotate-with-view",e),p=qa(r,t+"declutter-mode"),_=new Za({radius:5,declutterMode:p});return function(y){return l&&_.setRadius(l(y)),i&&_.setFill(i(y)),o&&_.setStroke(o(y)),c&&_.setDisplacement(c(y)),d&&_.setRotation(d(y)),g&&_.setRotateWithView(g(y)),u&&_.setScale(u(y)),_}}function jt(r,e,t){if(!(e in r))return;const i=pi(r[e],Re,t);return function(o){return mh(i(o),e)}}function li(r,e,t){if(!(e in r))return null;const i=pi(r[e],Wt,t);return function(o){return Jm(i(o),e)}}function xE(r,e,t){const i=li(r,e+"pattern-src",t),o=Gp(r,e+"pattern-offset",t),l=Gp(r,e+"pattern-size",t),u=nd(r,e+"color",t);return function(c){return{src:i(c),offset:o&&o(c),size:l&&l(c),color:u&&u(c)}}}function ys(r,e,t){if(!(e in r))return null;const i=pi(r[e],At,t);return function(o){const l=i(o);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function nd(r,e,t){if(!(e in r))return null;const i=pi(r[e],In,t);return function(o){return e_(i(o),e)}}function Qm(r,e,t){if(!(e in r))return null;const i=pi(r[e],Cr,t);return function(o){return Zo(i(o),e)}}function Ia(r,e,t){if(!(e in r))return null;const i=pi(r[e],Cr,t);return function(o){const l=Zo(i(o),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function Gp(r,e,t){if(!(e in r))return null;const i=pi(r[e],Cr,t);return function(o){return t_(i(o),e)}}function $a(r,e,t){if(!(e in r))return null;const i=pi(r[e],Cr|Re,t);return function(o){return TE(i(o),e)}}function La(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wE(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Bt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function SE(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Up(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Wp(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function CE(r,e){const t=r[e];if(t!==void 0)return Zo(t,e)}function qa(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function RE(r,e){const t=r[e];if(t!==void 0)return e_(t,e)}function Zo(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let i=0;i<t;++i)if(typeof r[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function Jm(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function mh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function e_(r,e){if(typeof r=="string")return r;const t=Zo(r,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function t_(r,e){const t=Zo(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function TE(r,e){return typeof r=="number"?r:t_(r,e)}const Xp={RENDER_ORDER:"renderOrder"};class n_ extends Ha{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Xp.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new Zm(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Xp.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?bm:e;const t=IE(e);this.styleFunction_=e===null?void 0:Sv(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function IE(r){if(r===void 0)return bm;if(!r)return null;if(typeof r=="function"||r instanceof $i)return r;if(!Array.isArray(r))return zp([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof $i){const o=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!(u instanceof $i))throw new Error("Expected a list of style instances");o[l]=u}return o}if("style"in t){const o=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");o[l]=u}return gE(o)}return zp(r)}const fe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},pa=[fe.FILL],Ki=[fe.STROKE],wr=[fe.BEGIN_PATH],jp=[fe.CLOSE_PATH];class i_{drawCustom(e,t,i,o,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Ho extends i_{constructor(e,t,i,o){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,l=this.coordinates;let u=l.length;for(let c=0,d=e.length;c<d;c+=t)o[0]=e[c],o[1]=e[c+1],Ss(i,o)&&(l[u++]=o[0],l[u++]=o[1]);return u}appendFlatLineCoordinates(e,t,i,o,l,u){const c=this.coordinates;let d=c.length;const g=this.getBufferedMaxExtent();u&&(t+=o);let p=e[t],_=e[t+1];const y=this.tmpCoordinate_;let x=!0,E,w,S;for(E=t+o;E<i;E+=o)y[0]=e[E],y[1]=e[E+1],S=oh(g,y),S!==w?(x&&(c[d++]=p,c[d++]=_,x=!1),c[d++]=y[0],c[d++]=y[1]):S===at.INTERSECTING?(c[d++]=y[0],c[d++]=y[1],x=!1):x=!0,p=y[0],_=y[1],w=S;return(l&&x||E===t+o)&&(c[d++]=p,c[d++]=_),d}drawCustomCoordinates_(e,t,i,o,l){for(let u=0,c=i.length;u<c;++u){const d=i[u],g=this.appendFlatLineCoordinates(e,t,d,o,!1,!1);l.push(g),t=d}return t}drawCustom(e,t,i,o,l){this.beginGeometry(e,t,l);const u=e.getType(),c=e.getStride(),d=this.coordinates.length;let g,p,_,y,x;switch(u){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();x=0;for(let w=0,S=E.length;w<S;++w){const I=[];x=this.drawCustomCoordinates_(g,x,E[w],c,I),y.push(I)}this.instructions.push([fe.CUSTOM,d,y,e,i,mp,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,y,e,o||i,mp,l]);break;case"Polygon":case"MultiLineString":_=[],g=u=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,_),this.instructions.push([fe.CUSTOM,d,_,e,i,Sa,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,_,e,o||i,Sa,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([fe.CUSTOM,d,p,e,i,fs,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,fs,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(g,c),p>d&&(this.instructions.push([fe.CUSTOM,d,p,e,i,fs,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,fs,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),p=this.coordinates.length,this.instructions.push([fe.CUSTOM,d,p,e,i,void 0,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,o||i,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[fe.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fe.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let o,l,u=-1;for(t=0;t<i;++t)o=e[t],l=o[0],l==fe.END_GEOMETRY?u=t:l==fe.BEGIN_GEOMETRY&&(o[2]=t,Oy(this.hitDetectionInstructions,u,t),u=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const o=e.getColor();i.fillPatternScale=o&&typeof o=="object"&&"src"in o?this.pixelRatio:1,i.fillStyle=Bn(o||Ut)}else i.fillStyle=void 0;if(t){const o=t.getColor();i.strokeStyle=Bn(o||Fo);const l=t.getLineCap();i.lineCap=l!==void 0?l:Ts;const u=t.getLineDash();i.lineDash=u?u.slice():ui;const c=t.getLineDashOffset();i.lineDashOffset=c||ci;const d=t.getLineJoin();i.lineJoin=d!==void 0?d:Is;const g=t.getWidth();i.lineWidth=g!==void 0?g:zo;const p=t.getMiterLimit();i.miterLimit=p!==void 0?p:Oo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[fe.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,o=e.lineCap,l=e.lineDash,u=e.lineDashOffset,c=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=o||l!=e.currentLineDash&&!Qi(e.currentLineDash,l)||e.currentLineDashOffset!=u||e.currentLineJoin!=c||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=o,e.currentLineDash=l,e.currentLineDashOffset=u,e.currentLineJoin=c,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=um(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Ih(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class LE extends Ho{constructor(e,t,i,o){super(e,t,i,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Ss(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length,c=this.appendFlatPointCoordinates(o,l);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const o=e.getFlatCoordinates(),l=[];for(let d=0,g=o.length;d<g;d+=e.getStride())(!this.maxExtent||Ss(this.maxExtent,o.slice(d,d+2)))&&l.push(o[d],o[d+1]);const u=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),o=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=o[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class ME extends Ho{constructor(e,t,i,o){super(e,t,i,o)}drawFlatCoordinates_(e,t,i,o){const l=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,i,o,!1,!1),c=[fe.MOVE_TO_LINE_TO,l,u];return this.instructions.push(c),this.hitDetectionInstructions.push(c),i}drawLineString(e,t,i){const o=this.state,l=o.strokeStyle,u=o.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,ui,ci],wr);const c=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(c,0,c.length,d),this.hitDetectionInstructions.push(Ki),this.endGeometry(t)}drawMultiLineString(e,t,i){const o=this.state,l=o.strokeStyle,u=o.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(o,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,ui,ci],wr);const c=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinates_(d,p,c[_],g);this.hitDetectionInstructions.push(Ki),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ki),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ki),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(wr)}}class Bp extends Ho{constructor(e,t,i,o){super(e,t,i,o)}drawFlatCoordinatess_(e,t,i,o){const l=this.state,u=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,d=i.length;this.instructions.push(wr),this.hitDetectionInstructions.push(wr);for(let g=0;g<d;++g){const p=i[g],_=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,p,o,!0,!c),x=[fe.MOVE_TO_LINE_TO,_,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(jp),this.hitDetectionInstructions.push(jp)),t=p}return u&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),c&&(this.instructions.push(Ki),this.hitDetectionInstructions.push(Ki)),t}drawCircle(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,ui,ci]);const c=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,d,!1,!1);const p=[fe.CIRCLE,g];this.instructions.push(wr,p),this.hitDetectionInstructions.push(wr,p),o.fillStyle!==void 0&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),o.strokeStyle!==void 0&&(this.instructions.push(Ki),this.hitDetectionInstructions.push(Ki)),this.endGeometry(t)}drawPolygon(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,ui,ci]);const c=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,i){const o=this.state,l=o.fillStyle,u=o.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),o.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),o.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,ui,ci]);const c=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinatess_(d,p,c[_],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,o=t.length;i<o;++i)t[i]=yr(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function AE(r,e,t,i,o){const l=[];let u=t,c=0,d=e.slice(t,2);for(;c<r&&u+o<i;){const[g,p]=d.slice(-2),_=e[u+o],y=e[u+o+1],x=Math.sqrt((_-g)*(_-g)+(y-p)*(y-p));if(c+=x,c>=r){const E=(r-c+x)/x,w=un(g,_,E),S=un(p,y,E);d.push(w,S),l.push(d),d=[w,S],c==r&&(u+=o),c=0}else if(c<r)d.push(e[u+o],e[u+o+1]),u+=o;else{const E=x-c,w=un(g,_,E/x),S=un(p,y,E/x);d.push(w,S),l.push(d),d=[w,S],c=0,u+=o}}return c>0&&l.push(d),l}function kE(r,e,t,i,o){let l=t,u=t,c=0,d=0,g=t,p,_,y,x,E,w,S,I,T,D;for(_=t;_<i;_+=o){const M=e[_],k=e[_+1];E!==void 0&&(T=M-E,D=k-w,x=Math.sqrt(T*T+D*D),S!==void 0&&(d+=y,p=Math.acos((S*T+I*D)/(y*x)),p>r&&(d>c&&(c=d,l=g,u=_),d=0,g=_-o)),y=x,S=T,I=D),E=M,w=k}return d+=x,d>c?[g,_]:[l,u]}const Ma={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class PE extends Ho{constructor(e,t,i,o){super(e,t,i,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ut]={fillStyle:Ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const o=this.textFillState_,l=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!o&&!l)return;const c=this.coordinates;let d=c.length;const g=e.getType();let p=null,_=e.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Xt(this.maxExtent,e.getExtent()))return;let y;if(p=e.getFlatCoordinates(),g=="LineString")y=[p.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const S=e.getEndss();y=[];for(let I=0,T=S.length;I<T;++I)y.push(S[I][0])}this.beginGeometry(e,t,i);const x=u.repeat,E=x?void 0:u.textAlign;let w=0;for(let S=0,I=y.length;S<I;++S){let T;x?T=AE(x*this.resolution,p,w,y[S],_):T=[p.slice(w,y[S])];for(let D=0,M=T.length;D<M;++D){const k=T[D];let X=0,V=k.length;if(E==null){const j=kE(u.maxAngle,k,0,k.length,2);X=j[0],V=j[1]}for(let j=X;j<V;j+=_)c.push(k[j],k[j+1]);const N=c.length;w=y[S],this.drawChars_(d,N),d=N}}this.endGeometry(t)}else{let y=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),_=2;break;case"Polygon":p=e.getFlatInteriorPoint(),u.overflow||y.push(p[2]/this.resolution),_=3;break;case"MultiPolygon":const T=e.getFlatInteriorPoints();p=[];for(let D=0,M=T.length;D<M;D+=3)u.overflow||y.push(T[D+2]/this.resolution),p.push(T[D],T[D+1]);if(p.length===0)return;_=2;break}const x=this.appendFlatPointCoordinates(p,_);if(x===d)return;if(y&&(x-d)/2!==p.length/_){let T=d/2;y=y.filter((D,M)=>{const k=c[(T+M)*2]===p[M*_]&&c[(T+M)*2+1]===p[M*_+1];return k||--T,k})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,i);let E=u.padding;if(E!=xr&&(u.scale[0]<0||u.scale[1]<0)){let T=u.padding[0],D=u.padding[1],M=u.padding[2],k=u.padding[3];u.scale[0]<0&&(D=-D,k=-k),u.scale[1]<0&&(T=-T,M=-M),E=[T,D,M,k]}const w=this.pixelRatio;this.instructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==xr?xr:E.map(function(T){return T*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const S=1/w,I=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=Ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[S,S],NaN,this.declutterMode_,this.declutterImageWithText_,E,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||No,justify:t.justify,textBaseline:t.textBaseline||Ra,scale:t.scale});const u=this.fillKey_;i&&(u in this.fillStates||(this.fillStates[u]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,o=this.textState_,l=this.strokeKey_,u=this.textKey_,c=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=Ma[o.textBaseline],p=this.textOffsetY_*d,_=this.text_,y=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([fe.DRAW_CHARS,e,t,g,o.overflow,c,o.maxAngle,d,p,l,y*d,_,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fe.DRAW_CHARS,e,t,g,o.overflow,c&&Ut,o.maxAngle,d,p,l,y*d,_,u,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,o,l;if(!e)this.text_="";else{const u=e.getFill();u?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Bn(u.getColor()||Ut)):(o=null,this.textFillState_=o);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),S=c.getLineDashOffset(),I=c.getWidth(),T=c.getMiterLimit();l.lineCap=c.getLineCap()||Ts,l.lineDash=w?w.slice():ui,l.lineDashOffset=S===void 0?ci:S,l.lineJoin=c.getLineJoin()||Is,l.lineWidth=I===void 0?zo:I,l.miterLimit=T===void 0?Oo:T,l.strokeStyle=Bn(c.getColor()||Fo)}i=this.textState_;const d=e.getFont()||jm;yv(d);const g=e.getScaleArray();i.overflow=e.getOverflow(),i.font=d,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Ra,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||xr,i.scale=g===void 0?[1,1]:g;const p=e.getOffsetX(),_=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=E===void 0?0:E,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:De(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=o&&o.fillStyle?typeof o.fillStyle=="string"?o.fillStyle:"|"+De(o.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const DE={Circle:Bp,Default:Ho,Image:LE,LineString:ME,Polygon:Bp,Text:PE};class OE{constructor(e,t,i,o){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=o,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const o in i){const l=i[o].finish();e[t][o]=l}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let o=this.buildersByZIndex_[i];o===void 0&&(o={},this.buildersByZIndex_[i]=o);let l=o[t];if(l===void 0){const u=DE[t];l=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[t]=l}return l}}const FE=5;class NE extends Xo{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=FE}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ae()}getData(e){return null}prepareFrame(e){return Ae()}renderFrame(e,t){return Ae()}forEachFeatureAtCoordinate(e,t,i,o,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===we.LOADED||t.getState()===we.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=we.LOADED&&t!=we.ERROR&&e.addEventListener(ve.CHANGE,this.boundHandleImageChange_),t==we.IDLE&&(e.load(),t=e.getState()),t==we.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class r_ extends gi{constructor(e,t,i,o){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=o}}class s_{constructor(){jg(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ca(),{get:(e,t)=>{if(typeof Ca()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,o=t.length;i<o;++i){const l=t[i];if(typeof l=="function"){l(e);continue}const u=t[++i];if(typeof e[l]=="function")e[l](...u);else{if(typeof u=="function"){e[l]=u(e);continue}e[l]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const bp=[];let us=null;function zE(){us=et(1,1,void 0,{willReadFrequently:!0})}class o_ extends NE{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Mn(),this.pixelTransform=Mn(),this.inversePixelTransform=Mn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){us||zE(),us.clearRect(0,0,1,1);let o;try{us.drawImage(e,t,i,1,1,0,0,1,1),o=us.getImageData(0,0,1,1).data}catch{return us=null,null}return o}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const o=this.getLayer().getClassName();let l,u;if(e&&e.className===o&&(!i||e&&e.style.backgroundColor&&Qi(Rs(e.style.backgroundColor),Rs(i)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=o;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",u=et();const d=u.canvas;l.appendChild(d),c=d.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const o=fi(i),l=Ga(i),u=za(i),c=Na(i);ut(t.coordinateToPixelTransform,o),ut(t.coordinateToPixelTransform,l),ut(t.coordinateToPixelTransform,u),ut(t.coordinateToPixelTransform,c);const d=this.inversePixelTransform;ut(d,o),ut(d,l),ut(d,u),ut(d,c),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const i=e.extent,o=e.viewState.resolution,l=e.viewState.rotation,u=e.pixelRatio,c=Math.round(Te(i)/o*u),d=Math.round(rt(i)/o*u);hi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-c/2,-d/2),am(this.inversePixelTransform,this.pixelTransform);const g=jy(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=c||p.height!=d?(p.width=c,p.height=d):this.context.clearRect(0,0,c,d),g!==p.style.transform&&(p.style.transform=g)}}dispatchRenderEvent_(e,t,i){const o=this.getLayer();if(o.hasListener(e)){const l=new r_(e,this.inversePixelTransform,i,t);o.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(cn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(cn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new s_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(cn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(cn.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,o,l,u,c){const d=l/2,g=u/2,p=o/t,_=-p,y=-e[0]+c,x=-e[1];return hi(this.tempTransform,d,g,p,_,-i,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function GE(r,e,t,i,o,l,u,c,d,g,p,_,y=!0){let x=r[e],E=r[e+1],w=0,S=0,I=0,T=0;function D(){w=x,S=E,e+=i,x=r[e],E=r[e+1],T+=I,I=Math.sqrt((x-w)*(x-w)+(E-S)*(E-S))}do D();while(e<t-i&&T+I<l);let M=I===0?0:(l-T)/I;const k=un(w,x,M),X=un(S,E,M),V=e-i,N=T,j=l+c*d(g,o,p);for(;e<t-i&&T+I<j;)D();M=I===0?0:(j-T)/I;const b=un(w,x,M),ne=un(S,E,M);let q=!1;if(y)if(_){const Y=[k,X,b,ne];Rm(Y,0,4,2,_,Y,Y),q=Y[0]>Y[2]}else q=k>b;const ee=Math.PI,oe=[],H=V+i===e;e=V,I=0,T=N,x=r[e],E=r[e+1];let ie;if(H){D(),ie=Math.atan2(E-S,x-w),q&&(ie+=ie>0?-ee:ee);const Y=(b+k)/2,W=(ne+X)/2;return oe[0]=[Y,W,(j-l)/2,ie,o],oe}o=o.replace(/\n/g," ");for(let Y=0,W=o.length;Y<W;){D();let Q=Math.atan2(E-S,x-w);if(q&&(Q+=Q>0?-ee:ee),ie!==void 0){let ue=Q-ie;if(ue+=ue>ee?-2*ee:ue<-ee?2*ee:0,Math.abs(ue)>u)return null}ie=Q;const U=Y;let R=0;for(;Y<W;++Y){const ue=q?W-Y-1:Y,he=c*d(g,o[ue],p);if(e+i<t&&T+I<l+R+he/2)break;R+=he}if(Y===U)continue;const z=q?o.substring(W-U,W-Y):o.substring(U,Y);M=I===0?0:(l+R/2-T)/I;const te=un(w,x,M),G=un(S,E,M);oe.push([te,G,R/2,Q,z]),l+=R}return oe}const ns=$t(),Ui=[],ii=[],ri=[],Wi=[];function Yp(r){return r[3].declutterBox}const Vp=new RegExp("[-----]");function qc(r,e){return e==="start"?e=Vp.test(r)?"right":"left":e==="end"&&(e=Vp.test(r)?"left":"right"),Ma[e]}function UE(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class WE{constructor(e,t,i,o,l){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=Mn(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new s_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,o){const l=e+t+i+o;if(this.labels_[l])return this.labels_[l];const u=o?this.strokeStates[o]:null,c=i?this.fillStates[i]:null,d=this.textStates[t],g=this.pixelRatio,p=[d.scale[0]*g,d.scale[1]*g],_=d.justify?Ma[d.justify]:qc(Array.isArray(e)?e[0]:e,d.textAlign||No),y=o&&u.lineWidth?u.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(UE,[]),{width:E,height:w,widths:S,heights:I,lineWidths:T}=Ev(d,x),D=E+y,M=[],k=(D+2)*p[0],X=(w+y)*p[1],V={width:k<0?Math.floor(k):Math.ceil(k),height:X<0?Math.floor(X):Math.ceil(X),contextInstructions:M};(p[0]!=1||p[1]!=1)&&M.push("scale",p),o&&(M.push("strokeStyle",u.strokeStyle),M.push("lineWidth",y),M.push("lineCap",u.lineCap),M.push("lineJoin",u.lineJoin),M.push("miterLimit",u.miterLimit),M.push("setLineDash",[u.lineDash]),M.push("lineDashOffset",u.lineDashOffset)),i&&M.push("fillStyle",c.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const N=.5-_;let j=_*D+N*y;const b=[],ne=[];let q=0,ee=0,oe=0,H=0,ie;for(let Y=0,W=x.length;Y<W;Y+=2){const Q=x[Y];if(Q===`
`){ee+=q,q=0,j=_*D+N*y,++H;continue}const U=x[Y+1]||d.font;U!==ie&&(o&&b.push("font",U),i&&ne.push("font",U),ie=U),q=Math.max(q,I[oe]);const R=[Q,j+N*S[oe]+_*(S[oe]-T[H]),.5*(y+q)+ee];j+=S[oe],o&&b.push("strokeText",R),i&&ne.push("fillText",R),++oe}return Array.prototype.push.apply(M,b),Array.prototype.push.apply(M,ne),this.labels_[l]=V,V}replayTextBackground_(e,t,i,o,l,u,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,l),e.lineTo.apply(e,t),u&&(this.alignAndScaleFill_=u[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,o,l,u,c,d,g,p,_,y,x,E,w,S){c*=y[0],d*=y[1];let I=i-c,T=o-d;const D=l+g>e?e-g:l,M=u+p>t?t-p:u,k=E[3]+D*y[0]+E[1],X=E[0]+M*y[1]+E[2],V=I-E[3],N=T-E[0];(w||_!==0)&&(Ui[0]=V,Wi[0]=V,Ui[1]=N,ii[1]=N,ii[0]=V+k,ri[0]=ii[0],ri[1]=N+X,Wi[1]=ri[1]);let j;return _!==0?(j=hi(Mn(),i,o,1,1,_,-i,-o),ut(j,Ui),ut(j,ii),ut(j,ri),ut(j,Wi),di(Math.min(Ui[0],ii[0],ri[0],Wi[0]),Math.min(Ui[1],ii[1],ri[1],Wi[1]),Math.max(Ui[0],ii[0],ri[0],Wi[0]),Math.max(Ui[1],ii[1],ri[1],Wi[1]),ns)):di(Math.min(V,V+k),Math.min(N,N+X),Math.max(V,V+k),Math.max(N,N+X),ns),x&&(I=Math.round(I),T=Math.round(T)),{drawImageX:I,drawImageY:T,drawImageW:D,drawImageH:M,originX:g,originY:p,declutterBox:{minX:ns[0],minY:ns[1],maxX:ns[2],maxY:ns[3],value:S},canvasTransform:j,scale:y}}replayImageOrLabel_(e,t,i,o,l,u,c){const d=!!(u||c),g=o.declutterBox,p=c?c[2]*o.scale[0]/2:0;return g.minX-p<=t[0]&&g.maxX+p>=0&&g.minY-p<=t[1]&&g.maxY+p>=0&&(d&&this.replayTextBackground_(e,Ui,ii,ri,Wi,u,c),xv(e,o.canvasTransform,l,i,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=ut(this.renderedTransform_,[0,0]),o=512*this.pixelRatio;e.save(),e.translate(i[0]%o,i[1]%o),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,o){const l=this.textStates[t],u=this.createLabel(e,t,o,i),c=this.strokeStates[i],d=this.pixelRatio,g=qc(Array.isArray(e)?e[0]:e,l.textAlign||No),p=Ma[l.textBaseline||Ra],_=c&&c.lineWidth?c.lineWidth:0,y=u.width/d-2*l.scale[0],x=g*y+2*(.5-g)*_,E=p*u.height/d+2*(.5-p)*_;return{label:u,anchorX:x,anchorY:E}}execute_(e,t,i,o,l,u,c,d){const g=this.zIndexContext_;let p;this.pixelCoordinates_&&Qi(i,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Hi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Wy(this.renderedTransform_,i));let _=0;const y=o.length;let x=0,E,w,S,I,T,D,M,k,X,V,N,j,b,ne=0,q=0,ee=null,oe=null;const H=this.coordinateCache_,ie=this.viewRotation_,Y=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,W={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ie},Q=this.instructions!=o||this.overlaps?0:200;let U,R,z,te;for(;_<y;){const G=o[_];switch(G[0]){case fe.BEGIN_GEOMETRY:U=G[1],te=G[3],U.getGeometry()?c!==void 0&&!Xt(c,te.getExtent())?_=G[2]+1:++_:_=G[2],g&&(g.zIndex=G[4]);break;case fe.BEGIN_PATH:ne>Q&&(this.fill_(e),ne=0),q>Q&&(e.stroke(),q=0),!ne&&!q&&(e.beginPath(),T=NaN,D=NaN),++_;break;case fe.CIRCLE:x=G[1];const he=p[x],me=p[x+1],Ee=p[x+2],Ce=p[x+3],ze=Ee-he,Ct=Ce-me,kn=Math.sqrt(ze*ze+Ct*Ct);e.moveTo(he+kn,me),e.arc(he,me,kn,0,2*Math.PI,!0),++_;break;case fe.CLOSE_PATH:e.closePath(),++_;break;case fe.CUSTOM:x=G[1],E=G[2];const gn=G[3],Yn=G[4],Pn=G[5];W.geometry=gn,W.feature=U,_ in H||(H[_]=[]);const qt=H[_];Pn?Pn(p,x,E,2,qt):(qt[0]=p[x],qt[1]=p[x+1],qt.length=2),g&&(g.zIndex=G[6]),Yn(qt,W),++_;break;case fe.DRAW_IMAGE:x=G[1],E=G[2],X=G[3],w=G[4],S=G[5];let gt=G[6];const bt=G[7],Dn=G[8],Qt=G[9],Jt=G[10];let pn=G[11];const Vn=G[12];let Kn=G[13];I=G[14]||"declutter";const He=G[15];if(!X&&G.length>=20){V=G[19],N=G[20],j=G[21],b=G[22];const Rt=this.drawLabelWithPointPlacement_(V,N,j,b);X=Rt.label,G[3]=X;const mn=G[23];w=(Rt.anchorX-mn)*this.pixelRatio,G[4]=w;const Tt=G[24];S=(Rt.anchorY-Tt)*this.pixelRatio,G[5]=S,gt=X.height,G[6]=gt,Kn=X.width,G[13]=Kn}let Tr;G.length>25&&(Tr=G[25]);let Ji,Zn,er;G.length>17?(Ji=G[16],Zn=G[17],er=G[18]):(Ji=xr,Zn=!1,er=!1),Jt&&Y?pn+=ie:!Jt&&!Y&&(pn-=ie);let tr=0;for(;x<E;x+=2){if(Tr&&Tr[tr++]<Kn/this.pixelRatio)continue;const Rt=this.calculateImageOrLabelDimensions_(X.width,X.height,p[x],p[x+1],Kn,gt,w,S,Dn,Qt,pn,Vn,l,Ji,Zn||er,U),mn=[e,t,X,Rt,bt,Zn?ee:null,er?oe:null];if(d){let Tt,pt,mt;if(He){const Ge=E-x;if(!He[Ge]){He[Ge]={args:mn,declutterMode:I};continue}const Qe=He[Ge];Tt=Qe.args,pt=Qe.declutterMode,delete He[Ge],mt=Yp(Tt)}let It,_n;if(Tt&&(pt!=="declutter"||!d.collides(mt))&&(It=!0),(I!=="declutter"||!d.collides(Rt.declutterBox))&&(_n=!0),pt==="declutter"&&I==="declutter"){const Ge=It&&_n;It=Ge,_n=Ge}It&&(pt!=="none"&&d.insert(mt),this.replayImageOrLabel_.apply(this,Tt)),_n&&(I!=="none"&&d.insert(Rt.declutterBox),this.replayImageOrLabel_.apply(this,mn))}else this.replayImageOrLabel_.apply(this,mn)}++_;break;case fe.DRAW_CHARS:const mi=G[1],Qo=G[2],Ir=G[3],Jo=G[4];b=G[5];const Ja=G[6],Lr=G[7],Mr=G[8];j=G[9];const nr=G[10];V=G[11],N=G[12];const Ar=[G[13],G[13]];I=G[14]||"declutter";const As=G[15],On=this.textStates[N],en=On.font,_i=[On.scale[0]*Lr,On.scale[1]*Lr];let yi;en in this.widths_?yi=this.widths_[en]:(yi={},this.widths_[en]=yi);const ks=gv(p,mi,Qo,2),Ps=Math.abs(_i[0])*Ip(en,V,yi);if(Jo||Ps<=ks){const Rt=this.textStates[N].textAlign,mn=(ks-Ps)*qc(V,Rt),Tt=GE(p,mi,Qo,2,V,mn,Ja,Math.abs(_i[0]),Ip,en,yi,Y?0:this.viewRotation_,As);e:if(Tt){const pt=[];let mt,It,_n,Ge,Qe;if(j)for(mt=0,It=Tt.length;mt<It;++mt){Qe=Tt[mt],_n=Qe[4],Ge=this.createLabel(_n,N,"",j),w=Qe[2]+(_i[0]<0?-nr:nr),S=Ir*Ge.height+(.5-Ir)*2*nr*_i[1]/_i[0]-Mr;const kt=this.calculateImageOrLabelDimensions_(Ge.width,Ge.height,Qe[0],Qe[1],Ge.width,Ge.height,w,S,0,0,Qe[3],Ar,!1,xr,!1,U);if(d&&I==="declutter"&&d.collides(kt.declutterBox))break e;pt.push([e,t,Ge,kt,1,null,null])}if(b)for(mt=0,It=Tt.length;mt<It;++mt){Qe=Tt[mt],_n=Qe[4],Ge=this.createLabel(_n,N,b,""),w=Qe[2],S=Ir*Ge.height-Mr;const kt=this.calculateImageOrLabelDimensions_(Ge.width,Ge.height,Qe[0],Qe[1],Ge.width,Ge.height,w,S,0,0,Qe[3],Ar,!1,xr,!1,U);if(d&&I==="declutter"&&d.collides(kt.declutterBox))break e;pt.push([e,t,Ge,kt,1,null,null])}d&&I!=="none"&&d.load(pt.map(Yp));for(let kt=0,Ds=pt.length;kt<Ds;++kt)this.replayImageOrLabel_.apply(this,pt[kt])}}++_;break;case fe.END_GEOMETRY:if(u!==void 0){U=G[1];const Rt=u(U,te,I);if(Rt)return Rt}++_;break;case fe.FILL:Q?ne++:this.fill_(e),++_;break;case fe.MOVE_TO_LINE_TO:for(x=G[1],E=G[2],R=p[x],z=p[x+1],e.moveTo(R,z),T=R+.5|0,D=z+.5|0,x+=2;x<E;x+=2)R=p[x],z=p[x+1],M=R+.5|0,k=z+.5|0,(x==E-2||M!==T||k!==D)&&(e.lineTo(R,z),T=M,D=k);++_;break;case fe.SET_FILL_STYLE:ee=G,this.alignAndScaleFill_=G[2],ne&&(this.fill_(e),ne=0,q&&(e.stroke(),q=0)),e.fillStyle=G[1],++_;break;case fe.SET_STROKE_STYLE:oe=G,q&&(e.stroke(),q=0),this.setStrokeStyle_(e,G),++_;break;case fe.STROKE:Q?q++:e.stroke(),++_;break;default:++_;break}}ne&&this.fill_(e),q&&e.stroke()}execute(e,t,i,o,l,u){this.viewRotation_=o,this.execute_(e,t,i,this.instructions,l,void 0,void 0,u)}executeHitDetection(e,t,i,o,l){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,o,l)}}const gs=["Polygon","Circle","LineString","Image","Text","Default"],l_=["Image","Text"],XE=gs.filter(r=>!l_.includes(r));class jE{constructor(e,t,i,o,l,u,c){this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Mn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let o=this.executorsByZIndex_[i];o===void 0&&(o={},this.executorsByZIndex_[i]=o);const l=e[i];for(const u in l){const c=l[u];o[u]=new WE(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let o=0,l=e.length;o<l;++o)if(e[o]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,o,l,u){o=Math.round(o);const c=o*2+1,d=hi(this.hitDetectionTransform_,o+.5,o+.5,1/t,-1/t,-i,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=et(c,c,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):g||p.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=$t(),Ro(_,e),Ih(_,t*(this.renderBuffer_+o),_));const y=BE(o);let x;function E(k,X,V){const N=p.getImageData(0,0,c,c).data;for(let j=0,b=y.length;j<b;j++)if(N[y[j]]>0){if(!u||V==="none"||x!=="Image"&&x!=="Text"||u.includes(k)){const ne=(y[j]-3)/4,q=o-ne%c,ee=o-(ne/c|0),oe=l(k,X,q*q+ee*ee);if(oe)return oe}p.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(ai);let S,I,T,D,M;for(S=w.length-1;S>=0;--S){const k=w[S].toString();for(T=this.executorsByZIndex_[k],I=gs.length-1;I>=0;--I)if(x=gs[I],D=T[x],D!==void 0&&(M=D.executeHitDetection(p,d,i,E,_),M))return M}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],o=t[1],l=t[2],u=t[3],c=[i,o,i,u,l,u,l,o];return Hi(c,0,8,2,e,c),c}isEmpty(){return ws(this.executorsByZIndex_)}execute(e,t,i,o,l,u,c){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(c?Dy:ai),u=u||gs;const g=gs.length;for(let p=0,_=d.length;p<_;++p){const y=d[p].toString(),x=this.executorsByZIndex_[y];for(let E=0,w=u.length;E<w;++E){const S=u[E],I=x[S];if(I!==void 0){const T=c===null?void 0:I.getZIndexContext(),D=T?T.getContext():e,M=this.maxExtent_&&S!=="Image"&&S!=="Text";if(M&&(D.save(),this.clip(D,i)),!T||S==="Text"||S==="Image"?I.execute(D,t,i,o,l,c):T.pushFunction(k=>I.execute(k,t,i,o,l,c)),M&&D.restore(),T){T.offset();const k=d[p]*g+E;this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ai);for(let i=0,o=t.length;i<o;++i)e[t[i]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[i]].length=0}}const Qc={};function BE(r){if(Qc[r]!==void 0)return Qc[r];const e=r*2+1,t=r*r,i=new Array(t+1);for(let l=0;l<=r;++l)for(let u=0;u<=r;++u){const c=l*l+u*u;if(c>t)break;let d=i[c];d||(d=[],i[c]=d),d.push(((r+l)*e+(r+u))*4+3),l>0&&d.push(((r-l)*e+(r+u))*4+3),u>0&&(d.push(((r+l)*e+(r-u))*4+3),l>0&&d.push(((r-l)*e+(r-u))*4+3))}const o=[];for(let l=0,u=i.length;l<u;++l)i[l]&&o.push(...i[l]);return Qc[r]=o,o}class bE extends i_{constructor(e,t,i,o,l,u,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=o,this.transformRotation_=o?Ph(Math.atan2(o[1],o[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=u,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Mn()}drawImages_(e,t,i,o){if(!this.image_)return;const l=Hi(e,t,i,o,this.transform_,this.pixelCoordinates_),u=this.context_,c=this.tmpLocalTransform_,d=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,_=l.length;p<_;p+=2){const y=l[p]-this.imageAnchorX_,x=l[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,w=x+this.imageAnchorY_;hi(c,E,w,1,1,g,-E,-w),u.save(),u.transform.apply(u,c),u.translate(E,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=d)}drawText_(e,t,i,o){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=Hi(e,t,i,o,this.transform_,this.pixelCoordinates_),u=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<i;t+=o){const d=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(d-this.textOffsetX_,g-this.textOffsetY_),u.rotate(c),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,d,g),this.textFillState_&&u.fillText(this.text_,d,g))}}moveToLineTo_(e,t,i,o,l){const u=this.context_,c=Hi(e,t,i,o,this.transform_,this.pixelCoordinates_);u.moveTo(c[0],c[1]);let d=c.length;l&&(d-=2);for(let g=2;g<d;g+=2)u.lineTo(c[g],c[g+1]);return l&&u.closePath(),i}drawRings_(e,t,i,o){for(let l=0,u=i.length;l<u;++l)t=this.moveToLineTo_(e,t,i[l],o,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=G1(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],o=t[3]-t[1],l=Math.sqrt(i*i+o*o),u=this.context_;u.beginPath(),u.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,o=t.length;i<o;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Xt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,o=e.getFlatCoordinates();let l=0;const u=e.getEnds(),c=e.getStride();i.beginPath();for(let d=0,g=u.length;d<g;++d)l=this.moveToLineTo_(o,l,u[d],c,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Xt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let o=0;const l=e.getEndss(),u=e.getStride();t.beginPath();for(let c=0,d=l.length;c<d;++c){const g=l[c];o=this.drawRings_(i,o,g,u)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Qi(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,o=e.textAlign?e.textAlign:No;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=o&&(i.textAlign=o,t.textAlign=o),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=o,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Bn(i||Ut)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),o=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),p=l||ui;this.strokeState_={lineCap:o!==void 0?o:Ts,lineDash:this.pixelRatio_===1?p:p.map(_=>_*this.pixelRatio_),lineDashOffset:(u||ci)*this.pixelRatio_,lineJoin:c!==void 0?c:Is,lineWidth:(d!==void 0?d:zo)*this.pixelRatio_,miterLimit:g!==void 0?g:Oo,strokeStyle:Bn(i||Fo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),o=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*i,this.imageAnchorY_=o[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const u=e.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/i,u[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Bn(x||Ut)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const x=i.getColor(),E=i.getLineCap(),w=i.getLineDash(),S=i.getLineDashOffset(),I=i.getLineJoin(),T=i.getWidth(),D=i.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Ts,lineDash:w||ui,lineDashOffset:S||ci,lineJoin:I!==void 0?I:Is,lineWidth:T!==void 0?T:zo,miterLimit:D!==void 0?D:Oo,strokeStyle:Bn(x||Fo)}}const o=e.getFont(),l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),p=e.getText(),_=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:o!==void 0?o:jm,textAlign:_!==void 0?_:No,textBaseline:y!==void 0?y:Ra},this.text_=p!==void 0?Array.isArray(p)?p.reduce((x,E,w)=>x+=w%2?" ":E,""):p:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Xn=.5;function YE(r,e,t,i,o,l,u,c,d){const g=d?wa(o,d):o,p=r[0]*Xn,_=r[1]*Xn,y=et(p,_);y.imageSmoothingEnabled=!1;const x=y.canvas,E=new bE(y,Xn,o,null,u,c,d?Yo(xa(),d):null),w=t.length,S=Math.floor((256*256*256-1)/w),I={};for(let D=1;D<=w;++D){const M=t[D-1],k=M.getStyleFunction()||i;if(!k)continue;let X=k(M,l);if(!X)continue;Array.isArray(X)||(X=[X]);const N=(D*S).toString(16).padStart(7,"#00000");for(let j=0,b=X.length;j<b;++j){const ne=X[j],q=ne.getGeometryFunction()(M);if(!q||!Xt(g,q.getExtent()))continue;const ee=ne.clone(),oe=ee.getFill();oe&&oe.setColor(N);const H=ee.getStroke();H&&(H.setColor(N),H.setLineDash(null)),ee.setText(void 0);const ie=ne.getImage();if(ie){const U=ie.getImageSize();if(!U)continue;const R=et(U[0],U[1],void 0,{alpha:!1}),z=R.canvas;R.fillStyle=N,R.fillRect(0,0,z.width,z.height),ee.setImage(new Ko({img:z,anchor:ie.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ie.getOrigin(),opacity:1,size:ie.getSize(),scale:ie.getScale(),rotation:ie.getRotation(),rotateWithView:ie.getRotateWithView()}))}const Y=ee.getZIndex()||0;let W=I[Y];W||(W={},I[Y]=W,W.Polygon=[],W.Circle=[],W.LineString=[],W.Point=[]);const Q=q.getType();if(Q==="GeometryCollection"){const U=q.getGeometriesArrayRecursive();for(let R=0,z=U.length;R<z;++R){const te=U[R];W[te.getType().replace("Multi","")].push(te,ee)}}else W[Q.replace("Multi","")].push(q,ee)}}const T=Object.keys(I).map(Number).sort(ai);for(let D=0,M=T.length;D<M;++D){const k=I[T[D]];for(const X in k){const V=k[X];for(let N=0,j=V.length;N<j;N+=2){E.setStyle(V[N+1]);for(let b=0,ne=e.length;b<ne;++b)E.setTransform(e[b]),E.drawGeometry(V[N])}}}return y.getImageData(0,0,x.width,x.height)}function VE(r,e,t){const i=[];if(t){const o=Math.floor(Math.round(r[0])*Xn),l=Math.floor(Math.round(r[1])*Xn),u=(Ze(o,0,t.width-1)+Ze(l,0,t.height-1)*t.width)*4,c=t.data[u],d=t.data[u+1],p=t.data[u+2]+256*(d+256*c),_=Math.floor((256*256*256-1)/e.length);p&&p%_===0&&i.push(e[p/_-1])}return i}const KE=.5,a_={Point:tx,LineString:QE,Polygon:ix,MultiPoint:nx,MultiLineString:JE,MultiPolygon:ex,GeometryCollection:qE,Circle:HE};function ZE(r,e){return parseInt(De(r),10)-parseInt(De(e),10)}function Kp(r,e){const t=u_(r,e);return t*t}function u_(r,e){return KE*r/e}function HE(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(l,u),d.drawCircle(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i)}}function Zp(r,e,t,i,o,l,u,c){const d=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==we.LOADED||x==we.ERROR?y=!1:x==we.IDLE&&g.load(),y&&d.push(g.ready())}const p=t.getFill();p&&p.loading()&&d.push(p.ready());const _=d.length>0;return _&&Promise.all(d).then(()=>o(null)),$E(r,e,t,i,l,u,c),_}function $E(r,e,t,i,o,l,u){const c=t.getGeometryFunction()(e);if(!c)return;const d=c.simplifyTransformed(i,o);if(t.getRenderer())c_(r,d,t,e,u);else{const p=a_[d.getType()];p(r,d,t,e,u,l)}}function c_(r,e,t,i,o){if(e.getType()=="GeometryCollection"){const u=e.getGeometries();for(let c=0,d=u.length;c<d;++c)c_(r,u[c],t,i,o);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),o)}function qE(r,e,t,i,o,l){const u=e.getGeometriesArray();let c,d;for(c=0,d=u.length;c<d;++c){const g=a_[u[c].getType()];g(r,u[c],t,i,o,l)}}function QE(r,e,t,i,o){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,i,o)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,i,o)}}function JE(r,e,t,i,o){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,i,o)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,i,o)}}function ex(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(u||l){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawMultiPolygon(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i,o)}}function tx(r,e,t,i,o,l){const u=t.getImage(),c=t.getText(),d=c&&c.getText(),g=l&&u&&d?{}:void 0;if(u){if(u.getImageState()!=we.LOADED)return;const p=r.getBuilder(t.getZIndex(),"Image");p.setImageStyle(u,g),p.drawPoint(e,i,o)}if(d){const p=r.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,g),p.drawText(e,i,o)}}function nx(r,e,t,i,o,l){const u=t.getImage(),c=u&&u.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),p=l&&c&&g?{}:void 0;if(c){if(u.getImageState()!=we.LOADED)return;const _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(u,p),_.drawMultiPoint(e,i,o)}if(g){const _=r.getBuilder(t.getZIndex(),"Text");_.setTextStyle(d,p),_.drawText(e,i,o)}}function ix(r,e,t,i,o){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawPolygon(e,i,o)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,i,o)}}class rx extends o_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=$t(),this.wrappedRenderedExtent_=$t(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const o=t.extent,l=t.viewState,u=l.center,c=l.resolution,d=l.projection,g=l.rotation,p=d.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,E=t.viewHints,w=!(E[wt.ANIMATING]||E[wt.INTERACTING]),S=this.context,I=Math.round(Te(o)/c*x),T=Math.round(rt(o)/c*x),D=_.getWrapX()&&d.canWrapX(),M=D?Te(p):null,k=D?Math.ceil((o[2]-p[2])/M)+1:1;let X=D?Math.floor((o[0]-p[0])/M):0;do{let V=this.getRenderTransform(u,c,0,x,I,T,X*M);t.declutter&&(V=V.slice(0)),e.execute(S,[S.canvas.width,S.canvas.height],V,g,w,i===void 0?gs:i?l_:XE,i?y&&t.declutter[y]:void 0)}while(++X<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=et(this.context.canvas.width,this.context.canvas.height,bp))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Ba(this.context),bp.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const o=e.viewState;this.prepareContainer(e,t);const l=this.context,u=this.replayGroup_;let c=u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(cn.PRERENDER)||this.getLayer().hasListener(cn.POSTRENDER)))return null;this.setDrawContext_(),this.preRender(l,e);const d=o.projection;if(this.clipped_=!1,c&&i.extent&&this.clipping){const g=Vi(i.extent,d);c=Xt(g,e.extent),this.clipped_=c&&!hs(g,e.extent),this.clipped_&&this.clipUnrotated(l,e,g)}return c&&this.renderWorlds(u,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==o.rotation&&(this.renderedRotation_=o.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),o=this.renderedCenter_,l=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],_=i[0]*Xn,y=i[1]*Xn;p.push(this.getRenderTransform(o,l,u,Xn,_,y,0).slice());const x=g.getSource(),E=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!hs(E,d)){let S=d[0];const I=Te(E);let T=0,D;for(;S<E[0];)--T,D=I*T,p.push(this.getRenderTransform(o,l,u,Xn,_,y,D).slice()),S+=I;for(T=0,S=d[2];S>E[2];)++T,D=I*T,p.push(this.getRenderTransform(o,l,u,Xn,_,y,D).slice()),S-=I}const w=xa();this.hitDetectionImageData_=YE(i,p,this.renderedFeatures_,g.getStyleFunction(),d,l,u,Kp(l,this.renderedPixelRatio_),w?c:null)}t(VE(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,o,l){if(!this.replayGroup_)return;const u=t.viewState.resolution,c=t.viewState.rotation,d=this.getLayer(),g={},p=function(y,x,E){const w=De(y),S=g[w];if(S){if(S!==!0&&E<S.distanceSq){if(E===0)return g[w]=!0,l.splice(l.lastIndexOf(S),1),o(y,d,x);S.geometry=x,S.distanceSq=E}}else{if(E===0)return g[w]=!0,o(y,d,x);l.push(g[w]={feature:y,layer:d,geometry:x,distanceSq:E,callback:o})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,u,c,i,p,_?t.declutter[_].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const o=e.viewHints[wt.ANIMATING],l=e.viewHints[wt.INTERACTING],u=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!u&&o||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,p=g.projection,_=g.resolution,y=e.pixelRatio,x=t.getRevision(),E=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=ZE);const S=g.center.slice(),I=Ih(d,E*_),T=I.slice(),D=[I.slice()],M=p.getExtent();if(i.getWrapX()&&p.canWrapX()&&!hs(M,e.extent)){const H=Te(M),ie=Math.max(Te(I)/2,H);I[0]=M[0]-ie,I[2]=M[2]+ie,_m(S,p);const Y=mm(D[0],p);Y[0]<M[0]&&Y[2]<M[2]?D.push([Y[0]+H,Y[1],Y[2]+H,Y[3]]):Y[0]>M[0]&&Y[2]>M[2]&&D.push([Y[0]-H,Y[1],Y[2]-H,Y[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&hs(this.wrappedRenderedExtent_,I))return Qi(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new OE(u_(_,y),I,_,y),X=xa();let V;if(X){for(let H=0,ie=D.length;H<ie;++H){const Y=D[H],W=wa(Y,p);i.loadFeatures(W,P1(_,p),X)}V=Yo(X,p)}else for(let H=0,ie=D.length;H<ie;++H)i.loadFeatures(D[H],_,p);const N=Kp(_,y);let j=!0;const b=(H,ie)=>{let Y;const W=H.getStyleFunction()||t.getStyleFunction();if(W&&(Y=W(H,_)),Y){const Q=this.renderFeature(H,N,Y,k,V,this.getLayer().getDeclutter(),ie);j=j&&!Q}},ne=wa(I,p),q=i.getFeaturesInExtent(ne);w&&q.sort(w);for(let H=0,ie=q.length;H<ie;++H)b(q[H],H);this.renderedFeatures_=q,this.ready=j;const ee=k.finish(),oe=new jE(I,_,y,i.getOverlaps(),ee,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=I,this.renderedCenter_=S,this.renderedProjection_=p,this.renderedPixelRatio_=y,this.replayGroup_=oe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,o,l,u,c){if(!i)return!1;let d=!1;if(Array.isArray(i))for(let g=0,p=i.length;g<p;++g)d=Zp(o,e,i[g],t,this.boundHandleStyleImageChange_,l,u,c)||d;else d=Zp(o,e,i,t,this.boundHandleStyleImageChange_,l,u,c);return d}}class sx extends n_{constructor(e){super(e)}createRenderer(){return new rx(this)}}class Hp{constructor(e){this.rbush_=new Zm(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[De(t)]=i}load(e,t){const i=new Array(t.length);for(let o=0,l=t.length;o<l;o++){const u=e[o],c=t[o],d={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:c};i[o]=d,this.items_[De(c)]=d}this.rbush_.load(i)}remove(e){const t=De(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[De(t)],o=[i.minX,i.minY,i.maxX,i.maxY];Io(o,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(o){return o.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let o=0,l=e.length;o<l;o++)if(i=t(e[o]),i)return i;return i}isEmpty(){return ws(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return di(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}function ox(r,e,t,i){const o=[];let l=$t();for(let u=0,c=t.length;u<c;++u){const d=t[u];l=Lh(r,e,d[0],i),o.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=d[d.length-1]}return o}const $p=Mn();class Tn{constructor(e,t,i,o,l,u){this.styleFunction,this.extent_,this.id_=u,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=l,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?dm(this.flatCoordinates_):Lh(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Sr(this.getExtent());this.flatInteriorPoints_=Wh(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Q1(this.flatCoordinates_,this.ends_),t=ox(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=K1(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Sp(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let o=0,l=i.length;o<l;++o){const u=i[o],c=Sp(e,t,u,2,.5);Rh(this.flatMidpoints_,c),t=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=St(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const o=rt(i)/rt(t);hi($p,i[0],i[3],o,-o,0,0,0),Hi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,$p,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Tn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=lm((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let o;switch(this.type_){case"LineString":i.length=Uh(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),o=[i.length];break;case"MultiLineString":o=[],i.length=B1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,o);break;case"Polygon":o=[],i.length=Mm(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,o);break}return o&&(this.simplifiedGeometry_=new Tn(this.type_,i,o,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Tn.prototype.getFlatCoordinates=Tn.prototype.getOrientedFlatCoordinates;class h_ extends bn{constructor(e){super(),this.projection=St(e.projection),this.attributions_=qp(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,o){t.viewResolver=i,t.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=qp(e),this.changed()}setState(e){this.state_=e,this.changed()}}function qp(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const an={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function lx(r,e){return[[-1/0,-1/0,1/0,1/0]]}let ax=!1;function ux(r,e,t,i,o,l,u){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,i,o):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=ax,c.onload=function(d){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let p;g=="text"||g=="json"?p=c.responseText:g=="xml"?p=c.responseXML||c.responseText:g=="arraybuffer"&&(p=c.response),p?l(e.readFeatures(p,{extent:t,featureProjection:o}),e.readProjection(p)):u()}catch{u()}}else u()},c.onerror=u,c.send()}function Qp(r,e){return function(t,i,o,l,u){const c=this;ux(r,e,t,i,o,function(d,g){c.addFeatures(d),l!==void 0&&l(d)},u||xs)}}class Xi extends gi{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class cx extends h_{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=xs,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ke(this.format_,"`format` must be set when `url` is set"),this.loader_=Qp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:lx;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Hp:null,this.loadedExtentsRtree_=new Hp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,o;Array.isArray(e.features)?o=e.features:e.features&&(i=e.features,o=i.getArray()),!t&&i===void 0&&(i=new jn(o)),o!==void 0&&this.addFeaturesInternal(o),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=De(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Xi(an.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Tn||(this.featureChangeKeys_[e]=[Le(t,ve.CHANGE,this.handleFeatureChange_,this),Le(t,Es.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const o=String(t.getId());if(!(o in this.idIndex_))this.idIndex_[o]=t;else if(t instanceof Tn){const l=this.idIndex_[o];l instanceof Tn?Array.isArray(l)?l.push(t):this.idIndex_[o]=[l,t]:i=!1}else i=!1}return i&&(ke(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],o=[];for(let l=0,u=e.length;l<u;l++){const c=e[l],d=De(c);this.addToIndex_(d,c)&&i.push(c)}for(let l=0,u=i.length;l<u;l++){const c=i[l],d=De(c);this.setupChangeEvents_(d,c);const g=c.getGeometry();if(g){const p=g.getExtent();t.push(p),o.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,o),this.hasListener(an.ADDFEATURE))for(let l=0,u=i.length;l<u;l++)this.dispatchEvent(new Xi(an.ADDFEATURE,i[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(an.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(an.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Gt.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Gt.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(We);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Xi(an.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(o){const l=o.getGeometry();if(l instanceof Tn||l.intersectsCoordinate(e))return t(o)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const o=i.getGeometry();if(o instanceof Tn||o.intersectsExtent(e)){const l=t(i);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ws(this.nullGeometryFeatures_)||Rh(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const o=Mh(e,t);return[].concat(...o.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],o=e[1];let l=null;const u=[NaN,NaN];let c=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||To,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const p=g.getGeometry(),_=c;if(c=p instanceof Tn?0:p.closestPointXY(i,o,u,c),c<_){l=g;const y=Math.sqrt(c);d[0]=i-y,d[1]=o-y,d[2]=i+y,d[3]=o+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=De(t),o=t.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const u=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(u,t)):this.featuresRtree_&&this.featuresRtree_.update(u,t)}const l=t.getId();if(l!==void 0){const u=l.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Xi(an.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:De(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ws(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const o=this.loadedExtentsRtree_,l=this.strategy_(e,t,i);for(let u=0,c=l.length;u<c;++u){const d=l[u];o.forEachInExtent(d,function(p){return hs(p.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Xi(an.FEATURESLOADSTART)),this.loader_.call(this,d,t,i,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xi(an.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xi(an.FEATURESLOADERROR))}),o.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(o){if(Io(o.extent,e))return o});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,o=e.length;i<o;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=De(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(We),delete this.featureChangeKeys_[t];const o=e.getId();if(o!==void 0){const l=o.toString(),u=this.idIndex_[l];u===e?delete this.idIndex_[l]:Array.isArray(u)&&(u.splice(u.indexOf(e),1),u.length===1&&(this.idIndex_[l]=u[0]))}return delete this.uidIndex_[t],this.hasListener(an.REMOVEFEATURE)&&this.dispatchEvent(new Xi(an.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ke(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Qp(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const se={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class id extends Fa{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ve.CHANGE)}release(){this.state===se.ERROR&&this.setState(se.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==se.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){Ae()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const o=t-i+1e3/60;return o>=this.transition_?1:Vm(o/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class d_ extends id{constructor(e,t,i,o,l,u){super(e,t,u),this.crossOrigin_=o,this.src_=i,this.key=i,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=se.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=se.ERROR,this.unlistenImage_(),this.image_=hx(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=se.LOADED:this.state=se.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==se.ERROR&&(this.state=se.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==se.IDLE&&(this.state=se.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=cv(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function hx(){const r=et(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class dx{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const o=this.points_[t+2]-this.points_[i+2];if(o<1e3/60)return!1;const l=this.points_[t]-this.points_[i],u=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(u,l),this.initialVelocity_=Math.sqrt(l*l+u*u)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class fx extends Da{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ae()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;hi(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),am(o,i)}forEachFeatureAtCoordinate(e,t,i,o,l,u,c,d){let g;const p=t.viewState;function _(M,k,X,V){return l.call(u,k,M?X:null,V)}const y=p.projection,x=_m(e.slice(),y),E=[[0,0]];if(y.canWrapX()&&o){const M=y.getExtent(),k=Te(M);E.push([-k,0],[k,0])}const w=t.layerStatesArray,S=w.length,I=[],T=[];for(let M=0;M<E.length;M++)for(let k=S-1;k>=0;--k){const X=w[k],V=X.layer;if(V.hasRenderer()&&ed(X,p)&&c.call(d,V)){const N=V.getRenderer(),j=V.getSource();if(N&&j){const b=j.getWrapX()?x:e,ne=_.bind(null,X.managed);T[0]=b[0]+E[M][0],T[1]=b[1]+E[M][1],g=N.forEachFeatureAtCoordinate(T,t,i,ne,I)}if(g)return g}}if(I.length===0)return;const D=1/I.length;return I.forEach((M,k)=>M.distanceSq+=k*D),I.sort((M,k)=>M.distanceSq-k.distanceSq),I.some(M=>g=M.callback(M.feature,M.layer,M.geometry)),g}hasFeatureAtCoordinate(e,t,i,o,l,u){return this.forEachFeatureAtCoordinate(e,t,i,o,To,this,l,u)!==void 0}getMap(){return this.map_}renderFrame(e){Ae()}scheduleExpireIconCache(e){hn.canExpireCache()&&e.postRenderFunctions.push(gx)}}function gx(r,e){hn.expire()}class px extends fx{constructor(e){super(e),this.fontChangeListenerKey_=Le(oi,Es.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Va+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const o=new r_(e,void 0,t);i.dispatchEvent(o)}}disposeInternal(){We(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(cn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,d)=>c.zIndex-d.zIndex);t.some(c=>c.layer instanceof n_&&c.layer.getDeclutter())&&(e.declutter={});const o=e.viewState;this.children_.length=0;const l=[];let u=null;for(let c=0,d=t.length;c<d;++c){const g=t[c];e.layerIndex=c;const p=g.layer,_=p.getSourceState();if(!ed(g,o)||_!="ready"&&_!="undefined"){p.unrender();continue}const y=p.render(e,u);y&&(y!==u&&(this.children_.push(y),u=y),l.push(g))}this.declutter(e,l),uv(this.element_,this.children_),this.dispatchRenderEvent(cn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const o=t[i],l=o.layer;l.getDeclutter()&&l.renderDeclutter(e,o)}t.forEach(i=>i.layer.renderDeferred(e))}}}class Yi extends gi{constructor(e,t){super(e),this.layer=t}}const Jc={LAYERS:"layers"};class Ms extends Ym{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Jc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new jn(i.slice(),{unique:!0}):ke(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new jn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(We),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Le(e,Gt.ADD,this.handleLayersAdd_,this),Le(e,Gt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(We);Wo(this.listenerKeys_);const t=e.getArray();for(let i=0,o=t.length;i<o;i++){const l=t[i];this.registerLayerListeners_(l),this.dispatchEvent(new Yi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Le(e,Es.PROPERTYCHANGE,this.handleLayerChange_,this),Le(e,ve.CHANGE,this.handleLayerChange_,this)];e instanceof Ms&&t.push(Le(e,"addlayer",this.handleLayerGroupAdd_,this),Le(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[De(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Yi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Yi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Yi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=De(t);this.listenerKeys_[i].forEach(We),delete this.listenerKeys_[i],this.dispatchEvent(new Yi("removelayer",t)),this.changed()}getLayers(){return this.get(Jc.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let o=0,l=i.length;o<l;++o)this.dispatchEvent(new Yi("removelayer",i[o]))}this.set(Jc.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});const o=this.getLayerState();let l=o.zIndex;!e&&o.zIndex===void 0&&(l=0);for(let u=i,c=t.length;u<c;u++){const d=t[u];d.opacity*=o.opacity,d.visible=d.visible&&o.visible,d.maxResolution=Math.min(d.maxResolution,o.maxResolution),d.minResolution=Math.max(d.minResolution,o.minResolution),d.minZoom=Math.max(d.minZoom,o.minZoom),d.maxZoom=Math.min(d.maxZoom,o.maxZoom),o.extent!==void 0&&(d.extent!==void 0?d.extent=Ln(d.extent,o.extent):d.extent=o.extent),d.zIndex===void 0&&(d.zIndex=l)}return t}getSourceState(){return"ready"}}class cs extends gi{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Bi extends cs{constructor(e,t,i,o,l,u){super(e,t,l),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ke={SINGLECLICK:"singleclick",CLICK:ve.CLICK,DBLCLICK:ve.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},_h={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class mx extends Fa{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Le(i,_h.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Le(i,_h.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ve.TOUCHMOVE,this.boundHandleTouchMove_,Um?{passive:!1}:!1)}emulateClick_(e){let t=new Bi(Ke.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Bi(Ke.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Bi(Ke.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ke.POINTERUP||t.type==Ke.POINTERCANCEL){delete this.trackedTouches_[i];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==t.target){delete this.trackedTouches_[o];break}}else(t.type==Ke.POINTERDOWN||t.type==Ke.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Bi(Ke.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(We),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Bi(Ke.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Le(i,Ke.POINTERMOVE,this.handlePointerMove_,this),Le(i,Ke.POINTERUP,this.handlePointerUp_,this),Le(this.element_,Ke.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Le(this.element_.getRootNode(),Ke.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Bi(Ke.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Bi(Ke.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(We(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ve.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(We(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(We),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const bi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},xt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Aa=1/0;class _x{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Wo(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const o=this.keyFunction_(i);return delete this.queuedElements_[o],i}enqueue(e){ke(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Aa?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,o=t.length,l=t[e],u=i[e],c=e;for(;e<o>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),p=g<o&&i[g]<i[d]?g:d;t[e]=t[p],i[e]=i[p],e=p}t[e]=l,i[e]=u,this.siftDown_(c,e)}siftDown_(e,t){const i=this.elements_,o=this.priorities_,l=i[t],u=o[t];for(;t>e;){const c=this.getParentIndex_(t);if(o[c]>u)i[t]=i[c],o[t]=o[c],t=c;else break}i[t]=l,o[t]=u}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let o=0;const l=t.length;let u,c,d;for(c=0;c<l;++c)u=t[c],d=e(u),d==Aa?delete this.queuedElements_[this.keyFunction_(u)]:(i[o]=d,t[o++]=u);t.length=o,i.length=o,this.heapify_()}}class yx extends _x{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(ve.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===se.LOADED||i===se.ERROR||i===se.EMPTY){i!==se.ERROR&&t.removeEventListener(ve.CHANGE,this.boundHandleTileChange_);const o=t.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const o=this.dequeue()[0],l=o.getKey();o.getState()===se.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,o.load())}}}function vx(r,e,t,i,o){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Aa;const l=r.viewState.center,u=i[0]-l[0],c=i[1]-l[1];return 65536*Math.log(o)+Math.sqrt(u*u+c*c)/o}class rd extends bn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,o=this.listenerKeys.length;i<o;++i)We(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==xs&&this.listenerKeys.push(Le(e,bi.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Ex extends rd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",o=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",u=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=u):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=o):this.label_=c;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(ve.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+Va+" "+Zh+(this.collapsed_&&this.collapsible_?" "+Rp:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=g,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(o=>o.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(o=>i.add(o)):i.add(this.attributions_)),!this.overrideCollapsible_){const o=!t.some(l=>{var u;return((u=l.getSource())==null?void 0:u.getAttributionsCollapsible())===!1});this.setCollapsible(o)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(o=>Ny(()=>o))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Qi(t,this.renderedAttributions_)){av(this.ulElement_);for(let o=0,l=t.length;o<l;++o){const u=document.createElement("li");u.innerHTML=t[o],this.ulElement_.appendChild(u)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Rp),this.collapsed_?wp(this.collapseLabel_,this.label_):wp(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class xx extends rd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",o=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(o));const l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=t+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(this.label_),u.addEventListener(ve.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Va+" "+Zh,d=this.element;d.className=c,d.appendChild(u),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ca)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Ls}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const o="rotate("+i+"rad)";if(this.autoHide_){const l=this.element.classList.contains(ca);!l&&i===0?this.element.classList.add(ca):l&&i!==0&&this.element.classList.remove(ca)}this.label_.style.transform=o}this.rotation_=i}}class wx extends rd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,o=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",u=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=o,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(ve.CLICK,this.handleClick_.bind(this,i),!1);const _=document.createElement("button");_.className=l,_.setAttribute("type","button"),_.title=g,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(ve.CLICK,this.handleClick_.bind(this,-i),!1);const y=t+" "+Va+" "+Zh,x=this.element;x.className=y,x.appendChild(p),x.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const o=i.getZoom();if(o!==void 0){const l=i.getConstrainedZoom(o+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:l,duration:this.duration_,easing:Ls})):i.setZoom(l)}}}function Sx(r){r=r||{};const e=new jn;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new wx(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new xx(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new Ex(r.attributionOptions)),e}const Jp={ACTIVE:"active"};class $o extends bn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Jp.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Jp.ACTIVE,e)}setMap(e){this.map_=e}}function Cx(r,e,t){const i=r.getCenterInternal();if(i){const o=[i[0]+e[0],i[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Pv,center:r.getConstrainedCenter(o)})}}function sd(r,e,t,i){const o=r.getZoom();if(o===void 0)return;const l=r.getConstrainedZoom(o+e),u=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:u,anchor:t,duration:i!==void 0?i:250,easing:Ls})}class Rx extends $o{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ke.DBLCLICK){const i=e.originalEvent,o=e.map,l=e.coordinate,u=i.shiftKey?-this.delta_:this.delta_,c=o.getView();sd(c,u,l,this.duration_),i.preventDefault(),t=!0}return!t}}class qo extends $o{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ke.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ke.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ke.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ke.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function od(r){const e=r.length;let t=0,i=0;for(let o=0;o<e;o++)t+=r[o].clientX,i+=r[o].clientY;return{clientX:t/e,clientY:i/e}}function yh(r){const e=arguments;return function(t){let i=!0;for(let o=0,l=e.length;o<l&&(i=i&&e[o](t),!!i);++o);return i}}const Tx=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ix=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),i=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},f_=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Ix(r):!0},Lx=To,g_=function(r){const e=r.originalEvent;return e.button==0&&!(lv&&Nm&&e.ctrlKey)},p_=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Mx=function(r){const e=r.originalEvent;return Nm?e.metaKey:e.ctrlKey},Ax=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},m_=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},eh=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},kx=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class Px extends qo{constructor(e){super({stopDown:Oa}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:yh(p_,kx);this.condition_=e.onFocusOnly?yh(f_,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,o=t.getEventPixel(od(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){const l=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],c=e.map.getView();l1(l,c.getResolution()),Dh(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),u=i.getCenterInternal(),c=t.getPixelFromCoordinateInternal(u),d=t.getCoordinateFromPixelInternal([c[0]-o*Math.cos(l),c[1]-o*Math.sin(l)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:Ls})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Dx extends qo{constructor(e){e=e||{},super({stopDown:Oa}),this.condition_=e.condition?e.condition:Tx,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!eh(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Jh)return;const o=t.getSize(),l=e.pixel,u=Math.atan2(o[1]/2-l[1],l[0]-o[0]/2);if(this.lastAngle_!==void 0){const c=u-this.lastAngle_;i.adjustRotationInternal(-c)}this.lastAngle_=u}handleUpEvent(e){return eh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return eh(e)&&g_(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Ox extends Da{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(e[0],t[0])+i,o.top=Math.min(e[1],t[1])+i,o.width=Math.abs(t[0]-e[0])+i,o.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,o=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Po([o])}getGeometry(){return this.geometry_}}const is={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class yo extends gi{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class Fx extends qo{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new Ox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??g_,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const o=i[0]-t[0],l=i[1]-t[1];return o*o+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new yo(is.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new yo(t?is.BOXEND:is.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new yo(is.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yo(is.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yo(is.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class Nx extends Fx{constructor(e){e=e||{};const t=e.condition?e.condition:Ax;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let o=this.getGeometry();if(this.out_){const l=i.rotatedExtentForGeometry(o),u=i.getResolutionForExtentInternal(l),c=i.getResolution()/u;o=o.clone(),o.scale(c*c)}i.fitInternal(o,{duration:this.duration_,easing:Ls})}}const _r={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class zx extends $o{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return p_(t)&&m_(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ve.KEYDOWN){const i=e.originalEvent,o=i.key;if(this.condition_(e)&&(o==_r.DOWN||o==_r.LEFT||o==_r.RIGHT||o==_r.UP)){const u=e.map.getView(),c=u.getResolution()*this.pixelDelta_;let d=0,g=0;o==_r.DOWN?g=-c:o==_r.LEFT?d=-c:o==_r.RIGHT?d=c:g=c;const p=[d,g];Dh(p,u.getRotation()),Cx(u,p,this.duration_),i.preventDefault(),t=!0}}return!t}}class Gx extends $o{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Mx(t)&&m_(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ve.KEYDOWN||e.type==ve.KEYPRESS){const i=e.originalEvent,o=i.key;if(this.condition_(e)&&(o==="+"||o==="-")){const l=e.map,u=o==="+"?this.delta_:-this.delta_,c=l.getView();sd(c,u,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class Ux extends $o{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Lx;this.condition_=e.onFocusOnly?yh(f_,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==ve.WHEEL)return!0;const i=e.map,o=e.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==ve.WHEEL&&(l=o.deltaY,sv&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=zm),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=i.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=l;const d=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ze(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),sd(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class Wx extends qo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Oa),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],o=this.targetPointers[1],l=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){const d=l-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=l;const u=e.map,c=u.getView();c.getConstraints().rotation!==Jh&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(od(this.targetPointers))),this.rotating_&&(u.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class Xx extends qo{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Oa),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],o=this.targetPointers[1],l=i.clientX-o.clientX,u=i.clientY-o.clientY,c=Math.sqrt(l*l+u*u);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(od(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function jx(r){r=r||{};const e=new jn,t=new dx(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new Dx),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new Rx({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new Px({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new Wx),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new Xx({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new zx),e.push(new Gx({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new Ux({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new Nx({duration:r.zoomDuration})),e}function __(r){if(r instanceof Ha){r.setMapInternal(null);return}r instanceof Ms&&r.getLayers().forEach(__)}function y_(r,e){if(r instanceof Ha){r.setMapInternal(e);return}if(r instanceof Ms){const t=r.getLayers().getArray();for(let i=0,o=t.length;i<o;++i)y_(t[i],e)}}let Bx=class extends bn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=bx(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:zm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Mn(),this.pixelToCoordinateTransform_=Mn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Sx(),this.interactions=t.interactions||jx({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new yx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(xt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(xt.VIEW,this.handleViewChanged_),this.addChangeListener(xt.SIZE,this.handleSizeChanged_),this.addChangeListener(xt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Wn)&&e.view.then(function(o){i.setView(new Wn(o))}),this.controls.addEventListener(Gt.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(Gt.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(Gt.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(Gt.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(Gt.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(Gt.REMOVE,o=>{const l=o.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){y_(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const l=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter!==void 0?i.layerFilter:To,c=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,l,c,t,null,u,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(o){i.push(o)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(o){o instanceof Ms?t(o.getLayers()):e.push(o)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const o=t.layerFilter!==void 0?t.layerFilter:To,l=t.hitTolerance!==void 0?t.hitTolerance:0,u=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,l,u,o,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),o=this.getSize(),l=i.width/o[0],u=i.height/o[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-i.left)/l,(c.clientY-i.top)/u]}getTarget(){return this.get(xt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return dh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ut(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(xt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof jn){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const o=e[t];if(!o.visible)continue;const l=o.layer.getRenderer();if(l&&!l.ready)return!0;const u=o.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(e){const t=si(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ut(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(xt.SIZE)}getView(){return this.get(xt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,o){return vx(this.frameState_,e,t,i,o)}handleBrowserEvent(e,t){t=t||e.type;const i=new Bi(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===_h.POINTERDOWN||i===ve.WHEEL||i===ve.KEYDOWN){const o=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():o,u=t.target,c=l instanceof ShadowRoot?l.host===u?l.host.ownerDocument:l:l===o?o.documentElement:l;if(this.overlayContainerStopEvent_.contains(u)||!c.contains(u))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const o=this.getInteractions().getArray().slice();for(let l=o.length-1;l>=0;l--){const u=o[l];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let o=this.maxTilesLoading_,l=o;if(e){const u=e.viewHints;if(u[wt.ANIMATING]||u[wt.INTERACTING]){const c=Date.now()-e.time>8;o=c?0:8,l=c?0:2}}t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(cn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(cn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new cs(bi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new cs(bi.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let o=0,l=i.length;o<l;++o)i[o](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,o=this.targetChangeHandlerKeys_.length;i<o;++i)We(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ve.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ve.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new px(this)),this.mapBrowserEventHandler_=new mx(this,this.moveTolerance_);for(const l in Ke)this.mapBrowserEventHandler_.addEventListener(Ke[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ve.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ve.WHEEL,this.boundHandleBrowserEvent_,Um?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const l=t.getRootNode();i=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Le(i,ve.KEYDOWN,this.handleBrowserEvent,this),Le(i,ve.KEYPRESS,this.handleBrowserEvent,this)];const o=t.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(We(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(We(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Le(e,Es.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Le(e,ve.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(We),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Yi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Le(e,Es.PROPERTYCHANGE,this.render,this),Le(e,ve.CHANGE,this.render,this),Le(e,"addlayer",this.handleLayerAdd_,this),Le(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const o=e[t].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){__(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),o=this.frameState_;let l=null;if(t!==void 0&&Cp(t)&&i&&i.isDef()){const u=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=i.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:lh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:De(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const d=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=lh(c.nextCenter,c.nextResolution,d,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),o&&(!this.previousExtent_||!Bo(this.previousExtent_)&&!Io(l.extent,this.previousExtent_))&&(this.dispatchEvent(new cs(bi.MOVESTART,this,o)),this.previousExtent_=jo(this.previousExtent_)),this.previousExtent_&&!l.viewHints[wt.ANIMATING]&&!l.viewHints[wt.INTERACTING]&&!Io(l.extent,this.previousExtent_)&&(this.dispatchEvent(new cs(bi.MOVEEND,this,l)),um(l.extent,this.previousExtent_))),this.dispatchEvent(new cs(bi.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(bi.LOADSTART)||this.hasListener(bi.LOADEND)||this.hasListener(cn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Yi("removelayer",t)),this.set(xt.LAYERGROUP,e)}setSize(e){this.set(xt.SIZE,e)}setTarget(e){this.set(xt.TARGET,e)}setView(e){if(!e||e instanceof Wn){this.set(xt.VIEW,e);return}this.set(xt.VIEW,new Wn);const t=this;e.then(function(i){t.setView(new Wn(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const o=getComputedStyle(e),l=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),u=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(l)&&!isNaN(u)&&(t=[Math.max(0,l),Math.max(0,u)],!Cp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Sm("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Qi(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function bx(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Ms({layers:r.layers});t[xt.LAYERGROUP]=i,t[xt.TARGET]=r.target,t[xt.VIEW]=r.view instanceof Wn?r.view:new Wn;let o;r.controls!==void 0&&(Array.isArray(r.controls)?o=new jn(r.controls.slice()):(ke(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),o=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new jn(r.interactions.slice()):(ke(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let u;return r.overlays!==void 0?Array.isArray(r.overlays)?u=new jn(r.overlays.slice()):(ke(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new jn,{controls:o,interactions:l,keyboardEventTarget:e,overlays:u,values:t}}class Yx{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Da&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ke(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ke(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ke(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function ka(r,e,t,i){return i!==void 0?(i[0]=r,i[1]=e,i[2]=t,i):[r,e,t]}function Vx(r,e,t){return r+"/"+e+"/"+t}function Kx(r){return Zx(r[0],r[1],r[2])}function Zx(r,e,t){return(e<<r)+t}function Hx(r,e){const t=r[0],i=r[1],o=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(i,o):!0}class ld{constructor(e,t,i,o){this.minX=e,this.maxX=t,this.minY=i,this.maxY=o}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function rs(r,e,t,i,o){return o!==void 0?(o.minX=r,o.maxX=e,o.minY=t,o.maxY=i,o):new ld(r,e,t,i)}const ma={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class $x extends Ha{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ma.PRELOAD)}setPreload(e){this.set(ma.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ma.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ma.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Pa(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function qx(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const Qx=new Error("disposed");let ss=null;function Jx(r){ss||(ss=et(r.width,r.height,void 0,{willReadFrequently:!0}));const e=ss.canvas,t=r.width;e.width!==t&&(e.width=t);const i=r.height;return e.height!==i&&(e.height=i),ss.clearRect(0,0,t,i),ss.drawImage(r,0,0),ss.getImageData(0,0,t,i).data}const ew=[256,256];class vh extends id{constructor(e){const t=se.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Pa(this.data_);return e?[e.width,e.height]:ew}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==se.IDLE&&this.state!==se.ERROR)return;this.state=se.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=se.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=se.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Qx),this.controller_=null),super.disposeInternal()}}const v_=.5,tw=10,em=.25;class E_{constructor(e,t,i,o,l,u,c){this.sourceProj_=e,this.targetProj_=t;let d={};const g=c?M1(D=>ut(c,Xa(D,this.targetProj_,this.sourceProj_))):Ao(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const M=D[0]+"/"+D[1];return d[M]||(d[M]=g(D)),d[M]},this.maxSourceExtent_=o,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Te(o)>=Te(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Te(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Te(this.targetProj_.getExtent()):null;const p=fi(i),_=Ga(i),y=za(i),x=Na(i),E=this.transformInv_(p),w=this.transformInv_(_),S=this.transformInv_(y),I=this.transformInv_(x),T=tw+(u?Math.max(0,Math.ceil(Math.log2(Lo(i)/(u*u*256*256)))):0);if(this.addQuad_(p,_,y,x,E,w,S,I,T),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(M,k,X){D=Math.min(D,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-D>this.sourceWorldWidth_/2){const k=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];k[0][0]-D>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-D>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-D>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);const X=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-X<this.sourceWorldWidth_/2&&(M.source=k)}})}d={}}addTriangle_(e,t,i,o,l,u){this.triangles_.push({source:[o,l,u],target:[e,t,i]})}addQuad_(e,t,i,o,l,u,c,d,g){const p=tp([l,u,c,d]),_=this.sourceWorldWidth_?Te(p)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&_>.5&&_<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const S=tp([e,t,i,o]);E=Te(S)/this.targetWorldWidth_>em||E}!x&&this.sourceProj_.isGlobal()&&_&&(E=_>em||E)}if(!E&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Xt(p,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)E=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const S=[(e[0]+i[0])/2,(e[1]+i[1])/2],I=this.transformInv_(S);let T;x?T=(_s(l[0],y)+_s(c[0],y))/2-_s(I[0],y):T=(l[0]+c[0])/2-I[0];const D=(l[1]+c[1])/2-I[1];E=T*T+D*D>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const S=[(t[0]+i[0])/2,(t[1]+i[1])/2],I=this.transformInv_(S),T=[(o[0]+e[0])/2,(o[1]+e[1])/2],D=this.transformInv_(T);this.addQuad_(e,t,S,T,l,u,I,D,g-1),this.addQuad_(T,S,i,o,D,I,c,d,g-1)}else{const S=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(S),T=[(i[0]+o[0])/2,(i[1]+o[1])/2],D=this.transformInv_(T);this.addQuad_(e,S,T,o,l,I,D,d,g-1),this.addQuad_(S,t,i,T,I,u,c,D,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,i,o,l,c,d),w&14||this.addTriangle_(e,i,t,l,c,u),w&&(w&13||this.addTriangle_(t,o,e,u,d,l),w&7||this.addTriangle_(t,o,i,u,d,c))}calculateSourceExtent(){const e=$t();return this.triangles_.forEach(function(t,i,o){const l=t.source;Ro(e,l[0]),Ro(e,l[1]),Ro(e,l[2])}),e}getTriangles(){return this.triangles_}}let th;const vs=[];function tm(r,e,t,i,o){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(i,o),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,i)+1,Math.max(t,o)),r.restore()}function nh(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function nw(){if(th===void 0){const r=et(6,6,vs);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",tm(r,4,5,4,0),tm(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;th=nh(e,0)||nh(e,4)||nh(e,8),Ba(r),vs.push(r.canvas)}return th}function nm(r,e,t,i){const o=Xa(t,e,r);let l=hp(e,i,t);const u=e.getMetersPerUnit();u!==void 0&&(l*=u);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const d=r.getExtent();if(!d||Ss(d,o)){const g=hp(r,l,o)/l;isFinite(g)&&g>0&&(l/=g)}return l}function x_(r,e,t,i){const o=Sr(t);let l=nm(r,e,o,i);return(!isFinite(l)||l<=0)&&pm(t,function(u){return l=nm(r,e,u,i),isFinite(l)&&l>0}),l}function iw(r,e,t,i,o,l,u,c,d,g,p,_,y,x){const E=et(Math.round(t*r),Math.round(t*e),vs);if(_||(E.imageSmoothingEnabled=!1),d.length===0)return E.canvas;E.scale(t,t);function w(k){return Math.round(k*t)/t}E.globalCompositeOperation="lighter";const S=$t();d.forEach(function(k,X,V){fm(S,k.extent)});let I;const T=t/i,D=(_?1:1+Math.pow(2,-24))/T;{if(I=et(Math.round(Te(S)*T),Math.round(rt(S)*T),vs),_||(I.imageSmoothingEnabled=!1),o&&x){const k=(o[0]-S[0])*T,X=-(o[3]-S[3])*T,V=Te(o)*T,N=rt(o)*T;I.rect(k,X,V,N),I.clip()}d.forEach(function(k,X,V){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){I.save();const q=(k.clipExtent[0]-S[0])*T,ee=-(k.clipExtent[3]-S[3])*T,oe=Te(k.clipExtent)*T,H=rt(k.clipExtent)*T;I.rect(_?q:Math.round(q),_?ee:Math.round(ee),_?oe:Math.round(q+oe)-Math.round(q),_?H:Math.round(ee+H)-Math.round(ee)),I.clip()}const N=(k.extent[0]-S[0])*T,j=-(k.extent[3]-S[3])*T,b=Te(k.extent)*T,ne=rt(k.extent)*T;I.drawImage(k.image,g,g,k.image.width-2*g,k.image.height-2*g,_?N:Math.round(N),_?j:Math.round(j),_?b:Math.round(N+b)-Math.round(N),_?ne:Math.round(j+ne)-Math.round(j)),k.clipExtent&&I.restore()}})}const M=fi(u);return c.getTriangles().forEach(function(k,X,V){const N=k.source,j=k.target;let b=N[0][0],ne=N[0][1],q=N[1][0],ee=N[1][1],oe=N[2][0],H=N[2][1];const ie=w((j[0][0]-M[0])/l),Y=w(-(j[0][1]-M[1])/l),W=w((j[1][0]-M[0])/l),Q=w(-(j[1][1]-M[1])/l),U=w((j[2][0]-M[0])/l),R=w(-(j[2][1]-M[1])/l),z=b,te=ne;b=0,ne=0,q-=z,ee-=te,oe-=z,H-=te;const G=[[q,ee,0,0,W-ie],[oe,H,0,0,U-ie],[0,0,q,ee,Q-Y],[0,0,oe,H,R-Y]],ue=s1(G);if(!ue)return;if(E.save(),E.beginPath(),nw()||!_){E.moveTo(W,Q);const me=4,Ee=ie-W,Ce=Y-Q;for(let ze=0;ze<me;ze++)E.lineTo(W+w((ze+1)*Ee/me),Q+w(ze*Ce/(me-1))),ze!=me-1&&E.lineTo(W+w((ze+1)*Ee/me),Q+w((ze+1)*Ce/(me-1)));E.lineTo(U,R)}else E.moveTo(W,Q),E.lineTo(ie,Y),E.lineTo(U,R);E.clip(),E.transform(ue[0],ue[2],ue[1],ue[3],ie,Y),E.translate(S[0]-z,S[3]-te);let he;if(I)he=I.canvas,E.scale(D,-D);else{const me=d[0],Ee=me.extent;he=me.image,E.scale(Te(Ee)/he.width,-rt(Ee)/he.height)}E.drawImage(he,0,0),E.restore()}),I&&(Ba(I),vs.push(I.canvas)),p&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(k,X,V){const N=k.target,j=(N[0][0]-M[0])/l,b=-(N[0][1]-M[1])/l,ne=(N[1][0]-M[0])/l,q=-(N[1][1]-M[1])/l,ee=(N[2][0]-M[0])/l,oe=-(N[2][1]-M[1])/l;E.beginPath(),E.moveTo(ne,q),E.lineTo(j,b),E.lineTo(ee,oe),E.closePath(),E.stroke()}),E.restore()),E.canvas}function Qa(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Eh(r,e,t,i,o,l,u){u=u??Qa();const c=1/(r-e),d=1/(t-i),g=1/(o-l);return u[0]=-2*c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*d,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*g,u[11]=0,u[12]=(r+e)*c,u[13]=(i+t)*d,u[14]=(l+o)*g,u[15]=1,u}function im(r,e,t,i,o){return o=o??Qa(),o[0]=r[0]*e,o[1]=r[1]*e,o[2]=r[2]*e,o[3]=r[3]*e,o[4]=r[4]*t,o[5]=r[5]*t,o[6]=r[6]*t,o[7]=r[7]*t,o[8]=r[8]*i,o[9]=r[9]*i,o[10]=r[10]*i,o[11]=r[11]*i,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o}function rw(r,e,t,i,o){o=o??Qa();let l,u,c,d,g,p,_,y,x,E,w,S;return r===o?(o[12]=r[0]*e+r[4]*t+r[8]*i+r[12],o[13]=r[1]*e+r[5]*t+r[9]*i+r[13],o[14]=r[2]*e+r[6]*t+r[10]*i+r[14],o[15]=r[3]*e+r[7]*t+r[11]*i+r[15]):(l=r[0],u=r[1],c=r[2],d=r[3],g=r[4],p=r[5],_=r[6],y=r[7],x=r[8],E=r[9],w=r[10],S=r[11],o[0]=l,o[1]=u,o[2]=c,o[3]=d,o[4]=g,o[5]=p,o[6]=_,o[7]=y,o[8]=x,o[9]=E,o[10]=w,o[11]=S,o[12]=l*e+g*t+x*i+r[12],o[13]=u*e+p*t+E*i+r[13],o[14]=c*e+_*t+w*i+r[14],o[15]=d*e+y*t+S*i+r[15]),o}function sw(r,e,t,i){return i=i??Qa(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r,i[13]=e,i[14]=t,i[15]=1,i}const ow=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,lw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class aw{constructor(e){this.gl_=e,this.program_=xh(e,lw,ow),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,o,l,u,c,d,g,p,_,y,x){const E=this.gl_;d===void 0&&(d=o),g===void 0&&(g=l),u===void 0&&(u=t),c===void 0&&(c=i),p===void 0&&(p=u),_===void 0&&(_=c),y===void 0&&(y=E.canvas.width),x===void 0&&(x=E.canvas.height),E.bindTexture(E.TEXTURE_2D,e),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let w=Eh(0,y,0,x,-1,1);w=rw(w,d,g,0),w=im(w,p,_,1),E.uniformMatrix4fv(this.matrixLocation,!1,w);let S=sw(o/t,l/i,0);S=im(S,u/t,c/i,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,S),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function rm(r,e,t){const i=r.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(r.shaderSource(i,t),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS)){const o=r.getShaderInfoLog(i);throw o===null?new Error("Shader info log creation failed"):new Error(o)}return i}function xh(r,e,t){const i=r.createProgram(),o=rm(r,r.VERTEX_SHADER,t),l=rm(r,r.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(r.attachShader(i,o),r.attachShader(i,l),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw r.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}const uw=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,cw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,hw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,dw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function fw(r,e,t,i){let o;return t&&t.length?o=t.shift():Vh?o=new OffscreenCanvas(r||300,e||300):o=document.createElement("canvas"),r&&(o.width=r),e&&(o.height=e),o.getContext("webgl",i)}function gw(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const sm=[];function pw(r,e,t,i,o,l,u,c,d,g,p,_,y,x){const E=Math.round(i*e),w=Math.round(i*t);r.canvas.width=E,r.canvas.height=w;let S,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,E,w,0,r.RGBA,p,null),S=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,S),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),S===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(d.length===0)return{width:E,height:w,framebuffer:S,texture:I};const T=$t();d.forEach(function(b,ne,q){fm(T,b.extent)});let D,M,k;const X=1/o;{if(D=r.createTexture(),I===null)throw new Error("Could not create texture");M=Math.round(Te(T)*X),k=Math.round(rt(T)*X);const b=r.getParameter(r.MAX_TEXTURE_SIZE),ne=Math.max(M,k),q=ne>b?b/ne:1,ee=Math.round(M*q),oe=Math.round(k*q);r.bindTexture(r.TEXTURE_2D,D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,ee,oe,0,r.RGBA,p,null);const H=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,H),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,D,0);const ie=new aw(r);d.forEach(function(Y,W,Q){const U=(Y.extent[0]-T[0])*X*q,R=-(Y.extent[3]-T[3])*X*q,z=Te(Y.extent)*X*q,te=rt(Y.extent)*X*q;if(r.bindFramebuffer(r.FRAMEBUFFER,H),r.viewport(0,0,ee,oe),Y.clipExtent){const G=(Y.clipExtent[0]-T[0])*X*q,ue=-(Y.clipExtent[3]-T[3])*X*q,he=Te(Y.clipExtent)*X*q,me=rt(Y.clipExtent)*X*q;r.enable(r.SCISSOR_TEST),r.scissor(y?G:Math.round(G),y?ue:Math.round(ue),y?he:Math.round(G+he)-Math.round(G),y?me:Math.round(ue+me)-Math.round(ue))}ie.drawImage(Y.texture,Y.width,Y.height,g,g,Y.width-2*g,Y.height-2*g,y?U:Math.round(U),y?R:Math.round(R),y?z:Math.round(U+z)-Math.round(U),y?te:Math.round(R+te)-Math.round(R),ee,oe),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(H)}const V=fi(u),N=fi(T),j=b=>{const ne=(b[0][0]-V[0])/l*i,q=-(b[0][1]-V[1])/l*i,ee=(b[1][0]-V[0])/l*i,oe=-(b[1][1]-V[1])/l*i,H=(b[2][0]-V[0])/l*i,ie=-(b[2][1]-V[1])/l*i;return{u1:ee,v1:oe,u0:ne,v0:q,u2:H,v2:ie}};r.bindFramebuffer(r.FRAMEBUFFER,S),r.viewport(0,0,E,w);{const b=[],ne=[],q=xh(r,dw,hw);r.useProgram(q);const ee=r.getUniformLocation(q,"u_texture");r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(ee,0),c.getTriangles().forEach(function(U,R,z){const te=U.source,G=U.target,{u1:ue,v1:he,u0:me,v0:Ee,u2:Ce,v2:ze}=j(G),Ct=(te[0][0]-N[0])/o/M,kn=-(te[0][1]-N[1])/o/k,gn=(te[1][0]-N[0])/o/M,Yn=-(te[1][1]-N[1])/o/k,Pn=(te[2][0]-N[0])/o/M,qt=-(te[2][1]-N[1])/o/k;b.push(ue,he,me,Ee,Ce,ze),ne.push(gn,Yn,Ct,kn,Pn,qt)});const oe=Eh(0,E,w,0,-1,1),H=r.getUniformLocation(q,"u_matrix");r.uniformMatrix4fv(H,!1,oe);const ie=r.getAttribLocation(q,"a_position"),Y=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,Y),r.bufferData(r.ARRAY_BUFFER,new Float32Array(b),r.STATIC_DRAW),r.vertexAttribPointer(ie,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ie);const W=r.getAttribLocation(q,"a_texcoord"),Q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,Q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ne),r.STATIC_DRAW),r.vertexAttribPointer(W,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(W),r.drawArrays(r.TRIANGLES,0,b.length/2)}if(_){const b=xh(r,cw,uw);r.useProgram(b);const ne=Eh(0,E,w,0,-1,1),q=r.getUniformLocation(b,"u_matrix");r.uniformMatrix4fv(q,!1,ne);const ee=Array.isArray(_)?_:[0,0,0,255],oe=r.getUniformLocation(b,"u_val");r.uniform4fv(oe,ee);const H=r.getAttribLocation(b,"a_position"),ie=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ie),r.vertexAttribPointer(H,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(H);const Y=c.getTriangles().reduce(function(W,Q){const U=Q.target,{u1:R,v1:z,u0:te,v0:G,u2:ue,v2:he}=j(U);return W.concat([R,z,te,G,te,G,ue,he,ue,he,R,z])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(Y),r.STATIC_DRAW),r.drawArrays(r.LINES,0,Y.length/2)}return{width:E,height:w,framebuffer:S,texture:I}}class mw extends vh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,i=t.getExtent(),o=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?o?Ln(i,o):i:o;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const d=u?Ln(l,u):l;if(Lo(d)===0){this.state=se.EMPTY;return}i&&(c?c=Ln(c,i):c=i);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=e.targetProj,_=x_(t,p,d,g);if(!isFinite(_)||_<=0){this.state=se.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:v_;if(this.triangulation_=new E_(t,p,d,c,_*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=se.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(_);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ze(x[1],c[1],c[3]),x[3]=Ze(x[3],c[1],c[3])):x=Ln(x,c)),!Lo(x))this.state=se.EMPTY;else{let E=0,w=0;t.canWrapX()&&(E=Te(i),w=Math.floor((x[0]-i[0])/E)),Mh(x.slice(),t,!0).forEach(I=>{const T=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),D=e.getTileFunction;for(let M=T.minX;M<=T.maxX;M++)for(let k=T.minY;k<=T.maxY;k++){const X=D(this.sourceZ_,M,k,this.pixelRatio_);if(X){const V=w*E;this.sourceTiles_.push({tile:X,offset:V})}}++w}),this.sourceTiles_.length===0&&(this.state=se.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(M=>{var R;const k=M.tile;if(!k||k.getState()!==se.LOADED)return;const X=k.getSize(),V=this.gutter_;let N;const j=qx(k.getData());j?N=j:(t=!0,N=Jx(Pa(k.getData())));const b=[X[0]+2*V,X[1]+2*V],ne=N instanceof Float32Array,q=b[0]*b[1],ee=ne?Float32Array:Uint8ClampedArray,oe=new ee(N.buffer),H=ee.BYTES_PER_ELEMENT,ie=H*oe.length/q,Y=oe.byteLength/b[1],W=Math.floor(Y/H/b[0]),Q=this.sourceTileGrid_.getTileCoordExtent(k.tileCoord);Q[0]+=M.offset,Q[2]+=M.offset;const U=(R=this.clipExtent_)==null?void 0:R.slice();U&&(U[0]+=M.offset,U[2]+=M.offset),e.push({extent:Q,clipExtent:U,data:oe,dataType:ee,bytesPerPixel:ie,pixelSize:b,bandCount:W})}),this.sourceTiles_.length=0,e.length===0){this.state=se.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(i),l=typeof o=="number"?o:o[0],u=typeof o=="number"?o:o[1],c=l*this.pixelRatio_,d=u*this.pixelRatio_,g=this.targetTileGrid_.getResolution(i),p=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*d),E=fw(c,d,sm,{premultipliedAlpha:!1,antialias:!1});let w;const S=E.RGBA;let I;e[0].dataType==Float32Array?(I=E.FLOAT,E.getExtension("WEBGL_color_buffer_float"),E.getExtension("OES_texture_float"),E.getExtension("EXT_float_blend"),w=E.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=E.UNSIGNED_BYTE,w=this.interpolate);const T=4,D=Math.ceil(y/T);for(let M=D-1;M>=0;--M){const k=[];for(let ee=0,oe=e.length;ee<oe;++ee){const H=e[ee],ie=H.pixelSize,Y=ie[0],W=ie[1],Q=new H.dataType(T*Y*W),U=H.data;let R=M*T;for(let te=0,G=Q.length;te<G;te+=T)Q[te]=U[R],Q[te+1]=U[R+1],Q[te+2]=U[R+2],Q[te+3]=U[R+3],R+=y;const z=E.createTexture();E.bindTexture(E.TEXTURE_2D,z),w?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST)),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,S,Y,W,0,S,I,Q),k.push({extent:H.extent,clipExtent:H.clipExtent,texture:z,width:Y,height:W})}const{framebuffer:X,width:V,height:N}=pw(E,l,u,this.pixelRatio_,p,g,_,this.triangulation_,k,this.gutter_,I,this.renderEdges_,w),j=V,b=N*T,ne=new e[0].dataType(j*b);E.bindFramebuffer(E.FRAMEBUFFER,X),E.readPixels(0,0,V,N,E.RGBA,I,ne);let q=M*T;for(let ee=0,oe=ne.length;ee<oe;ee+=T){const H=(j-1-(ee/b|0))*b+ee%b;x[q]=ne[H],x[q+1]=ne[H+1],x[q+2]=ne[H+2],x[q+3]=ne[H+3],q+=y}}if(gw(E),sm.push(E.canvas),t){const M=et(l,u),k=new ImageData(x,l);M.putImageData(k,0,0),this.reprojData_=M.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(d)],this.state=se.LOADED,this.changed()}load(){if(this.state!==se.IDLE&&this.state!==se.ERROR)return;this.state=se.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i!==se.IDLE&&i!==se.LOADING)return;e++;const o=Le(t,ve.CHANGE,()=>{const l=t.getState();(l==se.LOADED||l==se.ERROR||l==se.EMPTY)&&(We(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==se.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(We),this.sourcesListenerKeys_=null}}class wh extends id{constructor(e,t,i,o,l,u,c,d,g,p,_,y){super(l,se.IDLE,y),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=o,this.wrappedTileCoord_=u||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=o.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const S=E?Ln(x,E):x;if(Lo(S)===0){this.state=se.EMPTY;return}const I=e.getExtent();I&&(w?w=Ln(w,I):w=I);const T=o.getResolution(this.wrappedTileCoord_[0]),D=x_(e,i,S,T);if(!isFinite(D)||D<=0){this.state=se.EMPTY;return}const M=p!==void 0?p:v_;if(this.triangulation_=new E_(e,i,S,w,D*M,T),this.triangulation_.getTriangles().length===0){this.state=se.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let k=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(k[1]=Ze(k[1],w[1],w[3]),k[3]=Ze(k[3],w[1],w[3])):k=Ln(k,w)),!Lo(k))this.state=se.EMPTY;else{let X=0,V=0;e.canWrapX()&&(X=Te(I),V=Math.floor((k[0]-I[0])/X)),Mh(k.slice(),e,!0).forEach(j=>{const b=t.getTileRangeForExtentAndZ(j,this.sourceZ_);for(let ne=b.minX;ne<=b.maxX;ne++)for(let q=b.minY;q<=b.maxY;q++){const ee=g(this.sourceZ_,ne,q,c);if(ee){const oe=V*X;this.sourceTiles_.push({tile:ee,offset:oe})}}++V}),this.sourceTiles_.length===0&&(this.state=se.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var o;const i=t.tile;if(i&&i.getState()==se.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const u=(o=this.clipExtent_)==null?void 0:o.slice();u&&(u[0]+=t.offset,u[2]+=t.offset),e.push({extent:l,clipExtent:u,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=se.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),o=typeof i=="number"?i:i[0],l=typeof i=="number"?i:i[1],u=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=iw(o,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=se.LOADED}this.changed()}load(){if(this.state==se.IDLE){this.state=se.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==se.IDLE||i==se.LOADING){e++;const o=Le(t,ve.CHANGE,l=>{const u=t.getState();(u==se.LOADED||u==se.ERROR||u==se.EMPTY)&&(We(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(o)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,o){t.getState()==se.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(We),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ba(this.canvas_.getContext("2d")),vs.push(this.canvas_),this.canvas_=null),super.release()}}function ih(r,e,t,i){return`${r},${Vx(e,t,i)}`}function rh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const i=r[t],o=i.has(e);return o||i.add(e),!o}function _w(r,e,t){const i=r[t];return i?i.delete(e):!1}function om(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=Ln(e,Vi(t.extent,r.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const o=i.getTileGridForProjection(r.viewState.projection).getExtent();o&&(e=Ln(e,o))}return e}class yw extends o_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=$t(),this.tempTileRange_=new ld(0,0,0,0),this.tempTileCoord_=ka(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Yx(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,o){const l=this.tileCache_,c=this.getLayer().getSource(),d=ih(c.getKey(),e,t,i);let g;if(l.containsKey(d))g=l.get(d);else{if(g=c.getTile(e,t,i,o.pixelRatio,o.viewState.projection),!g)return null;l.set(d,g)}return g}getTile(e,t,i,o){const l=this.getOrCreateTile(e,t,i,o);return l||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),o=ut(t.pixelToCoordinateTransform,e.slice()),l=i.getExtent();if(l&&!Ss(l,o))return null;const u=t.viewState,c=i.getRenderSource(),d=c.getTileGridForProjection(u.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let p=d.getZForResolution(u.resolution);p>=d.getMinZoom();--p){const _=d.getTileCoordForCoordAndZ(o,p),y=this.getTile(p,_[1],_[2],t);if(!y||y.getState()!==se.LOADED)continue;const x=d.getOrigin(p),E=Bt(d.getTileSize(p)),w=d.getResolution(p);let S;if(y instanceof d_||y instanceof wh)S=y.getImage();else if(y instanceof vh){if(S=Pa(y.getData()),!S)continue}else continue;const I=Math.floor(g*((o[0]-x[0])/w-_[1]*E[0])),T=Math.floor(g*((x[1]-o[1])/w-_[2]*E[1])),D=Math.round(g*c.getGutterForProjection(u.projection));return this.getImageData(S,I+D,T+D)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,o,l){const u=e.viewState,c=this.getLayer(),d=c.getRenderSource(),g=d.getTileGridForProjection(u.projection),p=De(d);p in e.wantedTiles||(e.wantedTiles[p]={});const _=e.wantedTiles[p],y=c.getMapInternal(),x=Math.max(i-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let E=i;E>=x;--E){const w=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),S=g.getResolution(E);for(let I=w.minX;I<=w.maxX;++I)for(let T=w.minY;T<=w.maxY;++T){const D=this.getTile(E,I,T,e);if(!D||!rh(o,D,E))continue;const k=D.getKey();if(_[k]=!0,D.getState()===se.IDLE&&!e.tileQueue.isKeyQueued(k)){const X=ka(E,I,T,this.tempTileCoord_);e.tileQueue.enqueue([D,p,g.getTileCoordCenter(X),S])}}}}findStaleTile_(e,t){const i=this.tileCache_,o=e[0],l=e[1],u=e[2],c=this.getStaleKeys();for(let d=0;d<c.length;++d){const g=ih(c[d],o,l,u);if(i.containsKey(g)){const p=i.get(g);if(p.getState()===se.LOADED)return p.endTransition(De(this)),rh(t,p,o),!0}}return!1}findAltTiles_(e,t,i,o){const l=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!l)return!1;let u=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let p=l.minX;p<=l.maxX;++p)for(let _=l.minY;_<=l.maxY;++_){const y=ih(g,i,p,_);let x=!1;if(c.containsKey(y)){const E=c.get(y);E.getState()===se.LOADED&&(rh(o,E,i),x=!0)}x||(u=!1)}return u}renderFrame(e,t){let i=!0;this.renderComplete=!0;const o=e.layerStatesArray[e.layerIndex],l=e.viewState,u=l.projection,c=l.resolution,d=l.center,g=e.pixelRatio,p=this.getLayer(),_=p.getSource(),y=_.getRevision(),x=_.getTileGridForProjection(u),E=x.getZForResolution(c,_.zDirection),w=x.getResolution(E),S=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let I=e.extent;const T=_.getTilePixelRatio(g);this.prepareContainer(e,t);const D=this.context.canvas.width,M=this.context.canvas.height,k=o.extent&&Vi(o.extent,u);k&&(I=Ln(I,Vi(o.extent,u)));const X=w*D/2/T,V=w*M/2/T,N=[d[0]-X,d[1]-V,d[0]+X,d[1]+V],j={};this.renderedTiles.length=0;const b=p.getPreload();if(e.nextExtent){const U=x.getZForResolution(l.nextResolution,_.zDirection),R=om(e,e.nextExtent);this.enqueueTiles(e,R,U,j,b)}const ne=om(e,I);if(this.enqueueTiles(e,ne,E,j,0),b>0&&setTimeout(()=>{this.enqueueTiles(e,ne,E-1,j,b-1)},0),!(E in j))return this.container;const q=De(this),ee=e.time;for(const U of j[E]){const R=U.getState();if((U instanceof wh||U instanceof mw)&&R===se.EMPTY)continue;const z=U.tileCoord;if(R===se.LOADED&&U.getAlpha(q,ee)===1){U.endTransition(q);continue}if(R!==se.IDLE&&(i=!1),R!==se.ERROR&&(this.renderComplete=!1),this.findStaleTile_(z,j)){_w(j,U,E),e.animate=!0;continue}if(this.findAltTiles_(x,z,E+1,j))continue;const ue=x.getMinZoom();for(let he=E-1;he>=ue&&!this.findAltTiles_(x,z,he,j);--he);}const oe=w/c*g/T,H=this.getRenderContext(e);hi(this.tempTransform,D/2,M/2,oe,oe,0,-D/2,-M/2),o.extent&&this.clipUnrotated(H,e,k),_.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e);const ie=Object.keys(j).map(Number);ie.sort(ai);let Y;const W=[],Q=[];for(let U=ie.length-1;U>=0;--U){const R=ie[U],z=_.getTilePixelSize(R,g,u),G=x.getResolution(R)/w,ue=z[0]*G*oe,he=z[1]*G*oe,me=x.getTileCoordForCoordAndZ(fi(N),R),Ee=x.getTileCoordExtent(me),Ce=ut(this.tempTransform,[T*(Ee[0]-N[0])/w,T*(N[3]-Ee[3])/w]),ze=T*_.getGutterForProjection(u);for(const Ct of j[R]){if(Ct.getState()!==se.LOADED)continue;const kn=Ct.tileCoord,gn=me[1]-kn[1],Yn=Math.round(Ce[0]-(gn-1)*ue),Pn=me[2]-kn[2],qt=Math.round(Ce[1]-(Pn-1)*he),gt=Math.round(Ce[0]-gn*ue),bt=Math.round(Ce[1]-Pn*he),Dn=Yn-gt,Qt=qt-bt,Jt=ie.length===1;let pn=!1;Y=[gt,bt,gt+Dn,bt,gt+Dn,bt+Qt,gt,bt+Qt];for(let Vn=0,Kn=W.length;Vn<Kn;++Vn)if(!Jt&&R<Q[Vn]){const He=W[Vn];Xt([gt,bt,gt+Dn,bt+Qt],[He[0],He[3],He[4],He[7]])&&(pn||(H.save(),pn=!0),H.beginPath(),H.moveTo(Y[0],Y[1]),H.lineTo(Y[2],Y[3]),H.lineTo(Y[4],Y[5]),H.lineTo(Y[6],Y[7]),H.moveTo(He[6],He[7]),H.lineTo(He[4],He[5]),H.lineTo(He[2],He[3]),H.lineTo(He[0],He[1]),H.clip())}W.push(Y),Q.push(R),this.drawTile(Ct,e,gt,bt,Dn,Qt,ze,Jt),pn&&H.restore(),this.renderedTiles.unshift(Ct),this.updateUsedTiles(e.usedTiles,_,Ct)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Io(this.renderedExtent_,N),this.renderedExtent_=N,this.renderedPixelRatio=g,this.postRender(this.context,e),o.extent&&H.restore(),H.imageSmoothingEnabled=!0,this.renderComplete){const U=(R,z)=>{const te=De(_),G=z.wantedTiles[te],ue=G?Object.keys(G).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(U)}return!this.renderComplete&&!i&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,o,l,u,c,d){let g;if(e instanceof vh){if(g=Pa(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const p=this.getRenderContext(t),_=De(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(d?e.getAlpha(_,t.time):1),E=x!==p.globalAlpha;E&&(p.save(),p.globalAlpha=x),p.drawImage(g,c,c,g.width-2*c,g.height-2*c,i,o,l,u),E&&p.restore(),x!==y.opacity?t.animate=!0:d&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const o=De(t);o in e||(e[o]={}),e[o][i.getKey()]=!0}}class vw extends $x{constructor(e){super(e)}createRenderer(){return new yw(this,{cacheSize:this.getCacheSize()})}}const sh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},os=[0,0,0],ji=5;class w_{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ke(Fy(this.resolutions_,(o,l)=>l-o),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let o=0,l=this.resolutions_.length-1;o<l;++o)if(!t)t=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ke(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=fi(i)),ke(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ke(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:$h,ke(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((o,l)=>{const u=new ld(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(i){const c=this.getTileRangeForExtentAndZ(i,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const o=this.getTileRangeForExtentAndZ(e,t);for(let l=o.minX,u=o.maxX;l<=u;++l)for(let c=o.minY,d=o.maxY;c<=d;++c)i([t,l,c])}forEachTileCoordParentTileRange(e,t,i,o){let l,u,c,d=null,g=e[0]-1;for(this.zoomFactor_===2?(u=e[1],c=e[2]):d=this.getTileCoordExtent(e,o);g>=this.minZoom;){if(u!==void 0&&c!==void 0?(u=Math.floor(u/2),c=Math.floor(c/2),l=rs(u,u,c,c,i)):l=this.getTileRangeForExtentAndZ(d,g,i),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,u=e[2]*2;return rs(l,l+1,u,u+1,t)}const o=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const o=e[0],l=e[1],u=e[2];if(t===o)return rs(l,u,l,u,i);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-o),g=Math.floor(l*d),p=Math.floor(u*d);if(t<o)return rs(g,g,p,p,i);const _=Math.floor(d*(l+1))-1,y=Math.floor(d*(u+1))-1;return rs(g,_,p,y,i)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,os);const o=os[1],l=os[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,os);const u=os[1],c=os[2];return rs(o,u,l,c,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Bt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*o[0]*i,t[1]-(e[2]+.5)*o[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),o=this.getResolution(e[0]),l=Bt(this.getTileSize(e[0]),this.tmpSize_),u=i[0]+e[1]*l[0]*o,c=i[1]-(e[2]+1)*l[1]*o,d=u+l[0]*o,g=c+l[1]*o;return di(u,c,d,g,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,o,l){const u=this.getZForResolution(i),c=i/this.getResolution(u),d=this.getOrigin(u),g=Bt(this.getTileSize(u),this.tmpSize_);let p=c*(e-d[0])/i/g[0],_=c*(d[1]-t)/i/g[1];return o?(p=ua(p,ji)-1,_=ua(_,ji)-1):(p=aa(p,ji),_=aa(_,ji)),ka(u,p,_,l)}getTileCoordForXYAndZ_(e,t,i,o,l){const u=this.getOrigin(i),c=this.getResolution(i),d=Bt(this.getTileSize(i),this.tmpSize_);let g=(e-u[0])/c/d[0],p=(u[1]-t)/c/d[1];return o?(g=ua(g,ji)-1,p=ua(p,ji)-1):(g=aa(g,ji),p=aa(p,ji)),ka(i,g,p,l)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Ch(this.resolutions_,e,t||0);return Ze(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Dm(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let o=this.minZoom;o<t;++o)i[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=i}}function S_(r){let e=r.getDefaultTileGrid();return e||(e=Sw(r),r.setDefaultTileGrid(e)),e}function Ew(r,e,t){const i=e[0],o=r.getTileCoordCenter(e),l=ad(t);if(!Ss(l,o)){const u=Te(l),c=Math.ceil((l[0]-o[0])/u);return o[0]+=u*c,r.getTileCoordForCoordAndZ(o,i)}return e}function xw(r,e,t,i){i=i!==void 0?i:"top-left";const o=C_(r,e,t);return new w_({extent:r,origin:Yy(r,i),resolutions:o,tileSize:t})}function ww(r){const e=r||{},t=e.extent||St("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:C_(t,e.maxZoom,e.tileSize,e.maxResolution)};return new w_(i)}function C_(r,e,t,i){e=e!==void 0?e:Rv,t=Bt(t!==void 0?t:$h);const o=rt(r),l=Te(r);i=i>0?i:Math.max(l/t[0],o/t[1]);const u=e+1,c=new Array(u);for(let d=0;d<u;++d)c[d]=i/Math.pow(2,d);return c}function Sw(r,e,t,i){const o=ad(r);return xw(o,e,t,i)}function ad(r){r=St(r);let e=r.getExtent();if(!e){const t=180*Ah.degrees/r.getMetersPerUnit();e=di(-t,-t,t,t)}return e}class Cw extends h_{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Bt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||De(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,o,l){return Ae()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:S_(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const o=this.getTileGridForProjection(i),l=this.getTilePixelRatio(t),u=Bt(o.getTileSize(e),this.tmpSize);return l==1?u:pv(u,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),o=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=Ew(o,e,i)),Hx(e,o)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Rw extends gi{constructor(e,t){super(e),this.tile=t}}const Tw=/\{z\}/g,Iw=/\{x\}/g,Lw=/\{y\}/g,Mw=/\{-y\}/g;function Aw(r,e,t,i,o){return r.replace(Tw,e.toString()).replace(Iw,t.toString()).replace(Lw,i.toString()).replace(Mw,function(){if(o===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(o-i).toString()})}function kw(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const i=t[1].charCodeAt(0),o=t[2].charCodeAt(0);let l;for(l=i;l<=o;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const i=parseInt(t[2],10);for(let o=parseInt(t[1],10);o<=i;o++)e.push(r.replace(t[0],o.toString()));return e}return e.push(r),e}function Pw(r,e){return function(t,i,o){if(!t)return;let l;const u=t[0];if(e){const c=e.getFullTileRange(u);c&&(l=c.getHeight()-1)}return Aw(r,u,t[1],t[2],l)}}function Dw(r,e){const t=r.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=Pw(r[o],e);return Ow(i)}function Ow(r){return r.length===1?r[0]:function(e,t,i){if(!e)return;const o=Kx(e),l=_s(o,r.length);return r[l](e,t,i)}}class ud extends Cw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ud.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=De(t),o=t.getState();let l;o==se.LOADING?(this.tileLoadingKeys_[i]=!0,l=sh.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],l=o==se.ERROR?sh.TILELOADERROR:o==se.LOADED?sh.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new Rw(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=kw(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Dw(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class Fw extends ud{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Nw,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:d_,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Wc(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Wc(t,e)))return this.tileGrid;const i=De(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=S_(e)),this.tileGridForProjection[i]}createTile_(e,t,i,o,l,u){const c=[e,t,i],d=this.getTileCoordForTileUrlFunction(c,l),g=d?this.tileUrlFunction(d,o,l):void 0,p=new this.tileClass(c,g!==void 0?se.IDLE:se.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=u,p.addEventListener(ve.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,i,o,l){const u=this.getProjection();if(!u||!l||Wc(u,l))return this.getTileInternal(e,t,i,o,u||l);const c=[e,t,i],d=this.getKey(),g=this.getTileGridForProjection(u),p=this.getTileGridForProjection(l),_=this.getTileCoordForTileUrlFunction(c,l),y=new wh(u,g,l,p,c,_,this.getTilePixelRatio(o),this.getGutter(),(x,E,w,S)=>this.getTileInternal(x,E,w,S,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,y}getTileInternal(e,t,i,o,l){const u=this.getKey();return this.createTile_(e,t,i,o,l,u)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=St(e);if(i){const o=De(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=t)}}}function Nw(r,e){r.getImage().src=e}class zw extends Fw{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:ww({extent:ad(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Gw='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Uw extends zw{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Gw];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",o=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}const Ww="72a6eae336f77ec71bee291f3cdb19e8";function R_(r,e){const i=`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${r}&units=metric&appid=${Ww}`;return fetch(i)}function Xw(r){return Ht.useEffect(()=>{const e=new vw({preload:1/0,source:new Uw}),t=new Bx({target:"map",layers:[e],view:new Wn({constrainResolution:!0,center:[12.550343,55.665957],zoom:10})});return t.addEventListener("click",async function(i){t.getAllLayers().forEach(l=>{l.revision_!=1&&t.removeLayer(l)});const o=new sx({source:new cx({features:[new Th({geometry:new ja([i.coordinate[0],i.coordinate[1]])})]}),style:new $i({image:new Ko({anchor:[.5,1],scale:.8,crossOrigin:"anonymous",src:"dist/marker.svg"})})});t.addLayer(o),await R_(i.coordinate[0],i.coordinate[1]).then(l=>l.json()).then(l=>{let u=l;r.onNewInfo(u)})}),()=>t.setTarget(null)},[]),Oe.jsx("div",{style:{height:"99vh",width:"100%"},id:"map",className:"map-container"})}function jw(){k1(),window.onload=r;async function r(){R_(-.135278,51.510357).then(N=>N.json()).then(N=>{V(N)})}const[e,t]=Ht.useState(),[i,o]=Ht.useState("sunny"),[l,u]=Ht.useState(0),[c,d]=Ht.useState("London"),[g,p]=Ht.useState(3),[_,y]=Ht.useState(5),[x,E]=Ht.useState(92),[w,S]=Ht.useState(4),[I,T]=Ht.useState(30),[D,M]=Ht.useState("02d"),[k,X]=Ht.useState(10);async function V(N){u(Math.floor(N.main.temp)),d(N.name),o(N.weather[0].description),p(N.wind.speed),E(N.main.humidity),N.wind.gust?y(N.wind.gust):y(N.wind.speed);let j=new Date;j.getUTCHours()+N.timezone/3600>24?S(j.getUTCHours()+N.timezone/3600-24):S(j.getUTCHours()+N.timezone/3600);let b=j.getMinutes();b<10&&(b="0"+b),T(b),M(N.weather[0].icon),X(Math.floor(N.main.feels_like))}return Oe.jsxs(Oe.Fragment,{children:[Oe.jsx(Ay,{city:c,time:w.toString()+":"+I.toString(),icon:ky[D],weather:i,temp:l+"C",realFeel:k+"C",wind:g+"m/s",gusts:_+"m/s",humidity:x+"%"}),Oe.jsx(Xw,{info:e,setter:t,onNewInfo:V})]})}My.createRoot(document.getElementById("root")).render(Oe.jsx(Ht.StrictMode,{children:Oe.jsx(jw,{})}));
